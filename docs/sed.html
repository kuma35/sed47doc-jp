<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- This file documents version 4.7 of
GNU sed, a stream editor.

Copyright (C) 1998-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no
Back-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License". --><!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->


<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>ストリームエディタ sed</title>

<meta name="description" content="ストリームエディタ sed">
<meta name="keywords" content="ストリームエディタ sed">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#Top" rel="start" title="Top">
<link href="#Concept-Index" rel="index" title="概念索引">
<link href="#SEC_Contents" rel="contents" title="目次">
<link href="/manual" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="manual.css">


</head>

<body lang="en">
<h1 class="settitle" align="center">ストリームエディタ sed</h1>

















<a name="SEC_Contents"></a>
<h2 class="contents-heading">目次</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1 はじめに</a></li>
  <li><a name="toc-Running-sed" href="#Invoking-sed">2 sedの実行</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-1" href="#Overview">2.1 概要</a></li>
    <li><a name="toc-Command_002dLine-Options-1" href="#Command_002dLine-Options">2.2 コマンドラインオプション</a></li>
    <li><a name="toc-Exit-status-1" href="#Exit-status">2.3 終了ステータス</a></li>
  </ul></li>
  <li><a name="toc-sed-scripts-1" href="#sed-scripts">3 <code>sed</code>スクリプト</a>
  <ul class="no-bullet">
    <li><a name="toc-sed-script-overview-1" href="#sed-script-overview">3.1 <code>sed</code>スクリプト概要</a></li>
    <li><a name="toc-sed-commands-summary" href="#sed-commands-list">3.2 <code>sed</code>コマンド要約</a></li>
    <li><a name="toc-The-s-Command" href="#The-_0022s_0022-Command">3.3 <code>s</code> コマンド</a></li>
    <li><a name="toc-Often_002dUsed-Commands" href="#Common-Commands">3.4 よく使われるコマンド群</a></li>
    <li><a name="toc-Less-Frequently_002dUsed-Commands" href="#Other-Commands">3.5 あまり使われないコマンド群</a></li>
    <li><a name="toc-Commands-for-sed-gurus" href="#Programming-Commands">3.6 <code>sed</code>導師のためのコマンド群</a></li>
    <li><a name="toc-Commands-Specific-to-GNU-sed" href="#Extended-Commands">3.7 GNU <code>sed</code> 固有のコマンド</a></li>
    <li><a name="toc-Multiple-commands-syntax-1" href="#Multiple-commands-syntax">3.8 複数コマンド文法</a>
    <ul class="no-bullet">
      <li><a name="toc-Commands-Requiring-a-newline" href="#Commands-Requiring-a-newline">3.8.1 sedコマンドに改行が必要な時</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Addresses_003a-selecting-lines" href="#sed-addresses">4 アドレス：行を選択する。</a>
  <ul class="no-bullet">
    <li><a name="toc-Addresses-overview-1" href="#Addresses-overview">4.1 アドレス概要</a></li>
    <li><a name="toc-Selecting-lines-by-numbers" href="#Numeric-Addresses">4.2 数による行の選択</a></li>
    <li><a name="toc-selecting-lines-by-text-matching" href="#Regexp-Addresses">4.3 テキストマッチによる対象行選択</a></li>
    <li><a name="toc-Range-Addresses-1" href="#Range-Addresses">4.4 範囲アドレス</a></li>
  </ul></li>
  <li><a name="toc-Regular-Expressions_003a-selecting-text" href="#sed-regular-expressions">5 正規表現: テキストの選択</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-of-regular-expression-in-sed" href="#Regular-Expressions-Overview">5.1 <code>sed</code>の正規表現の概要</a></li>
    <li><a name="toc-Basic-_0028BRE_0029-and-extended-_0028ERE_0029-regular-expression" href="#BRE-vs-ERE">5.2 基本正規表現(basic regular expression;BRE)と拡張正規表現(extended regular expression;ERE)</a></li>
    <li><a name="toc-Overview-of-basic-regular-expression-syntax" href="#BRE-syntax">5.3 基本正規表現文法概要</a></li>
    <li><a name="toc-Overview-of-extended-regular-expression-syntax" href="#ERE-syntax">5.4 拡張正規表現文法概要</a></li>
    <li><a name="toc-Character-Classes-and-Bracket-Expressions-1" href="#Character-Classes-and-Bracket-Expressions">5.5 文字クラスと角括弧式</a></li>
    <li><a name="toc-regular-expression-extensions" href="#regexp-extensions">5.6 正規表現拡張</a></li>
    <li><a name="toc-Back_002dreferences-and-Subexpressions-1" href="#Back_002dreferences-and-Subexpressions">5.7 後方参照と部分式</a></li>
    <li><a name="toc-Escape-Sequences-_002d-specifying-special-characters" href="#Escapes">5.8 エスケープシーケンス - 特殊文字の指定</a>
    <ul class="no-bullet">
      <li><a name="toc-Escaping-Precedence" href="#Escaping-Precedence">5.8.1 エスケープ文字の打ち消し</a></li>
    </ul></li>
    <li><a name="toc-Multibyte-characters-and-Locale-Considerations" href="#Locale-Considerations">5.9 マルチバイト文字とロケールに関する考慮事項</a>
    <ul class="no-bullet">
      <li><a name="toc-Invalid-multibyte-characters" href="#Invalid-multibyte-characters">5.9.1 不正なマルチバイト文字</a></li>
      <li><a name="toc-Upper_002fLower-case-conversion" href="#Upper_002fLower-case-conversion">5.9.2 (英語の)大文字小文字変換</a></li>
      <li><a name="toc-Multibyte-regexp-character-classes" href="#Multibyte-regexp-character-classes">5.9.3 マルチバイト正規表現文字クラス</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Advanced-sed_003a-cycles-and-buffers" href="#advanced-sed">6 <code>sed</code>の高度な話題: サイクルとバッファ</a>
  <ul class="no-bullet">
    <li><a name="toc-How-sed-Works" href="#Execution-Cycle">6.1 <code>sed</code>はどのように動いているか</a></li>
    <li><a name="toc-Hold-and-Pattern-Buffers-1" href="#Hold-and-Pattern-Buffers">6.2 ホールド用とパターン用のバッファ</a></li>
    <li><a name="toc-Multiline-techniques-_002d-using-D_002cG_002cH_002cN_002cP-to-process-multiple-lines" href="#Multiline-techniqu">6.3 複数行テクニック - D,G,H,N,P コマンドで複数行処理</a></li>
    <li><a name="toc-Branching-and-Flow-Control" href="#Branching-and-flow-control">6.4 分岐と制御構文</a>
    <ul class="no-bullet">
      <li><a name="toc-Branching-and-Cycles" href="#Branching-and-Cycles">6.4.1 分岐とサイクル</a></li>
      <li><a name="toc-Branching-example_003a-joining-lines" href="#Branching-example_003a-joining-lines">6.4.2 分岐例: 行連結</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Some-Sample-Scripts" href="#例">7 スクリプト例をいくつか</a>
  <ul class="no-bullet">
    <li><a name="toc-Joining-lines-1" href="#Joining-lines">7.1行連結</a></li>
    <li><a name="toc-Centering-Lines" href="#Centering-lines">7.2 センタリング</a></li>
    <li><a name="toc-Increment-a-Number" href="#Increment-a-number">7.3 数のインクリメント</a></li>
    <li><a name="toc-Rename-Files-to-Lower-Case" href="#Rename-files-to-lower-case">7.4 ファイル名を小文字にする</a></li>
    <li><a name="toc-Print-bash-Environment" href="#Print-bash-environment">7.5 <code>bash</code>の環境変数をプリント</a></li>
    <li><a name="toc-Reverse-Characters-of-Lines" href="#Reverse-chars-of-lines">7.6 行の文字を逆順にする</a></li>
    <li><a name="toc-Text-search-across-multiple-lines-1" href="#Text-search-across-multiple-lines">7.7 複数行にわたるテキスト検索</a></li>
    <li><a name="toc-Line-length-adjustment-1" href="#Line-length-adjustment">7.8 行の長さを揃える</a></li>
    <li><a name="toc-Reverse-Lines-of-Files" href="#tac">7.9 ファイルの行の順番を逆順にする</a></li>
    <li><a name="toc-Numbering-Lines" href="#cat-_002dn">7.10 行番号を付ける</a></li>
    <li><a name="toc-Numbering-Non_002dblank-Lines" href="#cat-_002db">7.11 空行以外の行に行番号を付ける</a></li>
    <li><a name="toc-Counting-Characters" href="#wc-_002dc">7.12 文字数を数える</a></li>
    <li><a name="toc-Counting-Words" href="#wc-_002dw">7.13 単語数を数える</a></li>
    <li><a name="toc-Counting-Lines" href="#wc-_002dl">7.14 行数を数える</a></li>
    <li><a name="toc-Printing-the-First-Lines" href="#head">7.15 最初の数行をプリントする</a></li>
    <li><a name="toc-Printing-the-Last-Lines" href="#tail">7.16 末尾の数行をプリントする</a></li>
    <li><a name="toc-Make-Duplicate-Lines-Unique" href="#uniq">7.17 同一行を1つにまとめる</a></li>
    <li><a name="toc-Print-Duplicated-Lines-of-Input" href="#uniq-_002dd">7.18 重複した行のみプリントする。</a></li>
    <li><a name="toc-Remove-All-Duplicated-Lines" href="#uniq-_002du">7.19 重複行を全て取り除く（重複してない行のみプリントする）</a></li>
    <li><a name="toc-Squeezing-Blank-Lines" href="#cat-_002ds">7.20 連続する空白行を1行の空白行にする</a></li>
  </ul></li>
  <li><a name="toc-GNU-sed_0027s-Limitations-and-Non_002dlimitations" href="#Limitations">8 GNU <code>sed</code>の制限と、GNU <code>sed</code>で撤廃された制限</a></li>
  <li><a name="toc-Other-Resources-for-Learning-About-sed" href="#Other-Resources&lt;a0&gt;address range, example&lt;/a0&gt;">9 <code>sed</code>を習得するためのこの文書以外の資料</a></li>
  <li><a name="toc-Reporting-Bugs-1" href="#Reporting-Bugs">10バグ報告</a></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">概念索引</a></li>
  <li><a name="toc-Command-and-Option-Index-1" href="#Command-and-Option-Index">sedコマンドとそのオプションの索引</a></li>
</ul>
</div>


<a name="Top"></a>
<div class="header">
<p>
</p>
</div>
<a name="GNU-sed"></a>
<h1 class="top">GNU <code>sed</code></h1>

<p>This file documents version 4.7 of
GNU <code>sed</code>, a stream editor.

</p>
<p>Copyright © 1998-2018 Free Software Foundation, Inc.

</p>
<blockquote>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no
Back-Cover Texts.  A copy of the license is included in the
section entitled “GNU Free Documentation License”.

</p></blockquote>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">• <a href="#Introduction" accesskey="1">はじめに</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">はじめに
</td></tr>
<tr><td align="left" valign="top">• <a href="#Invoking-sed" accesskey="2">sedの起動</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">起動
</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-scripts" accesskey="3">sedスクリプト</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code> スクリプト
</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-addresses" accesskey="4">sedアドレス</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">アドレス：行を選択する
</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-regular-expressions" accesskey="5">sed正規表現</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">正規表現：テキストを選択する。
</td></tr>
<tr><td align="left" valign="top">• <a href="#advanced-sed" accesskey="6">sedの高度な話題</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>の高度な話題：サイクルとバッファ
</td></tr>
<tr><td align="left" valign="top">• <a href="#例" accesskey="7">例</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">サンプルスクリプト達
</td></tr>
<tr><td align="left" valign="top">• <a href="#Limitations" accesskey="8">制限</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">GNU <code>sed</code>の制限と、GNU <code>sed</code>で撤廃された制限
</td></tr>
<tr><td align="left" valign="top">• <a href="#Other-Resources&lt;a0&gt;address range, example&lt;/a0&gt;" accesskey="9">この文書以外の資料</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>を習得するためのこの文書以外の資料
</td></tr>
<tr><td align="left" valign="top">• <a href="#Reporting-Bugs">報告済のバグ</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">報告済のバグ
</td></tr>
<tr><td align="left" valign="top">• <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">このマニュアルのコピーと共有について
</td></tr>
<tr><td align="left" valign="top">• <a href="#Concept-Index">概念索引</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">このマニュアルの全てのトピックを含むメニュー。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Command-and-Option-Index">sedコマンドとコマンドラインオプションの索引</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">全ての<code>sed</code>コマンドとコマンドラインオプション。
</td></tr>
</table>


<hr>
<a name="Introduction"></a>
<div class="header">
<p>
</p>
</div>
<a name="Introduction-1"></a>
<h2 class="chapter">1 はじめに</h2>

<a name="index-Stream-editor"></a>
<p><code>sed</code>はストリームエディタです。ストリームエディタは入力ストリーム（ファイルやパイプラインからの入力）に対して基本的なテキスト変換を実行します。(<code>ed</code>のような)スクリプトの編集を許可するエディタに似ていますが、<code>sed</code>は入力を1passで処理するので、より効率的です。しかし<code>sed</code>がパイプラインでテキストをフィルタ処理できる点は、他のタイプのエディタとの明確な違いです。
</p>

<hr>
<a name="Invoking-sed"></a>
<div class="header">
<p>
</p>
</div>
<a name="Running-sed"></a>
<h2 class="chapter">2 sedの実行</h2>

<p>この章では<code>sed</code>の実行方法について説明します。<code>sed</code>スクリプトの詳細や、独特な<code>sed</code>コマンド達については次章で取り扱います。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">• <a href="#Overview" accesskey="1">概要</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Command_002dLine-Options" accesskey="2">コマンドラインオプション</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Exit-status" accesskey="3">sed終了ステータス</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<a name="Overview"></a>
<div class="header">
<p>
</p>
</div>
<a name="Overview-1"></a>
<h3 class="section">2.1 概要</h3>
<p>通常<code>sed</code>は次のように起動します。
</p>
<div class="example">
<pre class="example">sed SCRIPT INPUTFILE...
</pre></div>

<p>例えば<samp>input.txt</samp>ファイル内にある全ての‘<samp>hello</samp>’ を‘<samp>world</samp>’ に置き換えるには次のようにします。
</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt
</pre></div>

<a name="index-stdin"></a>
<a name="index-standard-input"></a>
<p><var>INPUTFILE</var>(入力ファイル)が指定されないか、または, '<samp>-</samp>'と指定されたときは<code>sed</code>は標準入力より入力します。次の3つは等価です。
</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt
sed 's/hello/world/' &lt; input.txt &gt; output.txt
cat input.txt | sed 's/hello/world/' - &gt; output.txt
</pre></div>

<a name="index-stdout"></a>
<a name="index-output"></a>
<a name="index-standard-output"></a>
<a name="index-_002di_002c-example"></a>
<p>通常<code>sed</code>は標準出力に出力します。<samp>-i</samp>コマンドラインオプションを指定すると、標準出力の代わりに、コマンドラインで指定した入力ファイル自身を編集します。そして、'<code>W</code>'コマンドや'<code>s///w</code>'コマンド(wフラグ付き)は指定の他のファイルに書き出します。次のコマンドは<samp>file.txt</samp>を書き換え、そして一切(標準出力に)出力しません。
</p>
<div class="example">
<pre class="example">sed -i 's/hello/world/' file.txt
</pre></div>

<a name="index-_002dn_002c-example"></a>
<a name="index-p_002c-example"></a>
<a name="index-suppressing-output"></a>
<a name="index-output_002c-suppressing"></a>
<p>デフォルトでは<code>sed</code>は( ' <code>d</code>'コマンド等によって変更・削除されない限り)、入力処理した全てをプリントします。<samp>-n</samp> コマンドラインオプションは出力を抑制し、'<code>p</code>'コマンドは指定の行をプリントします。次のコマンドは入力の45行目だけをプリントします。
</p>
<div class="example">
<pre class="example">sed -n '45p' file.txt
</pre></div>



<a name="index-multiple-files"></a>
<a name="index-_002ds_002c-example"></a>
<p><code>sed</code>は複数の入力ファイルを1つの長いストリームとして扱います。次の例は最初のファイル(<samp>one.txt</samp>)の最初の行をプリントし、そして最後のファイル(<samp>three.txt</samp>)の最後の行をプリントします。<samp>-s</samp>、--separate コマンドラインオプションを使うと逆にファイル単位で扱います。
</p>
<div class="example">
<pre class="example">sed -n  '1p ; $p' one.txt two.txt three.txt
</pre></div>


<a name="index-_002de_002c-example"></a>
<a name="index-_002d_002dexpression_002c-example"></a>
<a name="index-_002df_002c-example"></a>
<a name="index-_002d_002dfile_002c-example"></a>
<a name="index-script-parameter"></a>
<a name="index-parameters_002c-script"></a>
<p>'<samp>-e</samp>'や'<samp>-f</samp>'コマンドオプション無しだと<code>sed</code>は最初のコマンドラインオプションでない('-','--'で始まっていない)コマンドラインパラメータを<var>スクリプト</var>として使い、それ以降のコマンドラインオプションでないコマンドラインパラメーター達を入力ファイル達として使います。'<samp>-e</samp>'や'<samp>-f</samp>'コマンドラインオプションが<var>スクリプト</var>指定の為に使われると、全てのコマンドオプションでないコマンドラインパラメータが入力ファイル群として使われます。'<samp>-e</samp>'や'<samp>-f</samp>'コマンドラインオプションは混在かつ複数回記述することができ、実行されるスクリプトはそれぞれのスクリプトをそのコマンドラインオプションの順番どおりに連結したものになります。
</p>
<p>以下の3つは等価です。
</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt

sed -e 's/hello/world/' input.txt &gt; output.txt
sed --expression='s/hello/world/' input.txt &gt; output.txt

echo 's/hello/world/' &gt; myscript.sed
sed -f myscript.sed input.txt &gt; output.txt
sed --file=myscript.sed input.txt &gt; output.txt
</pre></div>


<hr>
<a name="Command_002dLine-Options"></a>
<div class="header">
<p>
</p>
</div>
<a name="Command_002dLine-Options-1"></a>
<h3 class="section">2.2 コマンドラインオプション</h3>

<p><code>sed</code>を起動する完全な書式は次の通りです。
</p>
<div class="example">
<pre class="example">sed OPTIONS... [SCRIPT] [INPUTFILE...]
</pre></div>

<p><code>sed</code>は以下のコマンドラインオプション達とともに起動することができます。
</p>
<dl compact="compact">
<dt><code>--version</code></dt>
<dd><a name="index-_002d_002dversion"></a>
<a name="index-Version_002c-printing"></a>
<p>起動した<code>sed</code>自身のバージョンと著作権表示をプリント次第終了します。
</p>
</dd>
<dt><code>--help</code></dt>
<dd><a name="index-_002d_002dhelp"></a>
<a name="index-Usage-summary_002c-printing"></a>
<p>これらコマンドラインオプション達の短く要約した使い方とバグ報告先をプリント次第終了します。
</p>
</dd>
<dt><code>-n</code></dt>
<dt><code>--quiet</code></dt>
<dt><code>--silent</code></dt>
<dd><a name="index-_002dn"></a>
<a name="index-_002d_002dquiet"></a>
<a name="index-_002d_002dsilent"></a>
<a name="index-Disabling-autoprint_002c-from-command-line"></a>
<p>デフォルトでは<code>sed</code>はスクリプトを実行し、各サイクルが終わるとパターンスペースの内容をプリントします(「<a href="#Execution-Cycle"><code>sed</code>はどのように動くか </a>」参照)。これらのコマンドラインオプションは各サイクル終了時の自動プリントを無効にし、その際<code>sed</code>は'<code>p</code>'コマンドで明示的に指示された場合のみプリントします。
</p>
</dd>
<dt><code>--debug</code></dt>
<dd><a name="index-_002d_002ddebug"></a>
<a name="index-GNU-extensions_002c-debug"></a>
<p>(v 4.6)入力されたプログラムを標準形式でプリントし、注釈付きで実行します。
</p><div class="example">
<pre class="example">$ echo 1 | sed '\%1%s21232'
3

$ echo 1 | sed --debug '\%1%s21232'
SED PROGRAM:
  /1/ s/1/3/
INPUT:   'STDIN' line 1
PATTERN: 1
COMMAND: /1/ s/1/3/
PATTERN: 3
END-OF-CYCLE:
3
</pre></div>


</dd>
<dt><code>-e <var>script</var></code></dt>
<dt><code>--expression=<var>script</var></code></dt>
<dd><a name="index-_002de"></a>
<a name="index-_002d_002dexpression"></a>
<a name="index-Script_002c-from-command-line"></a>
<p>指定の<var>スクリプト</var>を実行(予定の)コマンドに追加します。
</p>
</dd>
<dt><code>-f <var>script-file</var></code></dt>
<dt><code>--file=<var>script-file</var></code></dt>
<dd><a name="index-_002df"></a>
<a name="index-_002d_002dfile"></a>
<a name="index-Script_002c-from-a-file"></a>
<p><var>スクリプトファイル</var>で指定されるファイルの内容を実行(予定の)コマンドに追加します。
</p>
</dd>
<dt><code>-i[<var>SUFFIX</var>]</code></dt>
<dt><code>--in-place[=<var>SUFFIX</var>],</code></dt>
<dd><a name="index-_002di"></a>
<a name="index-_002d_002din_002dplace"></a>
<a name="index-In_002dplace-editing_002c-activating"></a>
<a name="index-GNU-extensions_002c-in_002dplace-editing"></a>
<p>このコマンドラインオプションはコマンドラインパラメータで指定した入力ファイルを直接書き換えます。そのために、GNU <code>sed</code> はテンポラリファイルを作り、標準出力ではなくこのテンポラリファイルに出力します。<a name="DOCF1" href="#FOOT1"><sup>1</sup></a>
</p>
<p>このオプションは'<samp>-s</samp>'、--separate コマンドラインオプションの動作もします。
</p>
<p>ファイルのEOFに到達すると、テンポラリファイルは入力ファイルに上書きされます。もしこのコマンドラインオプションのパラメータとして拡張子が与えられていれば、テンポラリファイルを入力ファイル名にリネームする前に、入力ファイル名を変更します。これによりバックアップコピー<a name="DOCF2" href="#FOOT2"><sup>2</sup></a>)が作成されます。
</p>
<a name="index-In_002dplace-editing_002c-Perl_002dstyle-backup-file-names"></a>
<p>拡張子が'<code>*</code>'(アスタリスク)を含んでない場合は、拡張子を現在のファイル名の末尾に接尾辞(サフィックス)として追加します。拡張子が1つ以上の'<code>*</code>'(アスタリスク)を含んでいる場合は、拡張子の中の各'<code>*</code>'を現在のファイル名に置換したものをバックアップファイル名とします。これにより、接尾辞(サフィックス)の代わりに（またはそれに加えて）バックアップファイルに接頭辞(プレフィックス)を追加したり、元のファイルのバックアップコピーを別のディレクトリに配置することができます（ディレクトリが既に存在する場合）。
</p>
<p>拡張子が与えられない時はバックアップを作ること無しに入力ファイルは上書きされます。
</p>
<p>注意：短いオプションである'<samp>-i</samp>'コマンドラインオプションは引数を取るので、これに他の短いコマンドラインオプション文字を続けて書いてはいけません。
</p><dl compact="compact">
<dt><code>sed -Ei '...' FILE</code></dt>
<dd><p>これは <samp>-E -i</samp> と同じです。拡張子の指定が無いのでバックアップファイルは作成されず、<samp>FILE</samp>が直接書き換えられます。
</p>
</dd>
<dt><code>sed -iE '...' FILE</code></dt>
<dd><p>これは <samp>--in-place=E</samp> と等価です。入力ファイル <samp>FILE</samp> のバックアップとして <samp>FILEE</samp> が作られます。
</p></dd>
</dl>

<p>警告：<samp>-n</samp> と <samp>-i</samp> を一緒に使用すると、前者は行の自動プリントを無効にし、そして、後者はバックアップ無しにファイルの内容を変更します。よって不用意に(明示的な'<code>p</code>’コマンドを無しで)使われると、ファイルの中身を空にしてしまいます。
</p><div class="example">
<pre class="example"># 間違った使用法： 'FILE'は切り捨てられます。
sed -ni 's/foo/bar/' FILE
</pre></div>

</dd>
<dt><code>-l <var>N</var></code></dt>
<dt><code>--line-length=<var>N</var></code></dt>
<dd><a name="index-_002dl"></a>
<a name="index-_002d_002dline_002dlength"></a>
<a name="index-Line-length_002c-setting"></a>
<p>'<code>l</code>' sedコマンドで行を折り返すデフォルトの長さを指定します。長さに 0 (ゼロ)を指定すると折り返ししなくなります。指定が無い場合は70です。
</p>
</dd>
<dt><code>--posix</code></dt>
<dd><a name="index-_002d_002dposix"></a>
<a name="index-GNU-extensions_002c-disabling"></a>
<p>GNU <code>sed</code>はPOSIX sedに数々の拡張を加えています。移植性のあるスクリプトの作成を簡単にする為に、このオプションはGNU sedで追加されたコマンド含めこの文書に述べられている全てのGNU sed拡張を無効にします。<a name="index-POSIXLY_005fCORRECT-behavior_002c-enabling"></a>ほとんどの拡張機能はPOSIXで強制される文法外の<code>sed</code> プログラムを受け付けますが、それらのいくつかは(<a href="#Reporting-Bugs">バグレポート</a>で説明している'<code>N</code>'コマンドのような振る舞いは)実際には規格を破っています。GNU 拡張を無効にしたい場合は環境変数 <code>POSIXLY_CORRECT</code> に空で無い値をセットして下さい。
</p>
</dd>
<dt><code>-b</code></dt>
<dt><code>--binary</code></dt>
<dd><a name="index-_002db"></a>
<a name="index-_002d_002dbinary"></a>
<p>このコマンドラインオプションは全てのプラットフォームで有効ですが、効果があるのはテキストファイルとバイナリファイルを区別するオペレーティングシステムだけです。そのように区別される—MS-DOS、Windows、Cygwinのような—オペレーティングシステムではテキストファイルはキャリッジリターン(CR;\x0d)<em>と</em>ラインフィード(LF;\x0a)で区切られた行で構成され、<code>sed</code>は終わりのCRを通常の1文字扱いするのではなく無視するという特殊動作をします。このオプションが指定されると<code>sed</code>は入力ファイルをバイナリモードで開きます。 つまり、sedはこの特殊動作をせず、単純に行はラインフィード(LF;\x0a)で終了するとして動作します。
</p>
</dd>
<dt><code>--follow-symlinks</code></dt>
<dd><a name="index-_002d_002dfollow_002dsymlinks"></a>
<p>このコマンドラインオプションが有効なのプラットフォームがシンボリックリンクをサポートしていて、かつ、'<samp>-i</samp>'コマンドラインオプションが指定された時だけです。この場合、コマンドラインで指定したファイルがシンボリックリンクだったら、<code>sed</code>はリンクを辿り、リンク最終先(大元)のファイルを編集します。デフォルトの動作はシンボリックリンクを解除することで、リンク先は変更されません。
</p>
</dd>
<dt><code>-E</code></dt>
<dt><code>-r</code></dt>
<dt><code>--regexp-extended</code></dt>
<dd><a name="index-_002dE"></a>
<a name="index-_002dr"></a>
<a name="index-_002d_002dregexp_002dextended"></a>
<a name="index-Extended-regular-expressions_002c-choosing"></a>
<a name="index-GNU-extensions_002c-extended-regular-expressions"></a>
<p>基本正規表現ではなく拡張正規表現を使います。拡張正規表現とは<code>egrep</code>が受け付けるものです。バックスラッシュの嵐を減らせるので正規表現がより分かりやすくなります。これは歴史的にはGNU拡張でしたが、 '<samp>-E</samp>'拡張はPOSIX標準に取り込まれた(http://austingroupbugs.net/view.php?id=528)ので、移植性の為に'<samp>-E</samp>'を使います。GNU sedは何年も前から文書化されていないオプションとして<samp> -E </samp>を受け入れていますし、*BSD sedsは何年もの間'<samp> -E </samp>'を受け入れていますが、'<samp> -E </samp>'を使うスクリプトは他の古いシステムに移植できないかもしれません。「<a href="#ERE-syntax">拡張正規表現</a>」参照。
</p>

</dd>
<dt><code>-s</code></dt>
<dt><code>--separate</code></dt>
<dd><a name="index-_002ds"></a>
<a name="index-_002d_002dseparate"></a>
<a name="index-Working-on-separate-files"></a>
<p>デフォルトでは<code>sed</code>はコマンドラインで指定されたファイル群を1つの長いストリームとして扱います。 このGNU <code>sed</code>拡張はファイルをそれぞれに分けて処理することを可能にします。(‘<samp>/abc/,/def/</samp>’のような)範囲アドレスが複数のファイルに渡らないようにしたり、行番号をファイルごとにリセットしたり、'<code>$</code>'が各ファイルの最終行にマッチするようにしたり、'<code>R</code>'コマンドで読み込むファイルからの読み込み位置をファイルごとに巻き戻したりします。
</p>
</dd>
<dt><code>--sandbox</code></dt>
<dd><a name="index-_002d_002dsandbox"></a>
<a name="index-Sandbox-mode"></a>
<p>サンドボックスモードでは '<code>e</code>'、'<code>w</code>'、'<code>r</code>'コマンドは弾かれます。それらを含むプログラムは実行されずにアボートします。サンドボックスモードでは、<code> sed </code>はコマンドラインで指定された入力ファイルに対してのみ機能し、外部プログラムを実行することはできません。
</p>

</dd>
<dt><code>-u</code></dt>
<dt><code>--unbuffered</code></dt>
<dd><a name="index-_002du"></a>
<a name="index-_002d_002dunbuffered"></a>
<a name="index-Unbuffered-I_002fO_002c-choosing"></a>
<p>入出力でのバッファリングをできるかぎり少なくします(これは入力が '<samp> tail -f </samp>'のようなものから来ていて、変換された出力をできるだけ早く見たい場合に特に便利です)。
</p>
</dd>
<dt><code>-z</code></dt>
<dt><code>--null-data</code></dt>
<dt><code>--zero-terminated</code></dt>
<dd><a name="index-_002dz"></a>
<a name="index-_002d_002dnull_002ddata"></a>
<a name="index-_002d_002dzero_002dterminated"></a>
<p>入力されるデータの区切りが改行コードではなくASCIIの ‘<samp>NUL</samp>’ 文字（\x00）文字で終わっているものとして扱います。このオプションは '<samp> sort -z </samp>'や '<samp> find -print0 </samp>'のようなコマンドと共に使用して任意のファイル名を処理することができます。
</p></dd>
</dl>

<p>コマンドラインに<samp> -e </samp>や<samp> -f </samp>や<samp> --expression </samp>や<samp> --file </samp>オプションが指定されていない場合は、コマンドラインの最初のオプションではない引数が、実行される<var>スクリプト</var>になります。
</p>
<a name="index-Files-to-be-processed-as-input"></a>
<p>上記の処理後にコマンドラインパラメータが残っている場合、これらのパラメータは処理対象の入力ファイルの名前として解釈されます。<a name="index-Standard-input_002c-processing-as-input"></a> ファイル名に ‘<samp>-</samp>’ を指定した場合は標準入力からの入力となります。ファイル名が与えられなかった場合も標準入力として処理されます。
</p>
<hr>
<a name="Exit-status"></a>
<div class="header">
<p>
</p>
</div>
<a name="Exit-status-1"></a>
<h3 class="section">2.3 終了ステータス</h3>
<a name="index-exit-status"></a>
<p>0の終了ステータスは成功を表し、0以外の値は失敗を表します。GNU <code>sed</code>は以下の終了ステータス値を返します。
</p>
<dl compact="compact">
<dt>0</dt>
<dd><p>完璧に成功。
</p>
</dd>
<dt>1</dt>
<dd><p>不正なコマンドまたは不正な文法または不正な正規表現または、<samp>--posix</samp>コマンドラインオプションが指定されているのにGNU <code>sed</code>拡張が使われている。
</p>
</dd>
<dt>2</dt>
<dd><p>コマンドラインで指定した1つまたはそれ以上ファイルがオープンできなかった(例えばファイルが存在しなかった、また読み取り許可権限が無かった)。但し、オープンできた他のファイルに付いては処理が続行されます。
</p>
</dd>
<dt>4</dt>
<dd><p>I/Oエラーや実行中の深刻なエラー。GNU <code>sed</code>は即座にアボートします。
</p></dd>
</dl>

<a name="index-Q_002c-example"></a>
<a name="index-exit-status_002c-example"></a>
<p>加えてsedコマンド'<code>q</code>'や'<code>Q</code>'は<code>sed</code>を指定の終了コード値で終了させることが出来ます(これはGNU <code>sed</code> 拡張です)。
</p>
<div class="example">
<pre class="example">$ echo | sed 'Q42' ; echo $?
42
</pre></div>


<hr>
<a name="sed-scripts"></a>
<div class="header">
<p>
</p>
</div>
<a name="sed-scripts-1"></a>
<h2 class="chapter">3 <code>sed</code>スクリプト</h2>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">• <a href="#sed-script-overview" accesskey="1">sedスクリプト概要</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>スクリプト概要
</td></tr>
<tr><td align="left" valign="top">• <a href="#sed-commands-list" accesskey="2">sedコマンド一覧</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>コマンド要約です。
</td></tr>
<tr><td align="left" valign="top">• <a href="#The-_0022s_0022-Command" accesskey="3">"s"コマンド</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>’s Swiss Army Knife

</td></tr>
<tr><td align="left" valign="top">• <a href="#Common-Commands" accesskey="4">一般コマンド達</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">よく使われるコマンド達
</td></tr>
<tr><td align="left" valign="top">• <a href="#Other-Commands" accesskey="5">他のコマンド達</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">あんまり使われないコマンド達
</td></tr>
<tr><td align="left" valign="top">• <a href="#Programming-Commands" accesskey="6">プログラミングコマンド達</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> <code>sed</code>導師のためのコマンド群
</td></tr>
<tr><td align="left" valign="top">• <a href="#Extended-Commands" accesskey="7">拡張コマンド</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">GNU <code>sed</code>固有のコマンド達
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiple-commands-syntax" accesskey="8">複数コマンド文法</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">スクリプトを書きやすくする拡張です。
</td></tr>
</table>

<hr>
<a name="sed-script-overview"></a>
<div class="header">
<p>
</p>
</div>
<a name="sed-script-overview-1"></a>
<h3 class="section">3.1 <code>sed</code>スクリプト概要</h3>

<a name="index-sed-script-structure"></a>
<a name="index-Script-structure"></a>

<p><code>sed</code>プログラムは1つ以上の<code>sed</code>コマンドで構成され、1つまたはそれ以上(混在もOK)の'<samp>-e</samp>'、'<samp>-f</samp>'、'<samp>--expression</samp>'、'<samp>--file</samp>'コマンドラインオプションで渡されるか、あるいはこれらのコマンドラインオプションが全く無いときはコマンドラインオプションで無い最初の引数が<code>sed</code>プログラムとして扱われます。この文書で言う<code>sed</code>スクリプトとは通常、スクリプトまたはスクリプトファイルとして渡されたものを順に連結したものを意味しています。「<a href="#Overview">概要</a>」参照。
</p>

<a name="index-sed-commands-syntax"></a>
<a name="index-syntax_002c-sed-commands"></a>
<a name="index-addresses_002c-syntax"></a>
<a name="index-syntax_002c-addresses"></a>
<p><code>sed</code>コマンド文法は次の通り。
</p>
<div class="example">
<pre class="example">[addr]<var>X</var>[options]
</pre></div>

<p><var>X</var>は(英語)1文字の<code>sed</code>コマンドです。<code>[addr]</code>は省略可能な行アドレスです。<code>[addr]</code>が指定されると、sedコマンド <var>X</var> はそのアドレスにマッチした行でのみ実行されます。<code>[addr]</code>は行番号一つ、または正規表現、または行範囲を指定する事ができます(「<a href="#sed-addresses">sedアドレス</a>」参照)。追加の<code>[options]</code>はいくつかの<code>sed</code>コマンドにあります。
</p>
<a name="index-d_002c-example"></a>
<a name="index-address-range_002c-example"></a>
<a name="index-example_002c-address-range"></a>
<p>次の例は入力の30行目から35行目を削除します。<code>30,35</code>はアドレス範囲です。<code>d</code>は削除コマンドです。
</p>
<div class="example">
<pre class="example">sed '30,35d' input.txt &gt; output.txt
</pre></div>

<a name="index-q_002c-example"></a>
<a name="index-regular-expression_002c-example"></a>
<a name="index-example_002c-regular-expression"></a>
<p>次の例は行頭に‘<samp>foo</samp>’がある行が見つかるまで全てプリントします。そして行頭に‘<samp>foo</samp>’がある行を見つかると、<code>sed</code>自身を終了させ、終了ステータス 42を返します。行頭に‘<samp>foo</samp>’がある行が見つからなかった時(そして他のエラーが発生しなかった時)は、<code>sed</code>終了時に終了ステータス 0 を返します。<code>/^foo/</code>は正規表現アドレスです。<code>q</code>はsed終了コマンドです。<code>42</code>はこのsedコマンドのオプションです。
</p>
<div class="example">
<pre class="example">sed '/^foo/q42' input.txt &gt; output.txt
</pre></div>


<a name="index-multiple-sed-commands"></a>
<a name="index-sed-commands_002c-multiple"></a>
<a name="index-newline_002c-command-separator"></a>
<a name="index-semicolons_002c-command-separator"></a>
<a name="index-_003b_002c-command-separator"></a>
<a name="index-_002de_002c-example-1"></a>
<a name="index-_002df_002c-example-1"></a>
<p><var>スクリプト内</var>や<var>スクリプトファイル</var>内のコマンド達はセミコロン(<code>;</code>)や改行(ASCII \x0a)で区切る事ができます。'<samp>-e</samp>'や'<samp>-f</samp>'コマンドラインオプションで複数のスクリプトを指定することができます。
</p>
<p>以下の例は全て等価です。以下の例はふたつの<code>sed</code>操作を実行します。正規表現 <code>/^foo/</code> にマッチする行を削除します。そして‘<samp>hello</samp>’が現れると全て‘<samp>world</samp>’に置換します。
</p>
<div class="example">
<pre class="example">sed '/^foo/d ; s/hello/world/' input.txt &gt; output.txt

sed -e '/^foo/d' -e 's/hello/world/' input.txt &gt; output.txt

echo '/^foo/d' &gt; script.sed
echo 's/hello/world/' &gt;&gt; script.sed
sed -f script.sed input.txt &gt; output.txt

echo 's/hello/world/' &gt; script2.sed
sed -e '/^foo/d' -f script2.sed input.txt &gt; output.txt
</pre></div>


<a name="index-a_002c-and-semicolons"></a>
<a name="index-c_002c-and-semicolons"></a>
<a name="index-i_002c-and-semicolons"></a>
<p>sedコマンド'<code>a</code>'、'<code>c</code>'、'<code>i</code>'は文法上、続くコマンドとの区切り文字としてセミコロンを使うことはできません。よって改行で終了せるか、または<var>スクリプト</var>や<var>スクリプトファイル</var>の最後に置く必要があります。コマンドの前には(何もしない)空白文字達を書く事もできます。「<a href="#Multiple-commands-syntax">複数コマンド文法</a>」参照。
</p>


<hr>
<a name="sed-commands-list"></a>
<div class="header">
<p>
</p>
</div>
<a name="sed-commands-summary"></a>
<h3 class="section">3.2 <code>sed</code>コマンド要約</h3>

<p>以下のコマンド群はGNU <code>sed</code>でサポートされています。POSIX標準コマンドもあれば、GNU拡張もあります。各コマンドの詳細と例は次の節をご覧ください。括弧内はコマンドの覚え方(mnemonic)です。(訳注：説明の都合上、コマンドとオプションの間に空白が開いていますが、空白無しで続けても構いません)。
</p>
<dl compact="compact">
<dt><code>a\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><p>(append)行のうしろに <var>text</var> を追加する。
</p>
</dd>
<dt><code>a <var>text</var></code></dt>
<dd><p>(append)行の後ろに <var>text</var> を追加する(代替文法)。
</p>
</dd>
<dt><code>b <var>label</var></code></dt>
<dd><p>(branch)指定の <var>label</var> へ無条件ジャンプ。<var>ラベル</var>を省略したときは次のサイクルを開始します。
</p>
</dd>
<dt><code>c\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><p>(change)行を<var>text</var> で置き換える。
</p>
</dd>
<dt><code>c <var>text</var></code></dt>
<dd><p>(change)行を <var>text</var> で置き換える(代替文法)。
</p>
</dd>
<dt><code>d</code></dt>
<dd><p>(delete)パターンスペースの内容を全削除し、以降のコマンドの実行をスキップして直ちに次のサイクルを開始する。
</p>
</dd>
<dt><code>D</code></dt>
<dd><p>(delete)パターンスペースが改行を含んでいれば、パターンスペースの最初の改行までを削除し、次の入力行を読み込まずに、削除後のままのパターンスペースに対して次のサイクルを開始します。
</p>
<p>パターンスペースが改行を含んでいない場合はdコマンドと同じ動作で、次の入力行を読み込み次のサイクルを開始します。
</p>
</dd>
<dt><code>e</code></dt>
<dd><p>(execute)パターンスペース内に見つけたシェルコマンドを実行し、パターンスペースの内容をそのシェルコマンドの出力で置き換えます(末尾の改行は抑制されます)。
</p>
</dd>
<dt><code>e <var>command</var></code></dt>
<dd><p>(execute)シェルコマンド<var>command</var>を実行し、その出力を出力ストリームへ送ります。コマンドは複数行に渡って書くことができ、コマンドの最後以外の各行の末尾にはバックスラッシュ'\'を書きます。
</p>
</dd>
<dt><code>F</code></dt>
<dd><p>(filename)現在の入力ファイル名を(末尾に改行を伴って)出力します(標準入力の場合は'-'を出力)）。
</p>
</dd>
<dt><code>g</code></dt>
<dd><p>パターンスペースの内容をホールドスペースの内容で置き換えます(cp hold-space pattern-space)。
</p>
</dd>
<dt><code>G</code></dt>
<dd><p>パターンスペースの内容末尾に改行を追加し、更にホールドスペースの内容を追加します。
</p>
</dd>
<dt><code>h</code></dt>
<dd><p>(hold)ホールドスペースの内容をパターンスペースの内容で置き換えます(cp pattern-space hold-space)。
</p>
</dd>
<dt><code>H</code></dt>
<dd><p>(hold)ホールドスペースの内容末尾に改行を追加し、更にパターンスペースの内容を追加します。
</p>
</dd>
<dt><code>i\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><p>(insert)行の前に <var>text</var> を挿入する。
</p>
</dd>
<dt><code>i <var>text</var></code></dt>
<dd><p>(insert)行の前に <var>text</var> を挿入する(代替文法)。
</p>
</dd>
<dt><code>l</code></dt>
<dd><p>パターンスペースの内容を非表示文字も目に見えるようにプリントする。
</p>
</dd>
<dt><code>n</code></dt>
<dd><p>(next)自動プリントが無効で無い場合はパターンスペースの内容をプリントしてから、パターンスペースの内容を次の入力行で置き換えます。それ以上入力が無い時、<code>sed</code>はそれ以上コマンドを処理することなく終了します。
</p>
</dd>
<dt><code>N</code></dt>
<dd><p>(next)パターンスペースの内容の末尾に改行を追加し、更に次に読み込んだ一行を追加します。それ以上入力が無い時、<code>sed</code>はそれ以上コマンドを処理することなく終了します。
</p>
</dd>
<dt><code>p</code></dt>
<dd><p>(print)パターンスペースの内容をプリントする。
</p>
</dd>
<dt><code>P</code></dt>
<dd><p>(print)パターンスペースの最初の改行(改行含む)までの1行をプリントする。
</p>
</dd>
<dt><code>q<var>[exit-code]</var></code></dt>
<dd><p>(quit)以降のコマンドや入力処理をせずに<code>sed</code>を終了させる。
</p>
</dd>
<dt><code>Q<var>[exit-code]</var></code></dt>
<dd><p>(quit)このコマンドは<code>q</code>コマンドと同じですが、パターンスペースの内容をプリントしません。<code>q</code>コマンドと同様にsed呼び出し元へexit codeを返す事ができます。
</p>
</dd>
<dt><code>r filename</code></dt>
<dd><p>(read)<var>filename</var>というファイル名のファイルを読み込む。
</p>
</dd>
<dt><code>R filename</code></dt>
<dd><p>(read)<var>filename</var>で指定したファイルからたかだか1行読み込み現在のサイクルの最後または次の入力行が読まれる時に出力ストリームに挿入する。
</p>
</dd>
<dt><code>s<var>/regexp/replacement/[flags]</var></code></dt>
<dd><p>(substitute) パターンスペース内で正規表現にマッチさせます。マッチしたらマッチした文字列を<var>replacement</var>で置き換えます。
</p>
</dd>
<dt><code>t <var>label</var></code></dt>
<dd><p>(test) <code>s</code>コマンドによる置換が成功した後で、かつ最後の入力行が読み込まれてないか他の条件分岐が実行されてない場合、指定の<var>ラベル</var>へジャンプします。<var>ラベル</var>を省略したときは次のサイクルを開始します。

</p>
</dd>
<dt><code>T <var>label</var></code></dt>
<dd><p>(test) <code>s</code>コマンドによる置換が失敗した後で、かつ最後の入力行が読み込まれてないか他の条件分岐が実行されてない場合、指定の<var>ラベル</var>へジャンプします。<var>ラベル</var>を省略したときは次のサイクルを開始します。

</p>
</dd>
<dt><code>v <var>[version]</var></code></dt>
<dd><p>(version)このコマンドはGNU sedでは何もしません（が、コマンドとして有効)。しかしGNU <code>sed</code> 拡張がサポートされていない時や、要求したしたversionが存在しない時は失敗します。
</p>
</dd>
<dt><code>w filename</code></dt>
<dd><p>(write)パターンスペースの内容を<var>filename</var>で指定したファイルに書き込む。
</p>
</dd>
<dt><code>W filename</code></dt>
<dd><p>(write)与えられたfilenameのファイル名のファイルに、パターンスペースの先頭から最初の改行まで部分を書き出す。
</p>
</dd>
<dt><code>x</code></dt>
<dd><p>(exchange)パターンスペースの内容とホールドスペースの内容を交換する(swap pattern-space hold-space)。
</p>

</dd>
<dt><code>y/src/dst/</code></dt>
<dd><p>パターンスペース内の<var>source-chars</var>にある文字を対応する<var>dest-chars</var>の文字で置き換える。
</p>

</dd>
<dt><code>z</code></dt>
<dd><p>(zap)パターンスペースの内容を全削除する。
</p>
</dd>
<dt><code>#</code></dt>
<dd><p>次の改行までをコメントとする。
</p>

</dd>
<dt><code>{ <var>cmd ; cmd ...</var> }</code></dt>
<dd><p>いくつかのコマンドをまとめて1つのグループにする。
</p>
</dd>
<dt><code>=</code></dt>
<dd><p>現在の入力行番号を(末尾に改行付けて)プリントします。
</p>
</dd>
<dt><code>: <var>label</var></code></dt>
<dd><p>分岐コマンド達('<code>b</code>'、'<code>t</code>'、'<code>T</code>')の為の飛び先ラベルを配置します。
</p>
</dd>
</dl>


<hr>
<a name="The-_0022s_0022-Command"></a>
<div class="header">
<p>
</p>
</div>
<a name="The-s-Command"></a>
<h3 class="section">3.3 <code>s</code> コマンド</h3>

<p><code>sed</code>でたぶん最も重要なコマンドが <code>s</code> コマンドですが、様々なオプションを持っています。<code>s</code> コマンドの文法は ‘<samp>s/<var>regexp</var>/<var>replacement</var>/<var>flags</var></samp>’です。
</p>
<p>基本的な概念はシンプルです。<code>s</code> コマンドは与えられた正規表現 <var>regexp</var> でパターンスペースの中から一致する部分を探します。もし一致する部分があればそれを <var>replacement</var> で置き換えます。
</p>
<p><var>正規表現</var>文法について詳しくは「<a href="#Regexp-Addresses">正規表現アドレス</a>」参照。
</p>
<a name="index-Backreferences_002c-in-regular-expressions"></a>
<a name="index-Parenthesized-substrings"></a>
<p><var>replacement</var> は <code>\<var>n</var></code> (<var>n</var> は1から9の数字)を含むことができ、それはマッチした<var>regexp</var> 内の n番目の<code>\(</code> と <code>\)</code> に囲まれた部分で置き換えられます。また <var>replacement</var> はエスケープされていない <code>&amp;</code> を含む事ができ、これは正規表現<var>regexp</var>全体とマッチしたものと置き換えられます。
</p>

<p><code>s</code> コマンドの区切りの'/'文字は任意の1文字に置き換える事ができます。(区切りの)'<code>/</code>'文字(または別の文字を使ったのならその文字)が<var>regexp</var>や<var>replacement</var>に現れるのなら、その前に1つの'<code>\</code>'文字を置きます。
</p>


<a name="index-GNU-extensions_002c-case-modifiers-in-s-commands"></a>
<p>最後に、GNU <code>sed</code>拡張として、'<code>\L</code>'、'<code>\l</code>'(訳注：小文字のエル)、'<code>\U</code>'、'<code>\u</code>'、'<code>\E</code> な特殊なつづりを含む事ができます。その意味は以下のとおり。
</p>
<dl compact="compact">
<dt><code>\L</code></dt>
<dd><p>置換したテキストで、'<code>\U</code>'または'<code>\E</code>'が見つかるまで小文字にする。
</p>
</dd>
<dt><code>\l</code></dt>
<dd><p>(小文字のエル)次の1文字を小文字にする。
</p>
</dd>
<dt><code>\U</code></dt>
<dd><p>置換したテキストで、'<code>\L</code>'または'<code>\E</code>'が出現するまで大文字にする。
</p>
</dd>
<dt><code>\u</code></dt>
<dd><p>次の1文字を大文字にする。
</p>
</dd>
<dt><code>\E</code></dt>
<dd><p>'<code>\L</code>'や'<code>\U</code>'によって始まった文字変換を終了する。
</p></dd>
</dl>

<p><code>g</code> フラグが指定されていた場合、大文字小文字変換は正規表現の各マッチの範囲内だけで行われ別のマッチまで伝播することはありません。例えば、パターンスペースの内容が‘<samp>a-b-</samp>’であるとき、次のコマンドを実行すると、
</p><div class="example">
<pre class="example">s/\(b\?\)-/x\u\1/g
</pre></div>

<p>その出力は‘<samp>axxB</samp>’となります。最初のマッチは2文字目‘<samp>-</samp>’で、このとき'\(b\?\)'の中身は空なので、‘<samp>\1</samp>’は空に置き換えられ、'<samp>\u</samp>'の次は空になるので何もしません。'<code>b-</code>'を'<code>xB</code>'に置き換える時は、パターンスペースで既に置き換えられた'<code>x</code>'には影響を与えません。
</p>
<p>一方、'<code>\l</code>'や'<code>\u</code>'はそれに続く置換が空の場合はその後に続く置換テキストに影響を与えます。パターンスペースに‘<samp>a-b-</samp>’があるとき、次のコマンド、
</p><div class="example">
<pre class="example">s/\(b\?\)-/\u\1x/g
</pre></div>

<p>これは‘<samp>-</samp>’を‘<samp>X</samp>’にし、‘<samp>b-</samp>’ を‘<samp>Bx</samp>’にします。。これが望みの動作で無い場合は、この場合、‘<samp>\1</samp>’の後ろに‘<samp>\E</samp>’を置く事で防ぐ事ができます。
</p>
<p>'<code>\</code>'文字や'<code>&amp;</code>'文字、改行を含めるには、<var>replacement</var>内においたそれぞれの前に'<code>\</code>'を置いて下さい。
</p>
<a name="index-s-command_002c-option-flags"></a>
<a name="index-Substitution-of-text_002c-options"></a>
<p><code>s</code>コマンドはフラグ無しか、1つ以上の<var>フラグ</var>を後に続ける事ができます。
</p>
<dl compact="compact">
<dt><code>g</code></dt>
<dd><a name="index-Global-substitution"></a>
<a name="index-Replacing-all-text-matching-regexp-in-a-line"></a>
<p>最初にマッチしたものだけでなくその後もにマッチしたの全てで置換を適用します。
</p>
</dd>
<dt><code><var>number</var></code></dt>
<dd><a name="index-Replacing-only-nth-match-of-regexp-in-a-line"></a>
<p><var>number</var>番目のマッチだけ置換します。
</p>
<a name="index-GNU-extensions_002c-g-and-number-modifier"></a>
<p><code>s</code>コマンドフラグの相互作用に注意： <small>POSIX</small>規格では<code>g</code>フラグと<var>number</var>フラグを混在させた時に何が起こるかは規定されていません。 <code>sed</code>の各実装の間でわりと普通の動作などというようなものもありません。実装依存です。なおGNU <code>sed</code>では、この相互作用を定義しています。指定の<var>number</var>以前のマッチを無視し、<var>number</var>番目とそれ以降全てのマッチに適用します。
</p>
</dd>
<dt><code>p</code></dt>
<dd><a name="index-Text_002c-printing-after-substitution"></a>
<p>置換した場合は、その結果を含むパターンスペースをプリントします。
</p>
<p>注意：<code>p</code>フラグと<code>e</code>フラグの両方を使った時は、その指定の順番により全然違う結果をもたらします。 普通は'<code>ep</code>'(evaluate してから print)が望みのものですが、逆順で動いてくれるとデバッグに便利です。このために、<code>s</code>コマンドのフラグは一般には1度しか評価されませんが、デバッグに便利なようにGNU <code>sed</code>の現在の版は'<code>e</code>'の前後に’<code>p</code>'を置くことができます。そうするとeval前のパターンスペースの内容とeval後のパターンスペースの内容をプリントします。この動作は公式文書に掲載されているけれども、将来のバージョンでは変更される可能性があります。(訳注:手元のGNU sed 4.7では動作確認できず)
</p>
</dd>
<dt><code>w <var>filename</var></code></dt>
<dd><a name="index-Text_002c-writing-to-a-file-after-substitution"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file-1"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstderr-file"></a>
<p>置換できたら、指定のファイル名のファイルに結果を書き出します。GNU <code>sed</code> 拡張では、ファイル名として標準エラー出力の'<samp>/dev/stderr</samp>'と、標準出力の'<samp>/dev/stdout</samp>'をサポートしています。<a name="DOCF3" href="#FOOT3"><sup>3</sup></a>
</p>
</dd>
<dt><code>e</code></dt>
<dd><a name="index-Evaluate-Bourne_002dshell-commands_002c-after-substitution"></a>
<a name="index-Subprocesses"></a>
<a name="index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands"></a>
<a name="index-GNU-extensions_002c-subprocesses"></a>
<p>このフラグはシェルコマンドからの入力をパターンスペースにパイプラインできます。置換が成功すると、パターンスペースの内容をシェルコマンドとみなして実行し、そのパターンスペースの内容をその出力で置き換えます。末尾の改行は抑制されシェルコマンドには含まれません。また、実行されるコマンドに<small>NUL</small>文字(ASCII \x00)が含まれていた場合の動作は未定義です。これはGNU <code>sed</code>拡張です。
</p>
</dd>
<dt><code>I</code></dt>
<dt><code>i</code></dt>
<dd><a name="index-GNU-extensions_002c-I-modifier"></a>
<a name="index-Case_002dinsensitive-matching"></a>
<p>GNU拡張の'<code>I</code>'フラグは<code>sed</code>に<var>regexp</var>の英大文字小文字を区別せずにマッチングするよう指示します。
</p>
</dd>
<dt><code>M</code></dt>
<dt><code>m</code></dt>
<dd><a name="index-GNU-extensions_002c-M-modifier"></a>
<p>GNU <code>sed</code>拡張の'<code>M</code>'フラグは正規表現が<cite>複数行</cite>マッチモードで動くように指示します。このフラグは'<code>^</code>'と'<code>$</code>'をそれぞれ(通常の振る舞いに加えて)改行の後の空の文字列と改行の前の空の文字列に一致させます。常にバッファの先頭または末尾に一致する特殊文字つづり('<code>\`</code>'と'<code>\'</code>')があります。さらに、複数行モードではピリオド('.')は改行文字とマッチしません。
</p>

</dd>
</dl>

<hr>
<a name="Common-Commands"></a>
<div class="header">
<p>
</p>
</div>
<a name="Often_002dUsed-Commands"></a>
<h3 class="section">3.4 よく使われるコマンド群</h3>

<p><code>sed</code>を使った事があれば、あなたはこれらのコマンド全部を知りたいはずです。
</p>
<dl compact="compact">
<dt><code>#</code></dt>
<dd><p>[アドレス指定不可]
</p>
<a name="index-_0023-_0028comments_0029"></a>
<a name="index-Comments_002c-in-scripts"></a>
<p>'<code>#</code>'はコメントのはじまりです。次の改行まで続きます。
</p>
<a name="index-Portability_002c-comments"></a>
<p>移植性を気にする場合、(POSIXに準拠していない)<code> sed </code>の実装によっては、スクリプト全体でたった1行のコメントしかサポートされないことがあります。 この場合、スクリプトの最初の文字は'<code>＃</code>'です。
</p>
<a name="index-_002dn_002c-forcing-from-within-a-script"></a>
<a name="index-Caveat-_002d_002d_002d-_0023n-on-first-line"></a>
<p>警告：<code>sed</code>スクリプトの最初が'<code>#n</code>'のとき、'<samp>-n</samp>'(no-autoprint)オプションを指定したのと同じ効果があります(訳注： seq 3 | sed -e '#n' -e '2p' は、seq 3 | sed -n '2p' と等価です)。スクリプトの最初にコメント'#'を書き、それに通常のコメントとしての文字'<samp>n</samp>'を続ける時は必ず大文字'<samp>N</samp>'にしてください。または'<samp>n</samp>'の前に1つ以上の空白を入れて下さい。
</p>
</dd>
<dt><code>q [<var>exit-code</var>]</code></dt>
<dd><a name="index-q-_0028quit_0029-command"></a>
<a name="index-GNU-extensions_002c-returning-an-exit-code"></a>
<a name="index-Quitting"></a>
<p>以降のコマンドや入力を処理せずに<code>sed</code>を終了させる。
</p>
<p>例：2行目でプリントを停止する。
</p><div class="example">
<pre class="example">$ seq 3 | sed 2q
1
2
</pre></div>

<p>このコマンドは単一のアドレスのみ受け入れます(アドレス範囲不可)。注意：'<samp>-n</samp>'オプションによってサイクル間の自動プリントが抑止されていない場合はパターンスペースの内容をプリントします。<code>sed</code>が返す終了コード値を指定できるのはGNU <code>sed</code> 拡張です。
</p>
<p>GNU <code>sed</code>拡張の'<code>Q</code>'コマンドはパターンスペースの内容をプリントせずにsedを終了します。
</p>
</dd>
<dt><code>d</code></dt>
<dd><a name="index-d-_0028delete_0029-command"></a>
<a name="index-Text_002c-deleting"></a>
<p>(delete)パターンスペースの内容を全削除し、以降のコマンドの実行をスキップして直ちに次のサイクルを開始する。
</p>
<p>例：入力行の2行目を削除。
</p><div class="example">
<pre class="example">$ seq 3 | sed 2d
1
3
</pre></div>

</dd>
<dt><code>p</code></dt>
<dd><a name="index-p-_0028print_0029-command"></a>
<a name="index-Text_002c-printing"></a>
<p>パターンスペースの内容を(標準出力に)プリントする。このコマンドは通常'<samp>-n</samp>'コマンドラインオプションとの組み合わせでのみ使用されます。
</p>
<p>例：入力行の2行目だけをプリントする。
</p><div class="example">
<pre class="example">$ seq 3 | sed -n 2p
2
</pre></div>

</dd>
<dt><code>n</code></dt>
<dd><a name="index-n-_0028next_002dline_0029-command"></a>
<a name="index-Next-input-line_002c-replace-pattern-space-with"></a>
<a name="index-Read-next-input-line"></a>
<p>自動プリントが無効になって無い時は、パターンスペースの内容をプリントし、プリントの有無にかかわらず入力から読み込んだ次の行でパターンスペースの内容を置き換えます。それ以上入力が無い時、<code>sed</code>はそれ以上コマンドを処理することなく終了します。
</p>
<p>このコマンドは行をスキップするのに便利です(例えばN行ごとに処理するなど)。
</p>
<p>例：3行おきに置換します(すなわち、2つの'<code>n</code>'コマンドが行を2つスキップする)。
</p><div class="example">
<pre class="example">$ seq 6 | sed 'n;n;s/./x/'
1
2
x
4
5
x
</pre></div>

<p>GNU <code>sed</code>はこれと同様の結果を得る'<var>first</var>~<var>step</var>'というアドレス文法の拡張を提供しています。 
</p>
<div class="example">
<pre class="example">$ seq 6 | sed '0~3s/./x/'
1
2
x
4
5
x
</pre></div>



</dd>
<dt><code>{ <var>commands</var> }</code></dt>
<dd><a name="index-_007b_007d-command-grouping"></a>
<a name="index-Grouping-commands"></a>
<a name="index-Command-groups"></a>
<p>'<code>{</code>'から'<code>}</code>'の間のコマンド達をグループ化します。これは、単一アドレス(またはアドレス範囲)へのマッチによってコマンド群をトリガーしたいときに重宝します。
</p>
<p>例：入力行の2行目を置換してプリントします。
</p><div class="example">
<pre class="example">$ seq 3 | sed -n '2{s/2/X/ ; p}'
X
</pre></div>

</dd>
</dl>


<hr>
<a name="Other-Commands"></a>
<div class="header">
<p>
</p>
</div>
<a name="Less-Frequently_002dUsed-Commands"></a>
<h3 class="section">3.5 あまり使われないコマンド群</h3>

<p>前の節で使用されているものよりも、おそらく使用頻度は低いですが、これらのコマンドを使えば非常に小さくて便利な<code> sed </code>スクリプトを作成することができます。
</p>
<dl compact="compact">
<dt><code>y/<var>source-chars</var>/<var>dest-chars</var>/</code></dt>
<dd><a name="index-y-_0028transliterate_0029-command"></a>
<a name="index-Transliteration"></a>
<p>パターンスペース内の<var>source-chars</var>にある文字を対応する<var>dest-chars</var>の文字で置き換える。
</p>
<p>例：<samp>a-j</samp>の文字をそれぞれ<samp>0-9</samp>の文字で置き換える。
</p><div class="example">
<pre class="example">$ echo hello world | sed 'y/abcdefghij/0123456789/'
74llo worl3
</pre></div>

<p>('<code>/</code>'は、任意の<code> y </code>コマンド内で、他の任意の1文字に一律に置き換えることができます)。
</p>
<p>'<code>/</code>'(またはその代わりに使用されるその他の文字)、'<code>\</code>'、改行は、'<code>\</code>'でエスケープすることで、<var>source-chars</var>リストや<var>dest-chars</var>リストに記入できます。<var>source-chars</var>と<var>dest-chars</var>は正確に同じ文字数でなければなりません。
</p>
<p>同じ機能を持つ、GNU coreutils の <code>tr</code> コマンド参照。
</p>
</dd>
<dt><code>a <var>text</var></code></dt>
<dd><p>行の後ろに <var>text</var> を追加する。これは標準の <code>a</code> コマンドに対するGNU拡張です。詳細は以下を参照。
</p>
<p>例：2行目の後ろに‘<samp>hello</samp>’を追加する。
</p><div class="example">
<pre class="example">$ seq 3 | sed '2a hello'
1
2
hello
3
</pre></div>

<p><code>a</code>コマンドは先行する空白('a'と'hello'の間にある空白)を無視します。'a'コマンドの、行末までのテキストを読み取り、行の後ろに追加します。
</p>

</dd>
<dt><code>a\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-a-_0028append-text-lines_0029-command"></a>
<a name="index-Appending-text-after-a-line"></a>
<a name="index-Text_002c-appending"></a>
<p>行の後ろに <var>text</var> を追加する。
</p>
<p>例：2行目の後ろに‘<samp>hello</samp>’を追加します(-| で始まる行はsedの出力です)。
</p><div class="example">
<pre class="example">$ seq 3 | sed '2a\
hello'
-|1
-|2
-|hello
-|3
</pre></div>

<p><code>a</code> コマンドは、このコマンドに続くテキスト(最後以外は'<code>\</code>'で終わり、出力から削除されます)を現在のサイクルの終わりまたは次の入力行が読み込まれたときに出力されるようにキューに入れます。
</p>
<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands"></a>
<p>GNU拡張では、このコマンドはアドレス範囲を受け付けます。
</p>
<p><var> text </var>のエスケープシーケンスは処理されるので、<var> text </var>に'\'を文字として入れるには'<code>\\</code>'と記述する必要があります。
</p>
<p>最後の行(‘<samp>world</samp>’)の末尾に'<code>\</code>‘が付いてないことで、そこで a コマンドの終了とみなされ、次の行は次のコマンドの処理を続行します。
</p><div class="example">
<pre class="example">$ seq 3 | sed '2a\
hello\
world
3s/./X/'
-|1
-|2
-|hello
-|world
-|X
</pre></div>

<p>GNU拡張として、<code> a </code>コマンドと<var> text </var>を2つの<code> -e </code>パラメータに分割して、スクリプトを簡単にすることができます。
</p><div class="example">
<pre class="example">$ seq 3 | sed -e '2a\' -e hello
1
2
hello
3

$ sed -e '2a\' -e "$VAR"
</pre></div>

</dd>
<dt><code>i <var>text</var></code></dt>
<dd><p>(insert)行の前に <var>text</var> を挿入する。これは、標準の<code> i </code>コマンドに対するGNU拡張です。詳細は以下を参照。
</p>
<p>例：2行目の前に‘<samp>hello</samp>’を挿入する。
</p><div class="example">
<pre class="example">$ seq 3 | sed '2i hello'
1
hello
2
3
</pre></div>

<p><code> i </code>コマンドの後の先頭の空白は無視されます。'a'コマンドの、行末までのテキストを読み取り、行の後ろに追加します。
</p>
<a name="insert-command"></a></dd>
<dt><code>i\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-i-_0028insert-text-lines_0029-command"></a>
<a name="index-Inserting-text-before-a-line"></a>
<a name="index-Text_002c-insertion"></a>
<p>このコマンドに続くテキスト行を直ちに出力します。
</p>
<p>例: ‘<samp>hello</samp>’を2行目の前に挿入する(-| はsedの出力)。
</p><div class="example">
<pre class="example">$ seq 3 | sed '2i\
hello'
-|1
-|hello
-|2
-|3
</pre></div>

<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-1"></a>
<p>GNU拡張では、このコマンドはアドレス範囲を受け付けます。
</p>
<p><var> text </var>のエスケープシーケンスは処理されるので、<var> text </var>に'\'を文字として入れるには'<code>\\</code>'と記述する必要があります。
</p>
<p>最後の行(‘<samp>world</samp>’)の末尾に'<code>\</code>‘が付いてないことで、そこで a コマンドの終了とみなされ、次の行は次のコマンドの処理を続行します。
</p><div class="example">
<pre class="example">$ seq 3 | sed '2i\
hello\
world
s/./X/'
-|X
-|hello
-|world
-|X
-|X
</pre></div>

<p>GNU拡張として、<code> a </code>コマンドと<var> text </var>を2つの<code> -e </code>パラメータに分割して、スクリプトを簡単にすることができます。
</p><div class="example">
<pre class="example">$ seq 3 | sed -e '2i\' -e hello
1
hello
2
3

$ sed -e '2i\' -e "$VAR"
</pre></div>

</dd>
<dt><code>c <var>text</var></code></dt>
<dd><p>対象行を <var>text</var> で置き換えるこれは、標準の<code> c </code>コマンドに対するGNU拡張です。詳細は以下を参照。
</p>
<p>例：2行目から9行目までの行の内容を‘<samp>hello</samp>’で置き換える。
</p><div class="example">
<pre class="example">$ seq 10 | sed '2,9c hello'
1
hello
10
</pre></div>

<p><code>c</code>コマンド直後の空白('c'と'hello'の間の空白)は無視されます。'a'コマンドの、行末までのテキストを読み取り、行の後ろに追加します。
</p>
</dd>
<dt><code>c\</code></dt>
<dt><code><var>text</var></code></dt>
<dd><a name="index-c-_0028change-to-text-lines_0029-command"></a>
<a name="index-Replacing-selected-lines-with-other-text"></a>
<p>addressまたはaddress-rangeに一致する行を削除して、このコマンドに続くテキスト行を出力します。
</p>
<p>例：2行目から4行目までを‘<samp>hello</samp>’と‘<samp>world</samp>’に置換します(-| はsedの出力)。
</p><div class="example">
<pre class="example">$ seq 5 | sed '2,4c\
hello\
world'
-|1
-|hello
-|world
-|5
</pre></div>

<p>アドレスを指定しない場合、全ての行の内容を置換します。
</p>
<p>パターンスペースは削除されているので、このコマンドの実行後に新しいサイクルが開始されます。次の例では、<code> c </code>は次のサイクルを開始してしまうので、cコマンドで置換されたテキストに対して's/./X/'置換コマンドは実行されません。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed '2c\
hello
s/./X/'
-|X
-|hello
-|X
</pre></div>

<p>GNU拡張として、<code> c </code>コマンドと<var> text </var>を2つの<code> -e </code>パラメータに分割して、スクリプトを簡単にすることができます。
</p><div class="example">
<pre class="example">$ seq 3 | sed -e '2c\' -e hello
1
hello
3

$ sed -e '2c\' -e "$VAR"
</pre></div>


</dd>
<dt><code>=</code></dt>
<dd><a name="index-_003d-_0028print-line-number_0029-command"></a>
<a name="index-Printing-line-number"></a>
<a name="index-Line-number_002c-printing"></a>
<p>入力行の行番号を(末尾に改行を付けて)プリントします。
</p>
<div class="example">
<pre class="example">$ printf '%s\n' aaa bbb ccc | sed =
1
aaa
2
bbb
3
ccc
</pre></div>

<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-2"></a>
<p>GNU拡張では、このコマンドはアドレス範囲を受け付けます。
</p>



</dd>
<dt><code>l <var>line-length</var></code></dt>
<dd><a name="index-l-_0028list-unambiguously_0029-command"></a>
<a name="index-List-pattern-space"></a>
<a name="index-Printing-text-unambiguously"></a>
<a name="index-Line-length_002c-setting-1"></a>
<a name="index-GNU-extensions_002c-setting-line-length"></a>
<p>(小文字のエル)パターンスペースを明確な(unambiguous)形式でプリントします。表示不能文字(および'<code>\</code>')はC言語スタイルのエスケープ形式でプリントします。。 長い行は分割され、分割を示す末尾の'<code>\</code>'文字が付きます。 各行の終わりは’<code>$</code>'でマークされています。
</p>
<p><var>line-length</var> は行折り返しの長さを指定します。0が指定された時は行の折り返しをしません。line-lengthを省略すると、コマンドラインで指定したデフォルト値が使われます。<var>line-length</var> パラメータはGNU <code>sed</code> 拡張です。
</p>
</dd>
<dt><code>r <var>filename</var></code></dt>
<dd>
<a name="index-r-_0028read-file_0029-command"></a>
<a name="index-Read-text-from-a-file"></a>
<p>(read)<var>filename</var>というファイル名のファイルを読み込む。例：
</p>
<div class="example">
<pre class="example">$ seq 3 | sed '2r/etc/hostname'
1
2
fencepost.gnu.org
3
</pre></div>

<a name="index-GNU-extensions_002c-_002fdev_002fstdin-file"></a>
<p><var>filename</var>の内容をキューに入れ、現在のサイクルの最後または次の入力行が読まれる時に出力ストリームに挿入する。注意：<var>filename</var>で指定したファイルから読み込みできなかったら、そのファイルは空のファイルであったかのように扱われます。その際何のエラーも出しません。
</p>
<p>GNU <code>sed</code>拡張として、 <samp>/dev/stdin</samp>をファイル名として与えた時は標準入力から読み込みます。
</p>
<a name="index-GNU-extensions_002c-two-addresses-supported-by-most-commands-3"></a>
<p>GNU拡張では、このコマンドはアドレス範囲を受け付けます。アドレス指定された各行で、ファイルは再度読み込まれ挿入されます。
</p>
</dd>
<dt><code>w <var>filename</var></code></dt>
<dd><a name="index-w-_0028write-file_0029-command"></a>
<a name="index-Write-to-a-file"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file-2"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstderr-file-1"></a>
<p>(write)パターンスペースの内容を<var>filename</var>で指定したファイルに書き込む。GNU <code>sed</code> 拡張では、ファイル名として標準エラー出力の'<samp>/dev/stderr</samp>'と、標準出力の'<samp>/dev/stdout</samp>'をサポートしています。<a name="DOCF4" href="#FOOT4"><sup>4</sup></a>
</p>
<p>最初の入力行が読み取られる前に出力ファイルが作成(または既存ファイルの内容切り捨て(trancate))されます。 同じ<var> filename </var>を参照するすべての<code> w </code>コマンド(成功した<code> s </code>コマンドの<code> w </code>フラグ指定分含む)のファイルへ、ファイルを閉じて再度開くことなく出力します。
</p>
</dd>
<dt><code>D</code></dt>
<dd><a name="index-D-_0028delete-first-line_0029-command"></a>
<a name="index-Delete-first-line-from-pattern-space"></a>
<p>パターンスペースが改行を含んでいない場合はdコマンドと同じ動作で、次の入力行を読み込み次のサイクルを開始します。逆にパターンスペースが改行を含んでいれば、パターンスペースの最初の改行までを削除し、次の入力行を読み込まずに、削除後のままのパターンスペースに対して次のサイクルを開始します。
</p>
</dd>
<dt><code>N</code></dt>
<dd><a name="index-N-_0028append-Next-line_0029-command"></a>
<a name="index-Next-input-line_002c-append-to-pattern-space"></a>
<a name="index-Append-next-input-line-to-pattern-space"></a>
<p>(next)パターンスペースの内容の末尾に改行を追加し、更に次に読み込んだ一行を追加します。それ以上入力が無い時、<code>sed</code>はそれ以上コマンドを処理することなく終了します。
</p>
<p><samp>-z</samp> コマンドラインオプションを指定した時は、行と行の間の区切りには、改行(\x0a)の代わりにASCII ‘<samp>NUL</samp>’(\x00)を追加します。
</p>
<p>デフォルトでは<code> sed </code>は次の入力行がなければ終了しません。これはGNUの拡張機能で、<samp> --posix </samp>で無効にすることができます。「<a href="#N_005fcommand_005flast_005fline">最終行でのNコマンド</a>」参照。
</p>

</dd>
<dt><code>P</code></dt>
<dd><a name="index-P-_0028print-first-line_0029-command"></a>
<a name="index-Print-first-line-from-pattern-space"></a>
<p>パターンスペースの最初の改行(改行含む)までの1行をプリントする。
</p>
</dd>
<dt><code>h</code></dt>
<dd><a name="index-h-_0028hold_0029-command"></a>
<a name="index-Copy-pattern-space-into-hold-space"></a>
<a name="index-Replace-hold-space-with-copy-of-pattern-space"></a>
<a name="index-Hold-space_002c-copying-pattern-space-into"></a>
<p>ホールドスペースの内容をパターンスペースの内容で置き換えます(cp pattern-space hold-space)。
</p>
</dd>
<dt><code>H</code></dt>
<dd><a name="index-H-_0028append-Hold_0029-command"></a>
<a name="index-Append-pattern-space-to-hold-space"></a>
<a name="index-Hold-space_002c-appending-from-pattern-space"></a>
<p>(hold)ホールドスペースの内容末尾に改行を追加し、更にパターンスペースの内容を追加します。
</p>
</dd>
<dt><code>g</code></dt>
<dd><a name="index-g-_0028get_0029-command"></a>
<a name="index-Copy-hold-space-into-pattern-space"></a>
<a name="index-Replace-pattern-space-with-copy-of-hold-space"></a>
<a name="index-Hold-space_002c-copy-into-pattern-space"></a>
<p>パターンスペースの内容をホールドスペースの内容で置き換えます(cp hold-space pattern-space)。
</p>
</dd>
<dt><code>G</code></dt>
<dd><a name="index-G-_0028appending-Get_0029-command"></a>
<a name="index-Append-hold-space-to-pattern-space"></a>
<a name="index-Hold-space_002c-appending-to-pattern-space"></a>
<p>パターンスペースの内容末尾に改行を追加し、更にホールドスペースの内容を追加します。
</p>
</dd>
<dt><code>x</code></dt>
<dd><a name="index-x-_0028eXchange_0029-command"></a>
<a name="index-Exchange-hold-space-with-pattern-space"></a>
<a name="index-Hold-space_002c-exchange-with-pattern-space"></a>
<p>(exchange)パターンスペースの内容とホールドスペースの内容を交換する(swap pattern-space hold-space)。
</p>
</dd>
</dl>


<hr>
<a name="Programming-Commands"></a>
<div class="header">
<p>
</p>
</div>
<a name="Commands-for-sed-gurus"></a>
<h3 class="section">3.6 <code>sed</code>導師のためのコマンド群</h3>

<p>ほとんどの場合、これらのコマンドを使用するより、おそらく<code> awk </code>またはPerlのようなものでプログラミングする方が得策であることを示しています。しかし時折、<code> sed </code>にこだわることに専念している人もいますし、これらのコマンドでかなり複雑なスクリプトを書くことができる可能性があります。
</p>
<a name="index-Flow-of-control-in-scripts"></a>
<dl compact="compact">
<dt><code>: <var>label</var></code></dt>
<dd><p>[アドレス指定不可]
</p>
<a name="index-_003a-_0028label_0029-command"></a>
<a name="index-Labels_002c-in-scripts"></a>
<p>分岐コマンドの飛び先ラベル <var>label</var> を配置します。他の事は何もしません。
</p>
</dd>
<dt><code>b <var>label</var></code></dt>
<dd><a name="index-b-_0028branch_0029-command"></a>
<a name="index-Branch-to-a-label_002c-unconditionally"></a>
<a name="index-Goto_002c-in-scripts"></a>
<p>指定の <var>label</var> へ無条件ジャンプします。<var>ラベル</var>を省略したときは次のサイクルを開始します。
</p>
</dd>
<dt><code>t <var>label</var></code></dt>
<dd><a name="index-t-_0028test-and-branch-if-successful_0029-command"></a>
<a name="index-Branch-to-a-label_002c-if-s_002f_002f_002f-succeeded"></a>
<a name="index-Conditional-branch"></a>
<p><code>s</code>コマンドによる置換が成功した後で、かつ最後の入力行が読み込まれてないか他の条件分岐が実行されてない場合、指定の<var>ラベル</var>へジャンプします。<var>ラベル</var>を省略したときは次のサイクルを開始します。

</p>
</dd>
</dl>

<hr>
<a name="Extended-Commands"></a>
<div class="header">
<p>
</p>
</div>
<a name="Commands-Specific-to-GNU-sed"></a>
<h3 class="section">3.7 GNU <code>sed</code> 固有のコマンド</h3>

<p>これらのコマンドはGNU <code>sed</code>固有なので、作成するsedプログラムが移植性に留意する必要がない場合のみ使うようにして下さい。以下はGNU <code>sed</code>拡張を確認や日常の作業をするのに役立ちます。でも、まだ標準の<code>sed</code>ではサポートされていません。
</p>
<dl compact="compact">
<dt><code>e [<var>command</var>]</code></dt>
<dd><a name="index-e-_0028evaluate_0029-command"></a>
<a name="index-Evaluate-Bourne_002dshell-commands"></a>
<a name="index-Subprocesses-1"></a>
<a name="index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands-1"></a>
<a name="index-GNU-extensions_002c-subprocesses-1"></a>
<p>このフラグはシェルコマンドからの入力をパターンスペースにパイプラインできます。<code>e</code>コマンドをパラメータ無しに実行すると、パターンスペース内に見つけたコマンドを実行し、パターンスペースをそのコマンドの実行結果で置き換えます（末尾の改行は抑制されます）。
</p>
<p>代わりに、パラメータを指定して<code>e</code>コマンドを実行すると、コマンドはパラメータをシェルコマンドとして解釈して実行し、そのシェルコマンドの実行結果出力ストリームに送ります。コマンドは複数行に渡って書くことができ、コマンドの最後以外の各行の末尾にはバックスラッシュ'\'を書きます。
</p>
<p>どちらの場合も、実行されるコマンドに\x00(ASCII <small>NUL</small>)バイトが含まれているとその結果は不明(未定義)です。
</p>
<p><code>r</code>と異なり、シェルコマンドの実行結果を即座にプリントします。 一方、<code>r</code>コマンドはサイクルの終わりまで出力を遅延します。
</p>
</dd>
<dt><code>F</code></dt>
<dd><a name="index-F-_0028File-name_0029-command"></a>
<a name="index-Printing-file-name"></a>
<a name="index-File-name_002c-printing"></a>
<p>現在の入力ファイル名を(末尾に改行を伴って)出力します(標準入力の場合は'-'）。
</p>
</dd>
<dt><code>Q [<var>exit-code</var>]</code></dt>
<dd><p>このコマンドは単一のアドレスのみ受け入れます(アドレス範囲不可)。
</p>
<a name="index-Q-_0028silent-Quit_0029-command"></a>
<a name="index-GNU-extensions_002c-quitting-silently"></a>
<a name="index-GNU-extensions_002c-returning-an-exit-code-1"></a>
<a name="index-Quitting-1"></a>
<p>このコマンドは<code>q</code>コマンドと同じですが、パターンスペースの内容をプリントしません。<code>q</code>コマンドと同様にsed呼び出し元へexit codeを返す事ができます。
</p>
<p>このコマンドの代替方法は<samp>-n</samp>コマンドラインオプションの使用（スクリプトを必要以上に複雑にする）または次のコード片(スニペット)に頼る(何も表示されないけどファイル末尾まで行を読み込むので時間を無駄にする)ことです。
</p>
<div class="example">
<pre class="example">:eat
$d       <i><span class="roman">最終行で何も出力せず終了</span></i>
N        <i><span class="roman">何も出力せずもう1行読み込む</span></i>
g        <i><span class="roman">毎回ホールドスペースの内容(空っぽ)をパターンスペースに上書き</span></i>
b eat
</pre></div>

</dd>
<dt><code>R <var>filename</var></code></dt>
<dd><a name="index-R-_0028read-line_0029-command"></a>
<a name="index-Read-text-from-a-file-1"></a>
<a name="index-GNU-extensions_002c-reading-a-file-a-line-at-a-time"></a>
<a name="index-GNU-extensions_002c-R-command"></a>
<a name="index-GNU-extensions_002c-_002fdev_002fstdin-file-1"></a>
<p>(read)<var>filename</var>で指定したファイルからたかだか1行読み込み現在のサイクルの最後または次の入力行が読まれる時に出力ストリームに挿入する。注意：<var>filename</var>で指定したファイルから読み込みできなかったり、既にEOFに到達していたら何もしない。なおその時何のエラーも出しません。
</p>
<p><code>r</code>コマンドに<samp>/dev/stdin</samp>をファイル名として与えた時は標準入力から読み込みます。
</p>
</dd>
<dt><code>T <var>label</var></code></dt>
<dd><a name="index-T-_0028test-and-branch-if-failed_0029-command"></a>
<a name="index-GNU-extensions_002c-branch-if-s_002f_002f_002f-failed"></a>
<a name="index-Branch-to-a-label_002c-if-s_002f_002f_002f-failed"></a>
<a name="index-Conditional-branch-1"></a>
<p><code>s</code>コマンドによる置換が失敗した後で、かつ最後の入力行が読み込まれてないか他の条件分岐が実行されてない場合(暗黙の<code>s</code>コマンド実行結果フラグがまだクリアされてない間)、指定のラベルへジャンプします。<var>ラベル</var>を省略したときは次のサイクルを開始します。

</p>
</dd>
<dt><code>v <var>version</var></code></dt>
<dd><a name="index-v-_0028version_0029-command"></a>
<a name="index-GNU-extensions_002c-checking-for-their-presence"></a>
<a name="index-Requiring-GNU-sed"></a>
<p>このコマンドはGNU sedでは何もしません（が、コマンドとして有効)。しかしGNU <code>sed</code> 拡張がサポートされていないと失敗します。なぜなら他の<code>sed</code>ではこのコマンドは実装されてないからです。加えて、実行に必要な<code>sed</code> のバージョンを <code>4.0.5</code> のように指定することができます（訳注：実行するsedが指定バージョンより低い場合はエラー'sed の新版が前提です'になります）。デフォルトのバージョンは <code>4.0</code> です。なぜならこのコマンドが最初に実装されたバージョンが<code>4.0</code>だからです。
</p>
<p><code>POSIXLY_CORRECT</code> 環境変数が設定されていても、このコマンドはGNU拡張の利用を許可します。
</p>
</dd>
<dt><code>W <var>filename</var></code></dt>
<dd><a name="index-W-_0028write-first-line_0029-command"></a>
<a name="index-Write-first-line-to-a-file"></a>
<a name="index-GNU-extensions_002c-writing-first-line-to-a-file"></a>
<p>パターンスペースの先頭から最初の改行(改行含む)までの内容を、与えられたファイル名のファイルに書き込みます。<code>w</code> コマンドでファイル処理について述べられていることはこのコマンドにも全て当てはまります。
</p>
</dd>
<dt><code>z</code></dt>
<dd><a name="index-z-_0028Zap_0029-command"></a>
<a name="index-GNU-extensions_002c-emptying-pattern-space"></a>
<a name="index-Emptying-pattern-space"></a>
<p>このコマンドはパターンスペースの内容を全削除します。これは‘<samp>s/.*//</samp>’と同様ですが、より有能で、入力ストリームに不正なマルチバイトつづりが現れる時も動作します。<small>POSIX</small>では‘<samp>.</samp>’によって不正マルチバイトつづりにマッチしない事を強制します。そのためほとんどのマルチバイトロケール（UTF-8ロケールを含む）ではsedのバッファをスクリプトの途中で全削除する移植性のある方法はありません。
</p></dd>
</dl>


<hr>
<a name="Multiple-commands-syntax"></a>
<div class="header">
<p>
</p>
</div>
<a name="Multiple-commands-syntax-1"></a>
<h3 class="section">3.8 複数コマンド文法</h3>


<p><code>sed</code>プログラムでは複数のコマンドを与える時にいくつかの書き方があります。
</p>
<p>sedスクリプトを（ <samp>-f</samp>オプションを指定して）ファイルとして与える時は改行で区切るのが最も自然な方法です。
</p>
<p>コマンドラインでも、全ての<code>sed</code>コマンドは改行で区切る事ができます。代わりに各コマンドをそれぞれ<samp>-e</samp>オプションの引数として渡す事もできます。
</p>
<div class="example">
<pre class="example">$ seq 6 | sed '1d
3d
5d'
2
4
6

$ seq 6 | sed -e 1d -e 3d -e 5d
2
4
6
</pre></div>

<p>一番簡単に複数のコマンドを区切る方法はセミコロン(‘<samp>;</samp>’)です。
</p>
<div class="example">
<pre class="example">$ seq 6 | sed '1d;3d;5d'
2
4
6
</pre></div>

<p><code>{</code>、<code>}</code>、<code>b</code>、<code>t</code>、<code>T</code>、<code>:</code>コマンドがセミコロンで区切れるのはGNU sed拡張です。
</p>
<div class="example">
<pre class="example">$ seq 4 | sed '{1d;3d}'
2
4

$ seq 6 | sed '{1d;3d};5d'
2
4
6
</pre></div>

<p>ラベルを使うコマンドである'<code>b</code>'、'<code>t</code>'、'<code>T</code>'、'<code>:</code>' は当該のコマンド直後からセミコロンや改行までを読み取ります。先頭の空白文字と末尾の空白文字があっても無視されます。ラベルの例として以下の‘<samp>x</samp>’をご覧ください。最初の例はGNU <code>sed</code>用です。次の例は移植性のある(GNU sedでなくても動く)同等例です。分岐とラベルについて更に詳しくは「<a href="#Branching-and-flow-control">分岐と制御構文</a>」参照。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed '/1/b x ; s/^/=/ ; :x ; 3d'
1
=2

$ seq 3 | sed -e '/1/bx' -e 's/^/=/' -e ':x' -e '3d'
1
=2
</pre></div>



<a name="Commands-Requiring-a-newline"></a>
<h4 class="subsection">3.8.1 sedコマンドに改行が必要な時</h4>

<p>次のコマンドはセミコロンで区切ることができなくて改行で区切る事が必要です。
</p>
<dl compact="compact">
<dt><code>a</code>,<code>c</code>,<code>i</code> (append/change/insert)</dt>
<dd>
<p><code>a</code>、<code>c</code>、<code>i</code>コマンドの後にはappend/change/insertのためのテキストとして全ての文字を続ける事ができます。そこにセミコロンを使用すると残念な結果になります。
</p>
<div class="example">
<pre class="example">$ seq 2 | sed '1aHello ; 2d'
1
Hello ; 2d
2
</pre></div>

<p>これらのコマンドは<samp>-e</samp>オプションや改行で区切る必要があります。
</p>
<div class="example">
<pre class="example">$ seq 2 | sed -e 1aHello -e 2d
1
Hello

$ seq 2 | sed '1aHello
2d'
1
Hello
</pre></div>

<p><code>a</code>、<code>c</code>、<code>i</code> コマンド直後に直接テキスト(‘<samp>Hello</samp>’)を追加できる自体がGNU <code>sed</code>拡張であることに注意して下さい。移植性のある、POSIX準拠の代替手段は次のとおりです。
</p>
<div class="example">
<pre class="example">$ seq 2 | sed '1a\
Hello
2d'
1
Hello
</pre></div>

</dd>
<dt><code>#</code> (コメント)</dt>
<dd>
<p>‘<samp>#</samp>’から次の改行までの全ての文字はsedから無視されます。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed '# this is a comment ; 2d'
1
2
3


$ seq 3 | sed '# this is a comment
2d'
1
3
</pre></div>

</dd>
<dt><code>r</code>,<code>R</code>,<code>w</code>,<code>W</code> (reading and writing files)</dt>
<dd>
<p><code>r</code>、<code>R</code>、<code>w</code>、<code>W</code>コマンドはその行末までをファイル名として解釈します。空白やコメントやセミコロンがある場合もファイル名の一部と解釈されるので、その場合は予期しない結果につながります。
</p>
<div class="example">
<pre class="example">$ seq 2 | sed '1w hello.txt ; 2d'
1
2

$ ls -log
total 4
-rw-rw-r-- 1 2 Jan 23 23:03 hello.txt ; 2d

$ cat 'hello.txt ; 2d'
1
</pre></div>

<p><code>r</code>、<code>R</code>、<code>w</code>、<code>W</code>コマンドは（指定したファイルが存在しない等の）ファイル入出力エラーを単純に無視します。ご注意下さい。次の例では<code>sed</code>はファイル名‘<samp><samp>hello.txt</samp></samp>’のファイルを読み込もうとしています。. しかしファイルがありませんでした。でもエラーも一切出さずに無視され次のコマンドの実行に移ります。
</p>
<div class="example">
<pre class="example">$ echo x | sed '1rhello.txt ; N'
x
</pre></div>

</dd>
<dt><code>e</code> (シェルコマンド実行)</dt>
<dd>
<p><code>e</code>コマンドから改行までの全ての文字がシェルに送られます。空白やコメントやセミコロンがある場合もシェルコマンドに含まれるので、その場合は予期しない結果につながります。
</p>
<div class="example">
<pre class="example">$ echo a | sed '1e touch foo#bar'
a

$ ls -1
foo#bar

$ echo a | sed '1e touch foo ; s/a/b/'
sh: 1: s/a/b/: not found
a
</pre></div>


</dd>
<dt><code>s///[we]</code> (上記を<code>e</code>や<code>w</code>フラグで代用する)</dt>
<dd>
<p><code>w</code>フラグは<code>s///</code>コマンド実行結果をファイルに書き込み、<code>e</code>フラグは<code>s///</code>コマンド実行結果をシェルコマンドとして実行します。<code>r/R/w/W/e</code>コマンドは改行で終わっていなければなりません。空白やコメントやセミコロンがある場合もファイル名やシェルコマンドの一部と解釈されるので、その場合は予期しない結果につながります。
</p>
<div class="example">
<pre class="example">$ echo a | sed 's/a/b/w1.txt#foo'
b

$ ls -1
1.txt#foo
</pre></div>

</dd>
</dl>


<hr>
<a name="sed-addresses"></a>
<div class="header">
<p>
</p>
</div>
<a name="Addresses_003a-selecting-lines"></a>
<h2 class="chapter">4 アドレス：行を選択する。</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">• <a href="#Addresses-overview" accesskey="1">アドレス概要</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> アドレス概要
</td></tr>
<tr><td align="left" valign="top">• <a href="#Numeric-Addresses" accesskey="2">数値指定アドレス</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">数値による行の選択
</td></tr>
<tr><td align="left" valign="top">• <a href="#Regexp-Addresses" accesskey="3">正規表現アドレス</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">テキストマッチによる行の選択
</td></tr>
<tr><td align="left" valign="top">• <a href="#Range-Addresses" accesskey="4">範囲アドレス</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">行の範囲選択
</td></tr>
</table>

<hr>
<a name="Addresses-overview"></a>
<div class="header">
<p>
</p>
</div>
<a name="Addresses-overview-1"></a>
<h3 class="section">4.1 アドレス概要</h3>

<a name="index-addresses_002c-numeric"></a>
<a name="index-numeric-addresses"></a>
<p>アドレスは<code>sed</code>コマンドを実行する対象行を決定します。次のコマンドは、144行でだけ‘<samp>hello</samp>’を‘<samp>world</samp>’に置き換えます。 
</p>
<div class="example">
<pre class="example">sed '144s/hello/world/' input.txt &gt; output.txt
</pre></div>



<p>アドレスが与えられてない時はコマンドは全ての行に対して実行されます。次のコマンドは、入力ファイルから読み込んだ全ての行で‘<samp>hello</samp>’を‘&lt;s2&gt;world&lt;/s2&gt;’に置き換えます。 
</p>
<div class="example">
<pre class="example">sed 's/hello/world/' input.txt &gt; output.txt
</pre></div>



<a name="index-addresses_002c-regular-expression"></a>
<a name="index-regular-expression-addresses"></a>
<p>アドレスは行番号の代わりに正規表現を含む事ができます。次のコマンドは、 ‘<samp>apple</samp>’を含む行でだけ‘<samp>hello</samp>’を‘<samp>world</samp>’に置き換えます。 
</p>
<div class="example">
<pre class="example">sed '/apple/s/hello/world/' input.txt &gt; output.txt
</pre></div>



<a name="index-addresses_002c-range"></a>
<a name="index-range-addresses"></a>
<p>アドレス範囲を指定する時は2つのアドレスをカンマ(<code>,</code>)で区切ります。アドレス範囲のアドレスは数字でも正規表現でも両方を混ぜる事もできます。次のコマンドは、4行から17行だけ‘<samp>hello</samp>’を‘<samp>world</samp>’に置き換えます(inclusive)。
</p>
<div class="example">
<pre class="example">sed '4,17s/hello/world/' input.txt &gt; output.txt
</pre></div>



<a name="index-Excluding-lines"></a>
<a name="index-Selecting-non_002dmatching-lines"></a>
<a name="index-addresses_002c-negating"></a>
<a name="index-addresses_002c-excluding"></a>
<p><code>!</code>文字をアドレス指定の終わり（コマンド文字の前) に指定するとマッチの否定になります。すなわち、<code>!</code>文字がアドレスやアドレス範囲の後ろにあると、選択したアドレス<em>以外</em>の行を対象とします。次のコマンドは‘<samp>apple</samp>'を<em>含まない</em>行だけ‘<samp>hello</samp>’を‘<samp>world</samp>’に置き換えます。
</p>
<div class="example">
<pre class="example">sed '/apple/!s/hello/world/' input.txt &gt; output.txt
</pre></div>

<p>次のコマンドは入力ファイルの1から3行と18から最終行だけ‘<samp>hello</samp>’を‘<samp>world</samp>’に置き換えます（すなわち excluding lines 4 to 17）。
</p>
<div class="example">
<pre class="example">sed '4,17!s/hello/world/' input.txt &gt; output.txt
</pre></div>





<hr>
<a name="Numeric-Addresses"></a>
<div class="header">
<p>
</p>
</div>
<a name="Selecting-lines-by-numbers"></a>
<h3 class="section">4.2 数による行の選択</h3>
<a name="index-Addresses_002c-in-sed-scripts"></a>
<a name="index-Line-selection"></a>
<a name="index-Selecting-lines-to-process"></a>

<p><code>sed</code>スクリプトのアドレスは以下のいずれかの形式を取ります。
</p><dl compact="compact">
<dt><code><var>number</var></code></dt>
<dd><a name="index-Address_002c-numeric"></a>
<a name="index-Line_002c-selecting-by-number"></a>
<p>行番号を指定すると入力の当該行番号の行だけにマッチします(注意：<samp>-i</samp> や <samp>-s</samp> コマンドラインオプションを指定しない限り、全ての入力ファイルを通して行番号を振ります）。
</p>
</dd>
<dt><code>$</code></dt>
<dd><a name="index-Address_002c-last-line"></a>
<a name="index-Last-line_002c-selecting"></a>
<a name="index-Line_002c-selecting-last"></a>
<p>このアドレス指定は入力ファイル群の最後のファイルの最終行、または、<samp>-i</samp> or <samp>-s</samp>コマンドラインオプションが指定された時は入力の各ファイルごとの最終行にマッチします。
</p>

</dd>
<dt><code><var>first</var>~<var>step</var></code></dt>
<dd><a name="index-GNU-extensions_002c-n_007em-addresses"></a>
<p>このGNU拡張は、<var>first</var>と、<var>first</var>から指定<var>step</var>ごとの行にマッチします。数値 <var>n</var> がいずれかの正の数であるとして、 現在行が式 <var>first</var> + (<var>n</var> * <var>step</var>) に合致する場合に選択されます。したがって、奇数行を選択するには<code> 1〜2 </code>を、偶数行を選択するには<code> 0〜2 </code>を使用します。 2行目から3行おきに選択するには、「<samp> 2〜3 </samp>」を使用します。 10行目から5行ごとに選択するには、<samp> 10〜5 </samp>を使用します。 「<samp> 50〜0 </samp>」は、あいまいな<code> 50 </code>の言い方です。
</p>
<p>以下のコマンドはステップアドレスのデモです。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '0~4p'
4
8

$ seq 10 | sed -n '1~3p'
1
4
7
10
</pre></div>


</dd>
</dl>



<hr>
<a name="Regexp-Addresses"></a>
<div class="header">
<p>
</p>
</div>
<a name="selecting-lines-by-text-matching"></a>
<h3 class="section">4.3 テキストマッチによる対象行選択</h3>

<p>GNU <code>sed</code>は以下の正規表現をサポートしています。デフォルトの正規表現は<a href="#BRE-syntax">Basic Regular Expression (BRE)</a>(基本正規表現)です。<samp>-E</samp> や <samp>-r</samp> コマンドラインオプションを指定した場合、正規表現の文法は<a href="#ERE-syntax">Extended Regular Expression (ERE)</a>(拡張正規表現)でなければなりません。「<a href="#BRE-vs-ERE">BRE vs ERE</a>」参照。
</p>
<dl compact="compact">
<dt><code>/<var>regexp</var>/</code></dt>
<dd><a name="index-Address_002c-as-a-regular-expression"></a>
<a name="index-Line_002c-selecting-by-regular-expression-match"></a>
<p>正規表現 <var>regexp</var> にマッチする全ての行を選択します。<var>regexp</var> それ自身が'<code>/</code>'文字を含む時は、'<code>\</code>'でエスケープしなければなりません。
</p>
<p>次のコマンドは'<samp>/etc/passwd</samp>'ファイルの行末が‘<samp>bash</samp>’である行だけをプリントします。<a name="DOCF5" href="#FOOT5"><sup>5</sup></a>
</p>
<div class="example">
<pre class="example">sed -n '/bash$/p' /etc/passwd
</pre></div>

<a name="index-empty-regular-expression"></a>
<a name="index-GNU-extensions_002c-modifiers-and-the-empty-regular-expression"></a>
<p>空の正規表現 '<samp>//</samp>'は最後の正規表現のマッチを繰り返します(空の正規表現が<code> s </code>コマンドに渡される場合も同じです)。注意：正規表現のフラグは正規表現のコンパイル時に評価されるため、空の正規表現と一緒に指定しても無効です。
</p>
</dd>
<dt><code>\%<var>regexp</var>%</code></dt>
<dd><p>('<code>％</code>'は他の任意の1文字に置き換えることができます)。
</p>
<a name="index-Slash-character_002c-in-regular-expressions"></a>
<p>これも正規表現 <var>regexp</var>にマッチします。つまり'<code>/</code>'と異なる区切りを使えます。これは<var>regexp</var>自身がたくさんの'/'を含んでいる場合に特に便利です。なぜならこうすれば全ての'<code>/</code>'にエスケープするのを避ける事ができるからです。<var>regexp</var> 内に区切り文字を含める時は、'<code>\</code>'でエスケープしなければなりません。
</p>
<p>次のコマンドはいずれも等価です。これらは‘<samp>/home/alice/documents/</samp>’で始まる行をプリントします。
</p>
<div class="example">
<pre class="example">sed -n '/^\/home\/alice\/documents\//p'
sed -n '\%^/home/alice/documents/%p'
sed -n '\;^/home/alice/documents/;p'
</pre></div>


</dd>
<dt><code>/<var>regexp</var>/I</code></dt>
<dt><code>\%<var>regexp</var>%I</code></dt>
<dd><a name="index-GNU-extensions_002c-I-modifier-1"></a>
<a name="index-case-insensitive_002c-regular-expression"></a>
<p>GNU拡張の'<code>I</code>'フラグは sed に正規表現 <var>regexp</var>の英大文字小文字を区別せずにマッチングするよう指示します。
</p>
<p>他の多くのプログラミング言語では、小文字を区別しない正規表現のマッチングに小文字の<code> i </code>が使用されます。でも <code>sed</code> では、既に <code>i</code> は挿入コマンドを表す文字としてつかわれているのです(「<a href="#insert-command">insert command</a>(挿入コマンド)」参照)。
</p>
<p>次の2つの例の違いをよく見て下さい。
</p>
<p>1つ目の例では、'<code>/b/I</code>'はアドレスです。正規表現は'<code>I</code>'フラグを伴っています。<code>d</code> は削除コマンドです。
</p>
<div class="example">
<pre class="example">$ printf "%s\n" a b c | sed '/b/Id'
a
c
</pre></div>

<p>では、次にの例では'<code>/b/</code>'のみが正規表現です。'<code>i</code>'は挿入コマンドです。'<code>d</code>'は'i'コマンドによって挿入される文字列です。マッチした行の前にテキスト‘<samp>d</samp>’が挿入されます。
</p>
<div class="example">
<pre class="example">$ printf "%s\n" a b c | sed '/b/id'
a
d
b
c
</pre></div>

</dd>
<dt><code>/<var>regexp</var>/M</code></dt>
<dt><code>\%<var>regexp</var>%M</code></dt>
<dd><a name="index-GNU-extensions_002c-M-modifier-1"></a>
<p>GNU <code>sed</code>拡張の'<code>M</code>'フラグは正規表現が<cite>複数行</cite>マッチモードで動くように指示します。このフラグは'<code>^</code>'と'<code>$</code>'をそれぞれ(通常の振る舞いに加えて)改行の後の空の文字列と改行の前の空の文字列に一致させます。常にバッファの先頭または末尾に一致する特殊文字つづり('<code>\`</code>'と'<code>\'</code>')があります。さらに、複数行モードではピリオド('.')は改行文字とマッチしません。
</p></dd>
</dl>


<a name="index-regex-addresses-and-pattern-space"></a>
<a name="index-regex-addresses-and-input-lines"></a>
<p>正規表現アドレスの場合はパターンスペースの現在の内容に作用します。(例えば <code>s///</code> コマンドで)パターンスペースの内容が変更されると、正規表現マッチングは変更後のテキストに作用します。
</p>
<p>次の例ではサイクル間の自動プリントは、<samp>-n</samp>コマンドラインオプションによって無効にされています。'<code>s/2/X/</code>'コマンドは対象行に含まれる‘<samp>2</samp>’を ‘<samp>X</samp>’に変更します。'<code>/[0-9]/p</code>'は0から9の数字いずれかを含む行とマッチして、マッチした行をプリントします。次の例では正規表現アドレス<code>/[0-9]/</code>とマッチを試みる前に2行目の内容の数字は'X'に置換されてしまいなくなってしまうので、<code>/[0-9]/</code>とマッチすることもなく、プリントもしません。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed -n 's/2/X/ ; /[0-9]/p'
1
3
</pre></div>


<hr>
<a name="Range-Addresses"></a>
<div class="header">
<p>
</p>
</div>
<a name="Range-Addresses-1"></a>
<h3 class="section">4.4 範囲アドレス</h3>

<a name="index-Range-of-lines"></a>
<a name="index-Several-lines_002c-selecting"></a>
<p>アドレスの範囲は2つの単一アドレスをカンマ('<code>,</code>')で区切ることで指定することが出来ます。. アドレスの範囲は最初のアドレスにマッチした行から始まって、2つ目のアドレスマッチするまで(2つ目のアドレス含む)続きます((inclusively)。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '4,6p'
4
5
6
</pre></div>

<p>2番目のアドレスが<var>正規表現</var>の場合、アドレス範囲の終わる行のマッチングは、最初のアドレスと一致した行の<em>次の行</em>から開始します。なお、範囲は(入力ストリームが最初のアドレスと一致した行で終了する場合を除き)常に2行以上になります。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '4,/[0-9]/p'
4
5
</pre></div>

<p>2番目のアドレスが最初のアドレス以下の数値の場合、最初のアドレスのみにマッチします(単一アドレス扱い)。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '4,1p'
4
</pre></div>

<a name="index-Special-addressing-forms"></a>
<a name="index-Range-with-start-address-of-zero"></a>
<a name="index-Zero_002c-as-range-start-address"></a>
<a name="index-addr1_002c_002bN"></a>
<a name="index-addr1_002c_007eN"></a>
<a name="index-GNU-extensions_002c-special-two_002daddress-forms"></a>
<a name="index-GNU-extensions_002c-0-address"></a>
<a name="index-GNU-extensions_002c-0_002caddr2-addressing"></a>
<a name="index-GNU-extensions_002c-addr1_002c_002bN-addressing"></a>
<a name="index-GNU-extensions_002c-addr1_002c_007eN-addressing"></a>
<p>GNU <code>sed</code> は特殊な2アドレス形式もサポートしています。これらは全てGNU拡張です。
</p><dl compact="compact">
<dt><code>0,/<var>regexp</var>/</code></dt>
<dd><p>行番号<code>0</code>(ゼロ)をアドレスに指定することが出来ます。 '<code>0,/<var>regexp</var>/</code>'のようにすると、<code>sed</code> は入力行の最初から<var>regexp</var>のマッチを試みます。'<code>0,/<var>regexp</var>/</code>'は'<code>1,/<var>regexp</var>/</code>'に似ていますが、'<code>0,/<var>regexp</var>/</code>'の<var>addr2</var>は入力行の最初から範囲終了としてマッチを試みますが、'<code>1,/<var>regexp</var>/</code>'ではアドレス範囲の原則に従い、範囲は最低2行になります。つまり範囲終了としてマッチを試みるのは2行目からです。
</p>
<p>注意：上記が<code>0</code> アドレスが意味をなす唯一の場所です。0行目というのは存在しませんから、これ以外の方法で <code>0</code> アドレスが与えられるとエラーになります。
</p>
<p>以下の例はアドレス 0開始と1開始の違いをデモしています。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '1,/[0-9]/p'
1
2

$ seq 10 | sed -n '0,/[0-9]/p'
1
</pre></div>


</dd>
<dt><code><var>addr1</var>,+<var>N</var></code></dt>
<dd><p><var>addr1</var>と、それに続く <var>N</var> 行の範囲にマッチします。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '6,+2p'
6
7
8
</pre></div>

<p><var>addr1</var> は数値または正規表現を指定できます。
</p>
</dd>
<dt><code><var>addr1</var>,~<var>N</var></code></dt>
<dd><p><var>addr1</var> とそれに続く<var>N</var>の倍数の行までの範囲にマッチします。次のコマンドは行6から開始して、4の倍数の行8までをプリントします。
</p>
<div class="example">
<pre class="example">$ seq 10 | sed -n '6,~4p'
6
7
8
</pre></div>

<p><var>addr1</var> は数値または正規表現を指定できます。
</p>
</dd>
</dl>




<hr>
<a name="sed-regular-expressions"></a>
<div class="header">
<p>
</p>
</div>
<a name="Regular-Expressions_003a-selecting-text"></a>
<h2 class="chapter">5 正規表現: テキストの選択</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">• <a href="#Regular-Expressions-Overview" accesskey="1">正規表現概要</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>の正規表現の概要
</td></tr>
<tr><td align="left" valign="top">• <a href="#BRE-vs-ERE" accesskey="2">BRE vs ERE</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">基本正規表現(basic;BRE) と拡張正規表現(extended; ERE)の文法。
</td></tr>
<tr><td align="left" valign="top">• <a href="#BRE-syntax" accesskey="3">BRE文法</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> 基本正規表現文法概要
</td></tr>
<tr><td align="left" valign="top">• <a href="#ERE-syntax" accesskey="4">ERE文法</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> 拡張正規表現文法概要
</td></tr>
<tr><td align="left" valign="top">• <a href="#Character-Classes-and-Bracket-Expressions" accesskey="5">文字クラスと角括弧式</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#regexp-extensions" accesskey="6">正規表現拡張</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">追加の正規表現コマンド。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Back_002dreferences-and-Subexpressions" accesskey="7">後方参照と部分式</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> 後方参照と部分式
</td></tr>
<tr><td align="left" valign="top">• <a href="#Escapes" accesskey="8">エスケープ</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">特殊文字の指定方法。
</td></tr>
<tr><td align="left" valign="top">• <a href="#Locale-Considerations" accesskey="9">ロケールへの配慮</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">マルチバイト文字とロケールへの配慮。
</td></tr>
</table>

<hr>
<a name="Regular-Expressions-Overview"></a>
<div class="header">
<p>
</p>
</div>
<a name="Overview-of-regular-expression-in-sed"></a>
<h3 class="section">5.1 <code>sed</code>の正規表現の概要</h3>



<p><code> sed </code>の使い方を知るためには、正規表現を理解する必要があります(正規表現 regular expresson は<em> regexp </em> と略される事があります)。正規表現は対象の文字列に対して左から右へマッチしていくパターンです。ほとんどの文字は<em>それそのもの(ordinary)</em>です。パターンの中で自分自身を表し、自分自身が表す文字とマッチします。<code>sed</code> の正規表現は2つのスラッシュ('/')で囲んで指定します。
</p>
<p>次のコマンドは‘<samp>hello</samp>’を含む行をプリントします。
</p>
<div class="example">
<pre class="example">sed -n '/hello/p'
</pre></div>

<p>上野例は次の<code>grep</code>コマンドと同じです。
</p>
<div class="example">
<pre class="example">grep 'hello'
</pre></div>

<p>正規表現の威力は、パターンに選択肢と繰り返しを含めることができることにあります。これらは<em>特殊文字</em>を使用してパターンにエンコードされています。特殊文字はそれ自体を表す形ではなく、代わりに特殊な方法で解釈されます。
</p>
<p>正規表現内で '<code>^</code>' (カレット)は行の先頭にマッチします。'<code>.</code>'(ピリオド)は任意の1文字にマッチします。次の <code>sed</code> コマンドは、行頭が‘<samp>b</samp>’で、次の1文字が任意の1文字でその次の文字が‘<samp>d</samp>’である行をプリントします。
</p>
<div class="example">
<pre class="example">$ printf "%s\n" abode bad bed bit bid byte body | sed -n '/^b.d/p'
bad
bed
bid
body
</pre></div>

<p>次節では、正規表現における特殊文字の意味と使用法について説明します。
</p>
<hr>
<a name="BRE-vs-ERE"></a>
<div class="header">
<p>
</p>
</div>
<a name="Basic-_0028BRE_0029-and-extended-_0028ERE_0029-regular-expression"></a>
<h3 class="section">5.2 基本正規表現(basic regular expression;BRE)と拡張正規表現(extended regular expression;ERE)</h3>

<p>基本正規表現と拡張正規表現は、指定されたパターンの文法に対する2つのバリエーションです。基本正規表現(BRE)文法は<code> sed </code>(および<code> grep </code>でも同様)のデフォルトです。POSIX指定の<samp> -E </samp>オプション(<samp> -r </samp>、<samp> --regexp-extended </samp>)を使用して、拡張正規表現(ERE)文法を有効にします。
</p>
<p>GNU <code> sed </code>では、基本正規表現と拡張正規表現の唯一の違いは、いくつかの特殊文字、つまり、 '?'、 '+'、丸括弧('(...)')、中括弧('{...}')、パイプ('|')の動作です。
</p>
<p>基本正規表現(BRE)文法では、これらの文字はバックスラッシュ('<samp>\</samp>')を前に付けない限り特別な意味を持ちません。 逆に拡張正規表現(ERE)文法では、これらの文字はバックスラッシュ('<samp>\</samp>')が付いていない限り特殊文字です。
</p>
<table>
<thead><tr><th width="28%">望ましいパターン</th><th width="36%">Basic (BRE) Syntax</th><th width="35%">Extended (ERE) Syntax</th></tr></thead>
<tr><td width="28%">文字としての‘<samp>+</samp>’ (プラス記号)</td><td width="36%"><div class="example">
<pre class="example">$ echo 'a+b=c' &gt; foo
$ sed -n '/a+b/p' foo
a+b=c
</pre></div></td><td width="35%"><div class="example">
<pre class="example">$ echo 'a+b=c' &gt; foo
$ sed -E -n '/a\+b/p' foo
a+b=c
</pre></div></td></tr>
<tr><td width="28%">以下の例では、1つ以上の文字‘<samp>a</samp>’のあとに1文字の‘<samp>b</samp>’続きます(プラス記号は特殊メタキャラクタ扱いになっています)。</td><td width="36%"><div class="example">
<pre class="example">$ echo aab &gt; foo
$ sed -n '/a\+b/p' foo
aab
</pre></div></td><td width="35%"><div class="example">
<pre class="example">$ echo aab &gt; foo
$ sed -E -n '/a+b/p' foo
aab
</pre></div></td></tr>
</table>




<hr>
<a name="BRE-syntax"></a>
<div class="header">
<p>
</p>
</div>
<a name="Overview-of-basic-regular-expression-syntax"></a>
<h3 class="section">5.3 基本正規表現文法概要</h3>

<p>本節では<code>sed</code>で使われる正規表現文法をさらっと説明します。
</p>
<dl compact="compact">
<dt><code><var>文字</var></code></dt>
<dd><p>その文字があらわすそのものにマッチします。
</p>
</dd>
<dt><code>*</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions"></a>
<p>これはその直前の正規表現の0回以上(0の時は無し)の繰り返しのつづりにマッチします。直前の正規表現は、普通の文字、'\'が前に付いた特殊文字、'.'(ピリオド)、グループ化された正規表現(下記参照)、あるいは角括弧式でなければなりません。GNUの拡張として、接尾辞付きの正規表現の後に<code> * </code>を続けることもできます。 たとえば、<code> a ** </code>は<code> a * </code>と同じです。POSIX 1003.1-2001は <code>*</code> が正規表現または正規表現の部分式の始めに現れるときはそれ自身を意味すると言いますが、多くの非GNU実装はこれをサポートしておらず、移植可能なスクリプトはこれらの文脈では代わりに <code>\*</code> を使うべきです。
</p></dd>
<dt><code>.</code></dt>
<dd><p>任意のキャラクタにマッチします。改行も含みます。
</p>
</dd>
<dt><code>^</code></dt>
<dd><p>パターンスペースの最初のNUL文字にマッチします。すなわち、'^'(曲折アクセント記号)に後ろに続くものはパターンスペースの最初の文字になります。
</p>
<p>ほとんどのスクリプトでは、パターンスペースは各行の内容に初期化されます(「<a href="#Execution-Cycle"><code>sed</code>はどのように動くか</a>」参照)。なので、<code>^#include</code> は、行の最初に'<samp>#include</samp>'がある行のみに一致するものと単純化すると分かりやすいです。例えば、その前にスペースがある場合はマッチは失敗します。この単純化は、元のパターンスペースの内容が変更されていない限り有効です。例えば<code> s </code>コマンドで有効です。
</p>
<p><code> ^ </code>は、正規表現または正規表現部分式の先頭（つまり、'<code>\(</code>'または'<code>\|</code>'の後)でのみ特殊文字として機能します。ただし、POSIXでは<code> ^ </code>をその文脈では通常の文字として扱う実装が許されているため、移植可能なスクリプトでは、正規表現部分式の冒頭で<code> ^ </code>を使用しないでください。
</p>
</dd>
<dt><code>$</code></dt>
<dd><p><code>^</code>と同様ですが、これはパターンスペースの終わりを意味します。<code>$</code> は、正規表現または正規表現部分式の末尾（つまり、'<code>\)</code>'または'<code>\|</code>'の前)でのみ特殊文字として機能します。そして正規表現部分式末尾でのこれの使用は移植性がありません。
</p>

</dd>
<dt><code>[<var>list</var>]</code></dt>
<dt><code>[^<var>list</var>]</code></dt>
<dd><p><var>list</var>の任意の1文字にマッチします。例えば <code>[aeiou]</code> は(英語の)母音全てにマッチします。listは'<code><var>char1</var>-<var>char2</var></code>'のようなつづりを含むことができます。それは<var>char1</var> から <var>char2</var> の任意の1文字にマッチします。「<a href="#Character-Classes-and-Bracket-Expressions">文字クラスと角括弧式</a>」参照。
</p>
</dd>
<dt><code>\+</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-1"></a>
<p><code>*</code> と同様ですが、1以上の繰り返しにマッチします。これはGNU拡張です。
</p>
</dd>
<dt><code>\?</code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-2"></a>
<p><code>*</code> と同様ですが、0または1回の(繰り返し;出現)にマッチします。これはGNU拡張です。
</p>
</dd>
<dt><code>\{<var>i</var>\}</code></dt>
<dd><p><code>*</code> と同様ですが、正確に<var>i</var>個の繰り返しのつづりにマッチします(<var>i</var> は10進整数値です。移植性を保つには0から255の範囲内で指定して下さい)。
</p>
</dd>
<dt><code>\{<var>i</var>,<var>j</var>\}</code></dt>
<dd><p>繰り返しのうち、<var>i</var>番目から<var>j</var>番目の範囲だけマッチします。, inclusive, sequences.
</p>
</dd>
<dt><code>\{<var>i</var>,\}</code></dt>
<dd><p><var>i</var>個またはそれ以上の繰り返しのつづりにマッチします。
</p>
</dd>
<dt><code>\(<var>regexp</var>\)</code></dt>
<dd><p>中に書いた<var>regexp</var>を一体としてグループにします。以下のように使います。
</p>
<ul>
<li> <a name="index-GNU-extensions_002c-to-basic-regular-expressions-3"></a>
<code>\(abcd\)*</code> のように後置演算子を適用すると、‘<samp>abcd</samp>’つづり全体が0個以上現れるつづりを検索します。一方、<code>abcd*</code>と書くと、‘<samp>abc</samp>’に続く0個以上の文字‘<samp>d</samp>’のつづりを検索します。POSIX 1003.1-2001では<code> \(abcd \)* </code>のサポートが必要ですが、多くの非GNU実装はそれをサポートしていないので普遍的に移植できません。

</li><li> 後方参照を使用してください(下記参照)。
</li></ul>


</dd>
<dt><code><var>regexp1</var>\|<var>regexp2</var></code></dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-4"></a>
<p>これは<var>regexp1</var> か <var>regexp2</var> にマッチします。複雑な代替正規表現を使うために括弧を使って下さい。マッチング処理では、左から右へ順番に各選択肢を試し、成功した最初の選択肢が使用されます。これはGNU拡張です。
</p>
</dd>
<dt><code><var>regexp1</var><var>regexp2</var></code></dt>
<dd><p><var>regexp1</var> と <var>regexp2</var> をつなげた正規表現にマッチします。連結は<code> \| </code>、<code>^</code>、<code> $ </code>よりも強く結合しますが、他の正規表現演算子よりは強く結合しません。
</p>
</dd>
<dt><code>\<var>digit</var></code></dt>
<dd><p>正規表現内で括弧でくくられた部分のうち<var>digit</var>番目の部分にマッチします。これは<em>後方参照</em>と呼ばれます。部分式は <code>\(</code> の出現を左から右に順番に数えることによって暗黙にナンバリングされます。
</p>
</dd>
<dt><code>\n</code></dt>
<dd><p>改行にマッチします
</p>
</dd>
<dt><code>\<var>char</var></code></dt>
<dd><p><var>char</var>が、 <code>$</code>, <code>*</code>, <code>.</code>, <code>[</code>, <code>\</code>、<code>^</code> のいずれかであるとき、その文字自身にマッチします(特殊文字としての機能を打ち消します)。注意：移植可能と想定できるC言語風のバックスラッシュつづりは'<code>\n</code>'と'<code>\\</code>'だけです。 特に'<code>\t</code>'は移植性がなく、<code>sed</code>のほとんどの実装では、タブ文字ではなく'<samp>t</samp>'にマッチします。
</p>
</dd>
</dl>

<a name="index-Greedy-regular-expression-matching"></a>
<p>注意：正規表現マッチ機構は貪欲です。すなわち、マッチは左から右へ試みられ、そして同じ文字から始めて２つ以上のマッチが可能であるならば、その最長を選択します。
</p>
<p>例:
</p><dl compact="compact">
<dt>‘<samp>abcdef</samp>’</dt>
<dd><p>‘<samp>abcdef</samp>’にマッチ。
</p>
</dd>
<dt>‘<samp>a*b</samp>’</dt>
<dd><p>0個以上の‘<samp>a</samp>’に続く1文字の‘<samp>b</samp>’のつづりにマッチします。例えば、‘<samp>b</samp>’や‘<samp>aaaaab</samp>’.
</p>
</dd>
<dt>‘<samp>a\?b</samp>’</dt>
<dd><p>‘<samp>b</samp>’または‘<samp>ab</samp>’にマッチ。
</p>
</dd>
<dt>‘<samp>a\+b\+</samp>’</dt>
<dd><p>1つ以上の‘<samp>a</samp>’に続く1つ以上の‘<samp>b</samp>’であるつづりにマッチ。‘<samp>ab</samp>’は最小のマッチです。他には‘<samp>aaaab</samp>’や‘<samp>abbbbb</samp>’や‘<samp>aaaaaabbbbbbb</samp>’。
</p>
</dd>
<dt>‘<samp>.*</samp>’</dt>
<dt>‘<samp>.\+</samp>’</dt>
<dd><p>上記2つは両方とも全ての文字にマッチします。けれども1つ目は空文字列含む全ての文字列にマッチする一方、2つ目は1文字以上の文字列にマッチします。
</p>
</dd>
<dt>‘<samp>^main.*(.*)</samp>’</dt>
<dd><p>上記は‘<samp>main</samp>’ではじまり、その後に'('と')'がこの順番で出現する文字列にマッチします。‘<samp>n</samp>’と‘<samp>(</samp>’と‘<samp>)</samp>’は隣接している必要はありません。
</p>
</dd>
<dt>‘<samp>^#</samp>’</dt>
<dd><p>‘<samp>#</samp>’で始まるストリングにマッチします。
</p>
</dd>
<dt>‘<samp>\\$</samp>’</dt>
<dd><p>1つのバックスラッシュ'\'で終わる文字列にマッチします。この正規表現には特殊文字のバックスラッシュとその意味を打ち消すエスケープ用のバックスラッシュの、2つのバックスラッシュが含まれています。
</p>
</dd>
<dt>‘<samp>\$</samp>’</dt>
<dd><p>一方、上記は1つの'$'にマッチします。なぜなら$特殊文字の意味がバックスラッシュによってエスケープされているからです。
</p>
</dd>
<dt>‘<samp>[a-zA-Z0-9]</samp>’</dt>
<dd><p>Cロケールでは、これはASCII文字と数字にマッチします。
</p>
</dd>
<dt>‘<samp>[^ <kbd><span class="key">«TAB»</span></kbd>]\+</samp>’</dt>
<dd><p>(ここで <kbd><span class="key">«TAB»</span></kbd> はタブ文字(ASCII HT;\x09)を表します)上記はスペース(0x20)またはタブ(0x09)以外の任意の文字の1文字以上にマッチします。通常これは(英語の)単語を意味します。
</p>
</dd>
<dt>‘<samp>^\(.*\)\n\1$</samp>’</dt>
<dd><p>これは、改行で区切られた2つの等しい部分文字列で構成される文字列と一致します。
</p>
</dd>
<dt>‘<samp>.\{9\}A$</samp>’</dt>
<dd><p>これは9文字にマッチし、その後に行末に'<samp>A</samp>'が続きます。
</p>
</dd>
<dt>‘<samp>^.\{15\}A</samp>’</dt>
<dd><p>これは16文字でかつその最後が‘<samp>A</samp>’である文字列にマッチします。
</p>
</dd>
</dl>


<hr>
<a name="ERE-syntax"></a>
<div class="header">
<p>
</p>
</div>
<a name="Overview-of-extended-regular-expression-syntax"></a>
<h3 class="section">5.4 拡張正規表現文法概要</h3>
<a name="index-Extended-regular-expressions_002c-syntax"></a>

<p>基本正規表現と拡張正規表現の唯一の違いは、いくつかの特殊文字、つまり、 '?'、 '+'、丸括弧('(...)')、中括弧('{...}')、パイプ('|')の動作です。基本正規表現では、特殊文字として振る舞わせるにはこれらをエスケープする必要がありますが、逆に拡張正規表現を使用するときにはリテラル文字と一致させるにはエスケープする必要があります。ここで‘<samp>|</samp>’(パイプ)は特別な意味を持ちます。‘<samp>\|</samp>’はGNUの拡張機能なので、標準の基本正規表現では機能が提供されません。
</p>
<p>例:
</p><dl compact="compact">
<dt><code>abc?</code></dt>
<dd><p>上記は拡張正規表現を使用すると、'<samp>abc\?</samp>'になります。'<samp>abc\?</samp>'は、拡張正規表現ではリテラル文字列‘<samp>abc?</samp>’にマッチします。
</p>
</dd>
<dt><code>c\+</code></dt>
<dd><p>拡張正規表現では‘<samp>c+</samp>’になります。上記は拡張正規表現では1つ以上の‘<samp>c</samp>’にマッチします。
</p>
</dd>
<dt><code>a\{3,\}</code></dt>
<dd><p>拡張正規表現では‘<samp>a{3,}</samp>’となります。上記は拡張正規表現では3個以上の‘<samp>a</samp>’にマッチします。
</p>
</dd>
<dt><code>\(abc\)\{2,3\}</code></dt>
<dd><p>拡張正規表現では‘<samp>(abc){2,3}</samp>’になります。‘<samp>abcabc</samp>’か‘<samp>abcabcabc</samp>’のどちらかにマッチします。
</p>
</dd>
<dt><code>\(abc*\)\1</code></dt>
<dd><p>拡張正規表現では‘<samp>(abc*)\1</samp>’となります。後方参照は拡張正規表現でも依然としてエスケープされる必要があります。
</p>
</dd>
<dt><code>a\|b</code></dt>
<dd><p>拡張正規表現では‘<samp>a|b</samp>’となります。‘<samp>a</samp>’または‘<samp>b</samp>’にマッチします。
</p></dd>
</dl>

<hr>
<a name="Character-Classes-and-Bracket-Expressions"></a>
<div class="header">
<p>
</p>
</div>
<a name="Character-Classes-and-Bracket-Expressions-1"></a>
<h3 class="section">5.5 文字クラスと角括弧式</h3>


<a name="index-bracket-expression"></a>
<a name="index-character-class"></a>
<p><em>角括弧式</em>は ‘<samp>[</samp>’と‘<samp>]</samp>’で囲まれた文字のリストです。リスト内の任意の1文字にマッチします。最初の文字が‘<samp>^</samp>’の時はリストに<strong>無い</strong>任意の1文字にマッチします。次のコマンドは‘<samp>gray</samp>’または‘<samp>grey</samp>’を‘<samp>blue</samp>’に置き換えます。
</p>
<div class="example">
<pre class="example">sed  's/gr[ae]y/blue/'
</pre></div>

<p>角括弧式は、<a href="#BRE-syntax">基本</a>と<a href="#ERE-syntax">拡張</a>の両方の正規表現で使用できます(つまり、<samp> -E </samp>や<samp> -r</samp> の有無にかかわらず)。
</p>
<a name="index-range-expression"></a>
<p>角括弧式の中では、<em>範囲式</em>はハイフン'-'で区切られた2文字で構成されています。それは2つの文字の間でソートする任意の1文字と一致します。包括的(inclusive)です。デフォルトのCロケールでは、ソート順はネイティブの文字順です。 たとえば、'<samp>[a-d]</samp>'は'<samp>[abcd]</samp>'と同じです。
</p>

<p>最後に、以下のように、特定の名前付き文字クラスが角括弧式の中で使えるよう事前定義されています。
</p>
<p>これらの名前付きクラスはブラケット([...])の中でしか使えません。正しい使い方：
</p><div class="example">
<pre class="example">$ echo 1 | sed 's/[[:digit:]]/X/'
X
</pre></div>

<p>間違った使い方は<code>sed</code>の新しい版では拒絶されます。より古いバージョンはそれを受け入れましたが、現在それは単なる角括弧式として扱われます('<samp>[dgit:]</samp>'と等価です。すなわち、文字'd'、'g'、'i'、't'、':'のいずれかにマッチします)。
</p><div class="example">
<pre class="example"># GNU sed の現在の版ではこれは不正として拒絶される
$ echo 1 | sed 's/[:digit:]/X/'
sed: character class syntax is [[:space:]], not [:space:]

# GNU sed の古い版
$ echo 1 | sed 's/[:digit:]/X/'
1
</pre></div>


<a name="index-classes-of-characters"></a>
<a name="index-character-classes"></a>
<a name="index-named-character-classes"></a>
<dl compact="compact">
<dt>‘<samp>[:alnum:]</samp>’</dt>
<dd><a name="index-alnum-character-class"></a>
<a name="index-alphanumeric-characters"></a>
<p>英数字を表すのは‘<samp>[:alpha:]</samp>’と‘<samp>[:digit:]</samp>’です。これは‘<samp>C</samp>’ロケールとACII文字エンコーディングでは‘<samp>[0-9A-Za-z]</samp>’と同じです。
</p>
</dd>
<dt>‘<samp>[:alpha:]</samp>’</dt>
<dd><a name="index-alpha-character-class"></a>
<a name="index-alphabetic-characters"></a>
<p>アルファベット文字は‘<samp>[:lower:]</samp>’と‘<samp>[:upper:]</samp>’です。‘<samp>C</samp>’ロケールとASCII文字エンコーディングでは‘<samp>[A-Za-z]</samp>’と同じです。
</p>
</dd>
<dt>‘<samp>[:blank:]</samp>’</dt>
<dd><a name="index-blank-character-class"></a>
<a name="index-blank-characters"></a>
<p>空白文字は空白(0x20)とタブ(0x09)です。
</p>
</dd>
<dt>‘<samp>[:cntrl:]</samp>’</dt>
<dd><a name="index-cntrl-character-class"></a>
<a name="index-control-characters"></a>
<p>コントロール文字。ASCIIでは8進数の000から037と、177(DEL)です(16進数では \x00から\x1Fと\x7F)。他の文字セットは、もしそれがあればその文字と等価です。
</p>
</dd>
<dt>‘<samp>[:digit:]</samp>’</dt>
<dd><a name="index-digit-character-class"></a>
<a name="index-digit-characters"></a>
<a name="index-numeric-characters"></a>
<p>Digits(数字): <code>0 1 2 3 4 5 6 7 8 9</code>.
</p>
</dd>
<dt>‘<samp>[:graph:]</samp>’</dt>
<dd><a name="index-graph-character-class"></a>
<a name="index-graphic-characters"></a>
<p>Graphical characters(グラフィック文字): ‘<samp>[:alnum:]</samp>’と‘<samp>[:punct:]</samp>’です。
</p>
</dd>
<dt>‘<samp>[:lower:]</samp>’</dt>
<dd><a name="index-lower-character-class"></a>
<a name="index-lower_002dcase-letters"></a>
<p>小文字。‘<samp>C</samp>’ロケールでASCIIエンコーディングでは <code>a b c d e f g h i j k l m n o p q r s t u v w x y z</code> です。
</p>
</dd>
<dt>‘<samp>[:print:]</samp>’</dt>
<dd><a name="index-print-character-class"></a>
<a name="index-printable-characters"></a>
<p>Printable characters(表示可能文字)。‘<samp>[:alnum:]</samp>’と‘<samp>[:punct:]</samp>’と空白です。
</p>
</dd>
<dt>‘<samp>[:punct:]</samp>’</dt>
<dd><a name="index-punct-character-class"></a>
<a name="index-punctuation-characters"></a>
<p>Punctuation characters(句読点文字)。‘<samp>C</samp>’ロケールでASCIIエンコーディングではこれは以下のものです。" # $ % &amp; ' ( ) * + , - . / : ; &lt; = &gt; ?@ [ \ ] ^ _ ` { | } ~</code>.
</p>
</dd>
<dt>‘<samp>[:space:]</samp>’</dt>
<dd><a name="index-space-character-class"></a>
<a name="index-space-characters"></a>
<a name="index-whitespace-characters"></a>
<p>Space characters(空白文字)。‘<samp>C</samp>’ロケールでASCIIエンコーディングではこれは、タブ(HT;0x09)、改行(LF;0x0A)、垂直タブ(VT;0x0B)、フォームフィード(FF;0x0C)、キャリッジリターン(CR;0x0D)、空白(0x20)です。
</p>

</dd>
<dt>‘<samp>[:upper:]</samp>’</dt>
<dd><a name="index-upper-character-class"></a>
<a name="index-upper_002dcase-letters"></a>
<p>大文字。‘<samp>C</samp>’ロケールでASCIIエンコーディングではこれは、<code>A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</code> です。.
</p>
</dd>
<dt>‘<samp>[:xdigit:]</samp>’</dt>
<dd><a name="index-xdigit-character-class"></a>
<a name="index-xdigit-class"></a>
<a name="index-hexadecimal-digits"></a>
<p>16進数。<code>0 1 2 3 4 5 6 7 8 9 A B C D E F a b c d e f</code> です。
</p>
</dd>
</dl>
<p>注意：  これらのクラス名のブラケット('[',']')は記号名の一部であり、角括弧式を区切る大括弧('[',']')に加えて含める必要があります。
</p>
<p>ほとんどのメタキャラクタは角括弧式の中ではその特別な意味を失います。
</p>
<dl compact="compact">
<dt>‘<samp>]</samp>’</dt>
<dd><p>最初のリスト項目ではない場合は、角括弧式を終了します。したがって、文字として'<samp>] </samp>'の文字をリスト項目にする場合は、最初にそれを配置する必要があります。
</p>
</dd>
<dt>‘<samp>-</samp>’</dt>
<dd><p>リストの最初または最後ではない場合、または範囲の終点でない場合は、範囲を表します。
</p>
</dd>
<dt>‘<samp>^</samp>’</dt>
<dd><p>リストにない文字を表します。リストの項目として文字としての‘<samp>^</samp>’を使いたい場合はリストの最初以外に配置します。
</p></dd>
</dl>

<p>TODO: incorporate this paragraph (copied verbatim from BRE section).

</p>
<a name="index-POSIXLY_005fCORRECT-behavior_002c-bracket-expressions"></a>
<p>リストの中では <code>$</code>, <code>*</code>, <code>.</code>, <code>[</code>,  <code>\</code> は特殊文字ではなく通常の文字です。例えば、<code>[\*]</code> は文字‘<samp>\</samp>’か文字‘<samp>*</samp>’のどちらかにマッチします。なぜなら<code>\</code> は特殊文字ではないからです。けれども、<code>[.ch.]</code>、<code>[=a=]</code>、<code>[:space:]</code><code>のような文字列は<var>リスト</var>内では特殊です。これらはそれぞれ照合シンボル、等価クラス、文字クラスを表します。したがって、<code>[</code>の後に<code>.</code>、<code>=</code>、<code>:</code>が続く場合、<var> list </var>内で特別です。また、<code>POSIXLY_CORRECT</code>モードではない場合、<code>\n </code>や<code>\t</code>のような特別なエスケープは<var>リスト</var>内でで無効になりません。「<a href="#Escapes">エスケープ</a>」参照。
</p>


<dl compact="compact">
<dt>‘<samp>[.</samp>’</dt>
<dd><p>照合シンボルの開始を表します。
</p>
</dd>
<dt>‘<samp>.]</samp>’</dt>
<dd><p>照合シンボルの終了を表します。
</p>
</dd>
<dt>‘<samp>[=</samp>’</dt>
<dd><p>等価クラスの開始を表します。
</p>
</dd>
<dt>‘<samp>=]</samp>’</dt>
<dd><p>等価クラスの終了を表します。
</p>
</dd>
<dt>‘<samp>[:</samp>’</dt>
<dd><p>文字クラスシンボルの開始を表し、その後に有効な文字クラス名を続ける必要があります。
</p>
</dd>
<dt>‘<samp>:]</samp>’</dt>
<dd><p>文字クラスシンボルの終了を表します。
</p></dd>
</dl>


<hr>
<a name="regexp-extensions"></a>
<div class="header">
<p>
</p>
</div>
<a name="regular-expression-extensions"></a>
<h3 class="section">5.6 正規表現拡張</h3>

<p>以下のつづり達は(<a href="#Regexp-Addresses">アドレス</a>や <code>s</code> コマンドで使われる)正規表現の内側で特別な意味を持ちます。
</p>
<p>これらは<a href="#BRE-syntax">基本</a>と<a href="#ERE-syntax">拡張</a>の両方の正規表現で使用できます(つまり、<samp> -E </samp>や<samp> -r</samp> の有無にかかわらず)。
</p>
<dl compact="compact">
<dt><code>\w</code></dt>
<dd><p>任意の「単語」の文字にマッチします。「単語」の文字とは、任意の文字または数字またはアンダースコア'_'です。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\w/X/g'
XXX %-= XXX.
</pre></div>


</dd>
<dt><code>\W</code></dt>
<dd><p>「非単語」文字にマッチします。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\W/X/g'
abcXXXXXdefX
</pre></div>


</dd>
<dt><code>\b</code></dt>
<dd><p>単語の境界に一致します。 つまり、左側の文字が「単語」の文字で右側の文字が「非単語」の文字である場合、またはその逆の場合に一致します。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\b/X/g'
XabcX %-= XdefX.
</pre></div>


</dd>
<dt><code>\B</code></dt>
<dd><p>単語の境界を除くあらゆる場所に一致します。 つまり、左側の文字と右側の文字が両方とも「単語」の文字であるか、両方の「非単語」の文字であるかに一致します。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\B/X/g'
aXbXc X%X-X=X dXeXf.X
</pre></div>


</dd>
<dt><code>\s</code></dt>
<dd><p>空白文字(空白とタブ)にマッチします。パターンスペースやホールドスペースに埋め込まれた改行にも一致します。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\s/X/g'
abcX%-=Xdef.
</pre></div>


</dd>
<dt><code>\S</code></dt>
<dd><p>非空白文字にマッチします。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\S/X/g'
XXX XXX XXXX
</pre></div>


</dd>
<dt><code>\&lt;</code></dt>
<dd><p>単語の最初にマッチします。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\&lt;/X/g'
Xabc %-= Xdef.
</pre></div>


</dd>
<dt><code>\&gt;</code></dt>
<dd><p>単語の最後にマッチします。
</p>
<div class="example">
<pre class="example">$ echo "abc %-= def." | sed 's/\&gt;/X/g'
abcX %-= defX.
</pre></div>


</dd>
<dt><code>\`</code></dt>
<dd><p>パターンスペースの最初にのみマッチします。これは複数行モードの <code>^</code> とは異なります。
</p>
<p>以下の2つの例を比べてみて下さい。
</p>
<div class="example">
<pre class="example">$ printf "a\nb\nc\n" | sed 'N;N;s/^/X/gm'
Xa
Xb
Xc

$ printf "a\nb\nc\n" | sed 'N;N;s/\`/X/gm'
Xa
b
c
</pre></div>

</dd>
<dt><code>\'</code></dt>
<dd><p>パターンスペースの最後にのみマッチします。これは複数行モードでの <code>$</code> とは異なります。
</p>


</dd>
</dl>


<hr>
<a name="Back_002dreferences-and-Subexpressions"></a>
<div class="header">
<p>
</p>
</div>
<a name="Back_002dreferences-and-Subexpressions-1"></a>
<h3 class="section">5.7 後方参照と部分式</h3>
<a name="index-subexpression"></a>
<a name="index-back_002dreference"></a>

<p><em>後方参照</em>は、一致した正規表現の前の部分を参照する正規表現コマンドです。後方参照はバックスラッシュと1桁の数字で指定されます(例：<samp>\1 </samp>)。それらが参照する正規表現の一部は<em>部分式</em>と呼ばれ、丸括弧で示されます。
</p>
<p>後方参照と部分式は、正規表現検索パターンの中と<code>s</code>コマンド<var>replacement</var>の部分の2つの場合に使用されます(「<a href="#Regexp-Addresses">正規表現アドレス</a>」と「<a href="#The-_0022s_0022-Command">The "s" Command</a>」参照)。
</p>
<p>正規表現パターンでは、後方参照は、以前に一致した部分式と同じ内容を一致させるために使用されます。次の例では、部分式は‘<samp>.</samp>’で、この場合任意の1文字を意味します(丸括弧で囲まれていると部分式になります)。後方参照 '<samp>\1</samp>'は、部分式と同じ内容(同じ文字)に一致するように要求します。
</p>
<p>以下のコマンドは、任意の文字で始まり、その後に文字‘<samp>o</samp>’、その後に最初の文字と同じ文字が続く単語に一致します。
</p>
<div class="example">
<pre class="example">$ sed -E -n '/^(.)o\1$/p' /usr/share/dict/words
bob
mom
non
pop
sos
tot
wow
</pre></div>

<p>複数の部分式は左から右に自動的に採番されます。このコマンドは6文字の回文を検索します(最初の3文字は3つの部分式で、その後に3つの後方参照が逆順に続きます)。
</p>
<div class="example">
<pre class="example">$ sed -E -n '/^(.)(.)(.)\3\2\1$/p' /usr/share/dict/words
redder
</pre></div>

<p><code> s </code>コマンドでは、<var> replacement </var>部分で後方参照を使用して<var> regexp </var>部分の部分式を参照できます。
</p>
<p>次の例では、スペースで区切られた2つの単語に一致させるために、正規表現で2つの部分式を使用しています。<var> replacement </var>部分の後方参照は、単語を異なる順序で表示します。
</p>
<div class="example">
<pre class="example">$ echo "James Bond" | sed -E 's/(.*) (.*)/The name is \2, \1 \2./'
The name is Bond, James Bond.
</pre></div>


<p>alternation('|')が使用されている時、部分マッチした側にグループが含まれていないと、後方参照は全体のマッチを失敗させます。例えば‘<samp>a(.)|b\1</samp>’は‘<samp>ba</samp>’にはマッチしません。<samp>-e</samp> やファイル(‘<samp>-f <var>file</var></samp>’)で複数の正規表現を指定する時、後方参照は指定ごとの各正規表現ローカルです。
</p>

<hr>
<a name="Escapes"></a>
<div class="header">
<p>
</p>
</div>
<a name="Escape-Sequences-_002d-specifying-special-characters"></a>
<h3 class="section">5.8 エスケープシーケンス - 特殊文字の指定</h3>

<a name="index-GNU-extensions_002c-special-escapes"></a>
<p>この章までは、<code> sed </code>に曲折アクセント記号('^')を特殊文字として解釈するのではなく、文字通りに解釈するように指示する '<samp>\^</samp>'という形式のエスケープにしか遭遇しませんでした。例えば、‘<samp>\*</samp>’は0個以上のバックスラッシュ'\'ではなく1文字の'*'にマッチします。
</p>
<a name="index-POSIXLY_005fCORRECT-behavior_002c-escapes"></a>
<p>この章では、別の種類のエスケープ<a name="DOCF6" href="#FOOT6"><sup>6</sup></a>、つまり通常文字そのものとして使用される文字・文字のつづりに適用されるエスケープ、および<code>sed</code>が特殊文字に置き換えるエスケープを紹介します。これは、印刷不可能な文字をパターンで視覚的にエンコードする方法を提供します。<code> sed </code>スクリプト内の非印刷文字の表示に制限はありませんが、スクリプトがシェル内またはテキスト編集によって準備されている場合は、通常、それを示す文字コードを指定するよりも以下のエスケープシーケンスのいずれかを使用するほうが簡単です。
</p>
<p>それらのエスケープの一覧です。
</p>
<dl compact="compact">
<dt><code>\a</code></dt>
<dd><p><small>BEL</small>文字を生成するかマッチします。それは"alert"(ASCII BEL;0x07)です。
</p>
</dd>
<dt><code>\f</code></dt>
<dd><p>フォームフィード(ASCII FF;0x0C)を生成するかマッチします。
</p>
</dd>
<dt><code>\n</code></dt>
<dd><p>改行(ASCII LF;0x0A)を生成するかマッチします。
</p>
</dd>
<dt><code>\r</code></dt>
<dd><p>キャリッジ・リターン(ASCII CR;0x0D)を生成するかマッチします。
</p>
</dd>
<dt><code>\t</code></dt>
<dd><p>タブ(水平タブ)(ASCII HT;0x09)を生成するかマッチします。
</p>
</dd>
<dt><code>\v</code></dt>
<dd><p>垂直タブ(ASCII VT;0x0B)を生成するかマッチします。
</p>
</dd>
<dt><code>\c<var>x</var></code></dt>
<dd><p>コントロール文字(<kbd><small>CONTROL</small>-<var>x</var></kbd>)を生成するかマッチします。ここで <var>x</var> は任意の文字です。‘<samp>\c<var>x</var></samp>’の正確な効果は以下のとおりです。なお、<var>x</var> が小文字の場合は大文字に変換したうえで評価されます。それから文字の6ビット目(16進数で 0x40)を反転させます。したがって、「<samp>\cz</samp>」は16進数1Aになり、「<samp>\c{</samp>」は16進数3Bになり、「<samp>\c;</samp>」は16進数7Bになります。
</p>
</dd>
<dt><code>\d<var>xxx</var></code></dt>
<dd><p><small> ASCII </small>値が10進数の<var> xxx </var>の文字を生成またはマッチします。
</p>
</dd>
<dt><code>\o<var>xxx</var></code></dt>
<dd><p><small> ASCII </small>値が8進数の<var> xxx </var>の文字を生成またはマッチします。
</p>
</dd>
<dt><code>\x<var>yy</var></code></dt>
<dd><p><small> ASCII </small>値が16進数の<var> yy </var>の文字を生成またはマッチします。
</p></dd>
</dl>

<p>‘<samp>\b</samp>’（バックスペース）は、既存の「単語境界」の意味と競合するため省かれています。
</p>
<a name="Escaping-Precedence"></a>
<h4 class="subsection">5.8.1 エスケープ文字の打ち消し</h4>

<p>GNU <code>sed</code> は <code>s///</code>コマンドの正規表現マッチングやアドレスのマッチングにテキストを渡す前にエスケープシーケンスを処理します。次の2つのコマンドは等価です(‘<samp>0x5e</samp>’は16進表記した文字‘<samp>^</samp>’の<small>ASCII</small>値)。
</p>
<div class="example">
<pre class="example">$ echo 'a^c' | sed 's/^/b/'
ba^c

$ echo 'a^c' | sed 's/\x5e/b/'
ba^c
</pre></div>

<p>‘<samp>[</samp>’のASCII値が‘<samp>0x5b</samp>'、‘<samp>]</samp>’のASCII値が‘<samp>0x5d</samp>’であるのだからと、次の通り書いたとします。
</p>
<div class="example">
<pre class="example">$ echo abc | sed 's/[a]/x/'
Xbc
$ echo abc | sed 's/\x5ba\x5d/x/'
Xbc
</pre></div>

<p>ただし、予期しない境界ギリギリの状態(edge-case)が発生するため、このような特殊文字は避けてください。例えば次の2つの例は等価ではありません。
</p>
<div class="example">
<pre class="example">$ echo 'a^c' | sed 's/\^/b/'
abc

$ echo 'a^c' | sed 's/\\\x5e/b/'
a^c
</pre></div>



<hr>
<a name="Locale-Considerations"></a>
<div class="header">
<p>
</p>
</div>
<a name="Multibyte-characters-and-Locale-Considerations"></a>
<h3 class="section">5.9 マルチバイト文字とロケールに関する考慮事項</h3>

<p>GNU <code>sed</code>はマルチバイトロケール（例 <code>UTF-8</code>）でマルチバイト文字を適切に処理できます。<a name="DOCF7" href="#FOOT7"><sup>7</sup></a>
</p>
<p>次の例ではギリシャ文字の大文字のシグマ (Σ, ユニコードでは <code>0x03A3</code>)を使用しています。<code>UTF-8</code>ロケールでは<code>sed</code>は2オクテット(2バイト)であってもシグマを正しく1文字として処理します。
</p>
<div class="example">
<pre class="example">$ locale | grep LANG
LANG=en_US.UTF-8

$ printf 'a\u03A3b'
aΣb

$ printf 'a\u03A3b' | sed 's/./X/g'
XXX

$ printf 'a\u03A3b' | od -tx1 -An
 61 ce a3 62
</pre></div>

<p>1オクテット(1バイト)単位の処理を<code>sed</code>に強制したいときは、（<code>POSIX</code>ロケールとして知られている）<code>C</code>ロケールを使って下さい。
</p>
<div class="example">
<pre class="example">$ printf 'a\u03A3b' | LC_ALL=C sed 's/./X/g'
XXXX
</pre></div>

<a name="Invalid-multibyte-characters"></a>
<h4 class="subsection">5.9.1 不正なマルチバイト文字</h4>

<p>マルチバイトロケールでの<code>sed</code>の正規表現は不正なマルチバイトつづりにマッチできません。
</p>
<p>次の例は不完全なマルチバイト文字である<code>0xCE</code>です（�と表示されます）。正規表現‘<samp>.</samp>’はこれにマッチできません。
</p>
<div class="example">
<pre class="example">$ printf 'a\xCEb\n'
a�e

$ printf 'a\xCEb\n' | sed 's/./X/g'
X�X

$ printf 'a\xCEc\n' | sed 's/./X/g' | od -tx1c -An
  58  ce  58  0a
   X      X   \n
</pre></div>

<p>同様に、’全てをキャッチする’ 正規表現 ‘<samp>.*</samp>’ を使ってみても行全体ともマッチできません。
</p>
<div class="example">
<pre class="example">$ printf 'a\xCEc\n' | sed 's/.*//' | od -tx1c -An
  ce  63  0a
       c  \n
</pre></div>

<p>GNU <code>sed</code>には不正なマルチバイト文字に関係なくパターンスペースの内容を全削除する特別なコマンド<code>z</code>コマンドがあります（<code>s/.*//</code>のように動作しますが、無効なマルチバイト文字も削除します。
</p>
<div class="example">
<pre class="example">$ printf 'a\xCEc\n' | sed 'z' | od -tx1c -An
   0a
   \n
</pre></div>

<p>あるいは、<code>C</code>ロケールにして1オクテット単位(1バイト単位で)処理させます（<code>C</code>ロケールでは全てのオクテット値(バイト値）が有効です）。
</p>
<div class="example">
<pre class="example">$ printf 'a\xCEc\n' | LC_ALL=C sed 's/.*//' | od -tx1c -An
  0a
  \n
</pre></div>


<p><code>sed</code>が不正なマルチバイト文字を処理できないことを、ファイル内のそのような不正つづりの検知に使うことができます。以下の例では<code>\xCE\xCE</code>は不正マルチバイトつづりですが、 <code>\xCE\A3</code>は適正なマルチバイト文字（ギリシャ文字のシグマ）を含むつづりです。
</p>
<p><code>sed</code>プログラムは<code>s/.//g</code>によって全ての適正な文字を取り除きます。パターンスペースに残った任意の内容（不正なマルチバイト文字）は、<code>H</code>コマンドによってホールドスペースに追加されます。最終行(<code>$</code>)でホールドスペースの内容は回収されます(<code>x</code>)。改行が全て削除され(<code>s/\n//g</code>)、残った任意のデータが非表示文字も印刷可能な形で(unambiguously)プリントされます(<code>l</code>)。したがって、不正なマルチバイトつづりは8進値として出力されます。
</p>
<div class="example">
<pre class="example">$ printf 'ab\nc\n\xCE\xCEde\n\xCE\xA3f\n' &gt; invalid.txt

$ cat invalid.txt
ab
c
��de
Σf

$ sed -n 's/.//g ; H ; ${x;s/\n//g;l}' invalid.txt
\316\316$
</pre></div>

<p>さらにいくつかのコマンドを使用すると、<code> sed </code>は無効な各文字に対応する正確な行(この例では3行目)の行番号を表示できます。これらの文字は、<code> C </code>ロケールを強制し、8進エスケープシーケンスを使用することで削除できます。
</p>
<div class="example">
<pre class="example">$ sed -n 's/.//g;=;l' invalid.txt | paste - -  | awk '$2!="$"'
3       \316\316$

$ LC_ALL=C sed '3s/\o316\o316//' invalid.txt &gt; fixed.txt
</pre></div>

<a name="Upper_002fLower-case-conversion"></a>
<h4 class="subsection">5.9.2 (英語の)大文字小文字変換</h4>


<p>GNU <code>sed</code>’の置換コマンド(<code>s</code>)は<code>\U</code>、<code>\L</code>を使うことで大文字小文字変換をサポートします。 これらの変換はマルチバイト文字をサポートします。
</p>
<div class="example">
<pre class="example">$ printf 'ABC\u03a3\n'
ABCΣ

$ printf 'ABC\u03a3\n' | sed 's/.*/\L&amp;/'
abcσ
</pre></div>

<p>「<a href="#The-_0022s_0022-Command">The "s" Command</a>」参照
</p>

<a name="Multibyte-regexp-character-classes"></a>
<h4 class="subsection">5.9.3 マルチバイト正規表現文字クラス</h4>


<p>Cロケール以外の他のロケールでは、ソート順は指定されておらず、 ‘<samp>[a-d]</samp>’は‘<samp>[abcd]</samp>’または ‘<samp>[aBbCcDd]</samp>’と同等であるか、または任意の文字、またはそれが一致する文字のセットと一致しない可能性があります。マッチは不規則かもしれません。角括弧式の伝統的な解釈を取得するために、環境変数<code> LC_ALL </code>を値<samp> C </samp>に設定して '<samp> C </samp>'ロケールを使用できます。 
</p>
<div class="example">
<pre class="example"># TODO: is there any real-world system/locale where 'A'
#       is replaced by '-' ?
$ echo A | sed 's/[a-z]/-/'
A
</pre></div>

<p>これらの解釈は<code> LC_CTYPE </code>ロケールに依存します。 たとえば、<samp> [[:alnum:]] </samp>は、現在のロケールでの数字と文字の文字クラスを意味します。
</p>
<p>TODO: show example of collation

</p>
<div class="example">
<pre class="example"># TODO: this works on glibc systems, not on musl-libc/freebsd/macosx.
$ printf 'clichÃ©\n' | LC_ALL=fr_FR.utf8 sed 's/[[=e=]]/X/g'
clichX
</pre></div>


<hr>
<a name="advanced-sed"></a>
<div class="header">
<p>
</p>
</div>
<a name="Advanced-sed_003a-cycles-and-buffers"></a>
<h2 class="chapter">6 <code>sed</code>の高度な話題: サイクルとバッファ</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">• <a href="#Execution-Cycle" accesskey="1">実行サイクル</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top"><code>sed</code>はどのように動いているか
</td></tr>
<tr><td align="left" valign="top">• <a href="#Hold-and-Pattern-Buffers" accesskey="2">ホールド用とパターン用のバッファ</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Multiline-techniqu" accesskey="3">複数行テクニック</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">D,G,H,N,P コマンドで複数行処理
</td></tr>
<tr><td align="left" valign="top">• <a href="#Branching-and-flow-control" accesskey="4">分岐と制御構文</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="Execution-Cycle"></a>
<div class="header">
<p>
</p>
</div>
<a name="How-sed-Works"></a>
<h3 class="section">6.1 <code>sed</code>はどのように動いているか</h3>

<a name="index-Buffer-spaces_002c-pattern-and-hold"></a>
<a name="index-Spaces_002c-pattern-and-hold"></a>
<a name="index-Pattern-space_002c-definition"></a>
<a name="index-Hold-space_002c-definition"></a>
<p><code>sed</code>は2つのバッファを保持しています。それは現に活動中のパターンスペースと補助のホールドスペースです。両方とも最初は空です。
</p>
<p><code>sed</code>は入力の各行ごとに以下のサイクルを実行します。最初に<code>sed</code>は入力ストリームから1行読み取り、末尾の改行を削除し、パターンスペースに入れます。次にコマンド群を実行します。各コマンドはそのコマンドに関連付けられたアドレスを持つこともできます。アドレスは一種の条件コードで、条件に合致した時だけそのコマンドが実行されます。
</p>
<p>スクリプトの最後まで到達した時(<samp>-n</samp>が指定されてなければ)、最初に一行読み込む時に削除した行末の改行を戻してから(読み込む時に行末の改行を削除してなかったらそのまま)、パターンスペースの内容を出力ストリームにプリントアウトします。<a name="DOCF8" href="#FOOT8"><sup>8</sup></a> それから次の入力行の為のサイクルを開始します。
</p>
<p>（<samp>D</samp>コマンドのような)特殊コマンドが使われてない限り、次のサイクルを開始する前にパターンスペースの内容を削除します。一方ホールドスペースの内容はサイクル毎に削除しません。以降の新しいサイクルが始まっても内容を保持しています（両バッファの間でデータを移動させるためのコマンド、 ‘<samp>h</samp>’, ‘<samp>H</samp>’, ‘<samp>x</samp>’, ‘<samp>g</samp>’, ‘<samp>G</samp>’ 参照）。
</p>
<hr>
<a name="Hold-and-Pattern-Buffers"></a>
<div class="header">
<p>
</p>
</div>
<a name="Hold-and-Pattern-Buffers-1"></a>
<h3 class="section">6.2 ホールド用とパターン用のバッファ</h3>

<p>TODO

</p>
<hr>
<a name="Multiline-techniques"></a>
<div class="header">
<p>
</p>
</div>
<a name="Multiline-techniques-_002d-using-D_002cG_002cH_002cN_002cP-to-process-multiple-lines"></a>
<h3 class="section">6.3 複数行テクニック - D,G,H,N,P コマンドで複数行処理</h3>

<p>複数行は <code>D</code>,<code>G</code>,<code>H</code>,<code>N</code>,<code>P</code> コマンドを使って1つのバッファで処理できます。これらは、それぞれ対応する小文字のコマンド(<code>d</code>,<code>g</code>,<code>h</code>,<code>n</code>,<code>p</code>)と似ていますが、埋め込まれた改行を尊重しながらデータを追加または削除するという点が異なります。パターンスペースとホールドスペースで行を追加・削除できます。
</p>
<p>これらのコマンドの動作は以下の通り。
</p><dl compact="compact">
<dt><code>D</code></dt>
<dd><p>パターンスペースから最初の改行まで(改行含む)1行を<em>削除</em>する。パターンスペースのプリントや全削除をスキップして次のサイクルを開始する。
</p>
</dd>
<dt><code>G</code></dt>
<dd><p>パターンスペースの末尾に改行を追加し更にホールドスペースから1行パターンスペースに<em>追加</em>します。
</p>
</dd>
<dt><code>H</code></dt>
<dd><p>ホールドスペースの末尾に改行を追加し更にパターンスペースから1行<em>追加</em>します。
</p>
</dd>
<dt><code>N</code></dt>
<dd><p>1行<em>追加</em>。入力ストリームから1行パターンスペースに追加する。
</p>
</dd>
<dt><code>P</code></dt>
<dd><p>パターンスペースの最初の改行(改行含む)までの1行を<em>プリント</em>する。
</p>
</dd>
</dl>


<p>次の例は、<code>N</code>コマンドや<code>D</code>コマンドの動作を示しています。
</p>
<div class="example">
<pre class="example">$ seq 6 | sed -n 'N;l;D'
1\n2$
2\n3$
3\n4$
4\n5$
5\n6$
</pre></div>

<ol>
<li> <code>sed</code>は最初の1行をパターンスペースに読み込み（すなわちパターンスペースの内容は‘<samp>1</samp>’）
</li><li> 毎度のサイクルを始めます。<code>N</code>コマンドは(最初の1行をパターンスペースに読み込む時に取り除いた)改行を追加し、更に次の1行をパターンスペースに読み込みます( すなわちパターンスペースの内容は‘<samp>1</samp>’, ‘<samp>\n</samp>’, ‘<samp>2</samp>’ となる）。
</li><li> <code>l</code>(小文字のエル)コマンドはパターンスペースの内容を非表示文字等含めて目に見える形でプリントします(削除はしない)。
</li><li> <code>D</code>コマンドはパターンスペースの内容を最初の改行まで(その改行含む)削除し、そして<code>D</code>パターンスペースの削除をスキップして次のサイクルを開始します （よって、次のサイクルは(2行目の)<samp>2</samp>’だけ状態から始まる）。
</li><li> そのサイクルで<code>N</code>コマンドは同様に削除してあった改行追加し入力行をパターンスペースに追加します（すなわち、‘<samp>2</samp>’, ‘<samp>\n</samp>’, ‘<samp>3</samp>’).
</li></ol>


<a name="index-processing-paragraphs"></a>
<a name="index-paragraphs_002c-processing"></a>
<p>（行ごとではなく）段落などのテキストブロックを処理するには以下のような構文を使用するのが一般的です。
</p>
<div class="example">
<pre class="example">sed '/./{H;$!d} ; x ; s/REGEXP/REPLACEMENT/'
</pre></div>

<ol>
<li> スクリプト1行目の<code>/./{H;$!d}</code>は空行以外の全ての行に対して実行され、（パターンスペース内の) 現在行をホールドスペースに追加します。<code>$!</code>によって最終行以外ではパターンスペースの内容の全削除と残りの処理をスキップして次のサイクルを開始します。

</li><li> 残りのスクリプト<code>x</code> と <code>s</code> は空行（すなわち段落の区切り）に対してだけ実行されます。<code>x</code>コマンドはパターンスペースの内容をホールドスペースの内容（累積した行）で置き換えます。<code>s///</code>は（改行を含んだ）段落内の全てのテキストに対して実行されます 。
</li></ol>

<p>以下の例はこのテクニックのデモです。
</p><div class="example">
<pre class="example">$ cat input.txt
a a a aa aaa
aaaa aaaa aa
aaaa aaa aaa

bbbb bbb bbb
bb bb bbb bb
bbbbbbbb bbb

ccc ccc cccc
cccc ccccc c
cc cc cc cc

$ sed '/./{H;$!d} ; x ; s/^/\nSTART--&gt;/ ; s/$/\n&lt;--END/' input.txt

START--&gt;
a a a aa aaa
aaaa aaaa aa
aaaa aaa aaa
&lt;--END

START--&gt;
bbbb bbb bbb
bb bb bbb bb
bbbbbbbb bbb
&lt;--END

START--&gt;
ccc ccc cccc
cccc ccccc c
cc cc cc cc
&lt;--END
</pre></div>

<p>注釈付きの例については、「<a href="#Text-search-across-multiple-lines">複数行にわたるテキスト検索</a>」や「<a href="#Line-length-adjustment">行の長さを揃える</a>」参照。
</p>
<hr>
<a name="Branching-and-flow-control"></a>
<div class="header">
<p>
</p>
</div>
<a name="Branching-and-Flow-Control"></a>
<h3 class="section">6.4 分岐と制御構文</h3>

<p>分岐コマンドの<code>b</code>や<code>t</code>や<code>T</code>は<code>sed</code>プログラムの流れを変える事を可能にします。
</p>
<p>デフォルトでは<code>sed</code>は入力行をパターンスペースに読み込み、それから全てのコマンドを順番に実行します。アドレス指定の無いコマンドは全ての行で実行されます。アドレス指定のあるコマンドはアドレス指定に合致する行に対してだけ実行されます。「<a href="#Execution-Cycle">実行サイクル</a>」と「<a href="#Addresses-overview">アドレス概要</a>」参照。
</p>
<p><code>sed</code>には典型的な<code>if/then</code>構文がありません。代わりにいくつかのコマンドは、条件文や、制御の流れを変えるために使えます。
</p>
<dl compact="compact">
<dt><code>d</code></dt>
<dd><p>パターンスペースの内容を全削除し、このコマンド以降のスクリプトの実行をスキップしてパターンスペースの内容をプリントせずに次のサイクルを開始する。
</p>
</dd>
<dt><code>D</code></dt>
<dd><p>パターンスペースの最初の改行まで(その改行含む)削除し、このコマンド以降のスクリプトの実行をスキップしてパターンスペースの内容をプリントせずに次のサイクルを開始する。
</p>
</dd>
<dt><code>[addr]X</code></dt>
<dt><code>[addr]{ X ; X ; X }</code></dt>
<dt><code>/regexp/X</code></dt>
<dt><code>/regexp/{ X ; X ; X }</code></dt>
<dd><p>アドレスや正規表現は<code>if/then</code>構文として使える。「if パターンスペースの内容が<var>[addr]</var>  にマッチ then コマンド実行」。例：<code>/^#/d</code> は、「<em>if</em> パターンスペースが正規表現<code>^#</code>（行頭が#）にマッチする <em>then</em> <code>d</code> コマンド実行（当該行を削除し、プリントせず、次のサイクルを開始する）」。
</p>
</dd>
<dt><code>b</code></dt>
<dd><p>無条件分岐（指定のラベルへジャンプ。当該スクリプトの中で前にジャンプしてループを構成するのに使ったり、条件と組み合わせてelse部分をスキップするのに使える。あくまで当該スクリプトの中でジャンプするだけで当該サイクルを終了したり次のサイクルを開始することはない）。分岐はアドレスと組み合わせると、条件に適合した時だけジャンプさせることができます。
</p>
</dd>
<dt><code>t</code></dt>
<dd><p>条件分岐。最後に読み込まれた入力行の<code>s///</code>コマンドが成功し、かつ、まだ他の条件分岐が実行されてない場合に分岐実行する（指定のラベルへジャンプ)。
</p>
</dd>
<dt><code>T</code></dt>
<dd><p><code>t</code>コマンドと逆に、最後に読み込まれた入力行の's'コマンドが<em>失敗</em>した場合に分岐する。
</p></dd>
</dl>


<p>以下の2つの<code>sed</code>プログラムは等価です。最初の（わざとらしい）例は‘<samp>1</samp>’を含む行の時に<code>s///</code>をスキップするために<code>b</code>コマンドを使っています。2番目の例ではアドレスの否定（ '<samp>！</samp>'）を使用して、目的の行のみ<code>s///</code>コマンドを実行します。いずれにせよ<code>y///</code>コマンドは全ての行で実行されます。
</p>
<div class="example">
<pre class="example">$ printf '%s\n' a1 a2 a3 | sed -E '/1/bx ; s/a/z/ ; :x ; y/123/456/'
a4
z5
z6

$ printf '%s\n' a1 a2 a3 | sed -E '/1/!s/a/z/ ; y/123/456/'
a4
z5
z6
</pre></div>



<a name="Branching-and-Cycles"></a>
<h4 class="subsection">6.4.1 分岐とサイクル</h4>
<a name="index-labels"></a>
<a name="index-omitting-labels"></a>
<a name="index-cycle_002c-restarting"></a>
<a name="index-restarting-a-cycle"></a>
<p><code>b</code>コマンドや<code>t</code>コマンドや<code>T</code>コマンドは、コマンドに続くジャンプ先ラベルが必要です（通常はアルファベット1文字）。飛び先ラベルはコロン(:)に続く1文字またはそれ以上の文字列として定義します（例えば‘<samp>:x</samp>’）。なお、ブランチコマンドでラベルを省略すると次のサイクルを開始します。ブランチコマンドによるジャンプと次のサイクルの開始との違いに注意して下さい。次のサイクルの開始時は<code>sed</code>はまずパターンスペースの内容をプリントして次に入力ストリームから1行パターンスペースに読み込みます。一方ラベルへのジャンプは（それがたとえプログラムの先頭へジャンプしたとしても）、パターンスペースの内容はプリントされませんし入力ストリームから次の1行を読み込む事もありません。
</p>
<p>以下のプログラム自身は何もしません。（このプログラム唯一のコマンドである）<code>b</code>コマンドは飛び先ラベルが書かれていないので次のサイクルを開始します。よってどのサイクルでもパターンスペースの内容がプリントされて入力ストリームから次の入力行を読み取ります。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed b
1
2
3
</pre></div>

<a name="index-infinite-loop_002c-branching"></a>
<a name="index-branching_002c-infinite-loop"></a>
<p>次のサンプルは無限ループに陥ります。一切プリントすることなく終了もしません（訳注：CTRL+C等で強制停止させる）。<code>b</code>コマンドは‘<samp>x</samp>’ラベルにジャンプし、そして永遠に最初のサイクルにとどまり決して新しいサイクルが始まることはありません。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed ':x ; bx'

# 上記コマンド実行には gnu sed が必要です。
# （ラベル定義のあとで改行しないでいいのは gnu 拡張です。）gnu sed 以外でも動くようにするには以下のようにします。
#     sed -e ':x' -e bx
</pre></div>

<a name="index-branching-and-n_002c-N"></a>
<a name="index-n_002c-and-branching"></a>
<a name="index-N_002c-and-branching"></a>
<p>分岐はしばしば<code>n</code>コマンドや<code>N</code>コマンドと一緒に使われます。両コマンドは次のサイクルを開始することなしに入力ストリームから1行入力行をパターンスペースに入れます。 <code>n</code>コマンドはパターンスペースの内容をプリントして、そしてパターンスペースの内容を全削除してから入力ストリームから次の1行を読み込みます。一方、 <code>N</code>コマンドはひたすら改行と次の入力行をパターンスペースに追加していきます。
</p>
<p>ここで以下の2つの例について考えてみます。
</p>
<div class="example">
<pre class="example">$ seq 3 | sed ':x ; n ; bx'
1
2
3

$ seq 3 | sed ':x ; N ; bx'
1
2
3
</pre></div>

<ul>
<li> 両例とも、決して新しいサイクルを始めることは無いにもかかわらず無限ループになりません。

</li><li> 最初の例では<code>n</code>コマンドは最初にパターンスペースの内容をプリントし、それからパターンスペースの内容を全削除し、それから次の入力行を読み込みます。入力ストリームからこれ以上入力行が読み込めなくなると<code>n</code>コマンドはsedを終了させます。

</li><li> ２番目の例では、<code>N</code>コマンドはひたすら次の行を（改行付きで）パターンスペースに追加していきます。入力ストリームからこれ以上入力行が読み込めなくなるまで入力行をパターンスペースに蓄積します。そして入力ストリームからこれ以上入力行が読み込めなくなると<code>N</code>コマンドは<code>sed</code>を終了させます。プログラムが終了する時はサイクル終了のアクションが実行されます。つまりパターンスペースの内容がプリントされます。

</li><li> 次の例はGNU <code>sed</code>を要求します。なぜなら<code>N</code>のPOSIX標準外の動作を使っているからです。. 「<a href="#Reporting-Bugs">報告されているバグ</a>」の “最終行での<code>N</code>コマンド"段落参照。

</li><li> 2つの例の違いをさらに調べるには、次のコマンドを試してください。
<div class="example">
<pre class="example">printf '%s\n' aa bb cc dd | sed ':x ; n ; = ; bx'
printf '%s\n' aa bb cc dd | sed ':x ; N ; = ; bx'
printf '%s\n' aa bb cc dd | sed ':x ; n ; s/\n/***/ ; bx'
printf '%s\n' aa bb cc dd | sed ':x ; N ; s/\n/***/ ; bx'
</pre></div>

</li></ul>



<a name="Branching-example_003a-joining-lines"></a>
<h4 class="subsection">6.4.2 分岐例: 行連結</h4>

<a name="index-joining-lines-with-branching"></a>
<a name="index-branching_002c-joining-lines"></a>
<a name="index-quoted_002dprintable-lines_002c-joining"></a>
<a name="index-joining-quoted_002dprintable-lines"></a>
<a name="index-t_002c-joining-lines-with"></a>
<a name="index-b_002c-joining-lines-with"></a>
<a name="index-b_002c-versus-t"></a>
<a name="index-t_002c-versus-b"></a>
<p>現実的な分岐の使用例として、通常電子メールメッセージのエンコードに使用される<a href="https://en.wikipedia.org/wiki/Quoted-printable"> quoted-printable </a>ファイルの場合を考えます。これらのファイルでは、長い行が分割され、行末に単一の「<samp>=</samp>」文字からなる<em>ソフト改行</em>が付けられます。
</p>
<div class="example">
<pre class="example">$ cat jaques.txt
All the wor=
ld's a stag=
e,
And all the=
 men and wo=
men merely =
players:
They have t=
heir exits =
and their e=
ntrances;
And one man=
 in his tim=
e plays man=
y parts.
</pre></div>


<p>次のプログラムは、アドレス一致 '<samp>/=$/</samp>'を条件として使用します。現在のパターンスペースが '<samp>=</samp>'で終わっている場合は、<code> N </code>を使って次の入力行を読み込み、改行が後ろに続くすべての '<samp>=</samp>'文字を置き換え、新しいサイクルを開始せずに無条件でプログラムの先頭に分岐します(<code>b</code>)。パターンスペースが「<samp>=</samp>」で終わっていない場合は、デフォルトのアクションが実行されます。パターンスペースがプリントされ、次のサイクルが開始されます。
</p>
<div class="example">
<pre class="example">$ sed ':x ; /=$/ { N ; s/=\n//g ; bx }' jaques.txt
All the world's a stage,
And all the men and women merely players:
They have their exits and their entrances;
And one man in his time plays many parts.
</pre></div>

<p>お次は、少し異なるアプローチをしたプログラムです。最後の行を除くすべての行で、<code>N</code>は行をパターンスペースに追加します。それから置換コマンドは、'<samp>= </samp>'と、それに続く改行なつづりを空文字列に置き換える事によってソフト改行を取り除きます。<em>もし</em>置換が成功した場合(つまり、パターンスペースに結合すべき行が含まれていた場合)、条件付き分岐コマンド<code> t </code>は、現在のサイクルを完了させることもなく、新しいサイクルを開始することもなくプログラムの先頭にジャンプします。置換が失敗した場合（ソフト改行がないことを意味する）、<code> t </code>コマンドは<em>分岐しません</em>。そして、<code> P </code>は最初の改行までパターンスペースの内容を印刷し、<code> D </code>は最初の新しい行までパターンスペースの内容を削除します。(<code> N </code>、<code> P </code>、<code> D </code>コマンドの詳細については、「<a href="#Multiline-techniqu">複数行テクニック</a>」参照)。
</p>

<div class="example">
<pre class="example">$ sed ':x ; $!N ; s/=\n// ; tx ; P ; D' jaques.txt
All the world's a stage,
And all the men and women merely players:
They have their exits and their entrances;
And one man in his time plays many parts.
</pre></div>


<p>更に行連結の例を見たい方は「<a href="#Joining-lines">行連結</a>」参照。
</p>

<hr>
<a name="Examples"></a>
<div class="header">
<p>
</p>
</div>
<a name="Some-Sample-Scripts"></a>
<h2 class="chapter">7 スクリプト例をいくつか</h2>

<p>ここには、<code>sed</code>をマスターするのに参考になる、いくつかのスクリプトがあります。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

便利な一行野郎：
</pre></th></tr><tr><td align="left" valign="top">• <a href="#Joining-lines" accesskey="1">行連結</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

いくつかのエキゾチックな例:
</pre></th></tr><tr><td align="left" valign="top">• <a href="#Centering-lines" accesskey="2">センタリング</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Increment-a-number" accesskey="3">数字のインクリメント</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Rename-files-to-lower-case" accesskey="4">ファイル名を小文字にリネーム</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Print-bash-environment" accesskey="5">bash環境変数をプリント</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Reverse-chars-of-lines" accesskey="6">行内の文字列を逆順にする。</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Text-search-across-multiple-lines" accesskey="7">複数行に渡るテキスト検索</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">• <a href="#Line-length-adjustment" accesskey="8">行の長さを揃える</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

標準のユーティリティをエミュレート:
</pre></th></tr><tr><td align="left" valign="top">• <a href="#tac" accesskey="9">tac</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">ファイルの各行の内容を逆順にする。
</td></tr>
<tr><td align="left" valign="top">• <a href="#cat-_002dn">cat -n</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">各行に行番号を付ける
</td></tr>
<tr><td align="left" valign="top">• <a href="#cat-_002db">cat -b</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">空行以外に行番号を付ける
</td></tr>
<tr><td align="left" valign="top">• <a href="#wc-_002dc">wc -c</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">文字数を数える
</td></tr>
<tr><td align="left" valign="top">• <a href="#wc-_002dw">wc -w</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">単語数を数える
</td></tr>
<tr><td align="left" valign="top">• <a href="#wc-_002dl">wc -l</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">行数を数える
</td></tr>
<tr><td align="left" valign="top">• <a href="#head">head</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">最初の数行をプリントする。
</td></tr>
<tr><td align="left" valign="top">• <a href="#tail">tail</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">最後の数行をプリントする。
</td></tr>
<tr><td align="left" valign="top">• <a href="#uniq">uniq</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">重複行を取り除く
</td></tr>
<tr><td align="left" valign="top">• <a href="#uniq-_002dd">uniq -d</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">入力から重複した行をプリントする。
</td></tr>
<tr><td align="left" valign="top">• <a href="#uniq-_002du">uniq -u</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">全ての重複した行を削除する。
</td></tr>
<tr><td align="left" valign="top">• <a href="#cat-_002ds">cat -s</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">連続した空行の出力を行わない
</td></tr>
</table>

<hr>
<a name="Joining-lines"></a>
<div class="header">
<p>
</p>
</div>
<a name="Joining-lines-1"></a>
<h3 class="section">7.1行連結</h3>

<p>この節では、<code> N </code>、<code> D </code>、<code> P </code>コマンドを使用して複数行を処理し、<code>b</code> と <code>t</code>コマンドを使用して分岐します。「<a href="#Multiline-techniqu">複数行テクニック</a>」、「<a href="#Branching-and-flow-control">分岐とフロー制御</a>」参照。.
</p>
<p>指定行を連結する(例：2行目と3行目を結合する必要がある場合)。
</p>
<div class="example">
<pre class="example">$ cat lines.txt
hello
hel
lo
hello

$ sed '2{N;s/\n//;}' lines.txt
hello
hello
hello
</pre></div>

<p>バックスラッシュで継続された行を連結する。
</p>
<div class="example">
<pre class="example">$ cat 1.txt
this \
is \
a \
long \
line
and another \
line

$ sed -e ':x /\\$/ { N; s/\\\n//g ; bx }'  1.txt
this is a long line
and another line


#TODO: The above requires gnu sed.
#      non-gnu seds need newlines after ':' and 'b'
</pre></div>

<p>空白で始まる行（例：SMTPヘッダ）を結合します。
</p>
<div class="example">
<pre class="example">$ cat 2.txt
Subject: Hello
    World
Content-Type: multipart/alternative;
    boundary=94eb2c190cc6370f06054535da6a
Date: Tue, 3 Jan 2017 19:41:16 +0000 (GMT)
Authentication-Results: mx.gnu.org;
       dkim=pass header.i=@gnu.org;
       spf=pass
Message-ID: &lt;abcdef@gnu.org&gt;
From: John Doe &lt;jdoe@gnu.org&gt;
To: Jane Smith &lt;jsmith@gnu.org&gt;

$ sed -E ':a ; $!N ; s/\n\s+/ / ; ta ; P ; D' 2.txt
Subject: Hello World
Content-Type: multipart/alternative; boundary=94eb2c190cc6370f06054535da6a
Date: Tue, 3 Jan 2017 19:41:16 +0000 (GMT)
Authentication-Results: mx.gnu.org; dkim=pass header.i=@gnu.org; spf=pass
Message-ID: &lt;abcdef@gnu.org&gt;
From: John Doe &lt;jdoe@gnu.org&gt;
To: Jane Smith &lt;jsmith@gnu.org&gt;

# A portable (non-gnu) variation:
#   sed -e :a -e '$!N;s/\n  */ /;ta' -e 'P;D'
</pre></div>


<hr>
<a name="Centering-lines"></a>
<div class="header">
<p>
</p>
</div>
<a name="Centering-Lines"></a>
<h3 class="section">7.2 センタリング</h3>

<p>このスクリプトは全ての行を80カラム幅でセンタリングします。幅を変更するには、'<code>\{…\}</code>'の数を置き換え、追加スペースの数も変更する必要があります。
</p>
<p>正規表現内の分かれた部分を一致させるためにbufferコマンドを使用する方法に注意してください。これは一般的なテクニックです。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># ホールドスペースに80個の空白を置く
1 {
  x
  s/^$/          /
  s/^.*$/&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;/
  x
}
</pre><pre class="example">

</pre><pre class="example"># 先行する空白と末尾の空白を削除
y/<kbd><span class="key">TAB</span></kbd>/ /
s/^ *//
s/ *$//
</pre><pre class="example">

</pre><pre class="example"># 行の後ろに改行と80個の空白を追加する
G
</pre><pre class="example">

</pre><pre class="example"># 最初の81文字(80 + a newline)のみを残し以降を削除
s/^\(.\{81\}\).*$/\1/
</pre><pre class="example">

</pre><pre class="example"># \2 は残りの空白の半分にマッチし、それを先頭に移動する。
s/^\(.*\)\n\(.*\)\2/\2\1/
</pre></div>

<hr>
<a name="Increment-a-number"></a>
<div class="header">
<p>
</p>
</div>
<a name="Increment-a-Number"></a>
<h3 class="section">7.3 数のインクリメント</h3>

<p>このスクリプトは、<code> sed </code>で算術演算を実行する方法を示すいくつかのうちの1つです。これは確かに可能ですが、手動で行う必要があります。<a name="DOCF9" href="#FOOT9"><sup>9</sup></a>
</p>
<p>数字を1つ増やすには、最後の数字に1を足して次の数字に置き換えます。例外が1つあります。数字が9のときは、9がなくなるまで、前の数字も増分する必要があります。
</p>
<p>Bruno Haibleによるこの解法は、単一のバッファを使用するため、非常に巧妙でスマートです。 この制限がない場合は、<a href="#cat-_002dn">行番号をつける</a>で使用されるアルゴリズムのほうが速くなります。末尾の9文字をアンダースコア'_'に置き換えて、そして最後の数字を増やすために複数の<code> s </code>コマンドを使用し、そしてアンダースコア'_'をゼロ'0'に置き換えます。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

/[^0-9]/ d

</pre><pre class="example"># 末尾の9文字をすべて'_'に置き換えます
# (数字以外の任意の文字を使用できます)
:d
s/9\(_*\)$/_\1/
td
</pre><pre class="example">

</pre><pre class="example"># 最後の数字のみ増やします。最初の行は、数字を追加する必要がある場合、
# 最上位桁の1を追加します。
</pre><pre class="example">

</pre><pre class="example">s/^\(_*\)$/1\1/; tn
s/8\(_*\)$/9\1/; tn
s/7\(_*\)$/8\1/; tn
s/6\(_*\)$/7\1/; tn
s/5\(_*\)$/6\1/; tn
s/4\(_*\)$/5\1/; tn
s/3\(_*\)$/4\1/; tn
s/2\(_*\)$/3\1/; tn
s/1\(_*\)$/2\1/; tn
s/0\(_*\)$/1\1/; tn
</pre><pre class="example">

</pre><pre class="example">:n
y/_/0/
</pre></div>

<hr>
<a name="Rename-files-to-lower-case"></a>
<div class="header">
<p>
</p>
</div>
<a name="Rename-Files-to-Lower-Case"></a>
<h3 class="section">7.4 ファイル名を小文字にする</h3>

<p>これは<code> sed </code>のかなり奇妙な使い方です。テキストを変換し、それをシェルコマンドに変換してから、単にそれらをシェルに送ります。だがご心配なく。<code> sed </code>を使用するともっとひどいハックだってあります。私は <code> date </code>の出力を<code> bc </code>プログラムに変換するスクリプトを見たことがあります。
</p>
<p>この本体は<code> sed </code>スクリプトで、名前を下から上に（またはその逆に）再マップし、再マップされた名前が元の名前と同じであるかどうかを調べます。スクリプトがシェル変数と適切な引用符を使用してどのようにパラメータ化されるかに注意してください。
</p>
<div class="example">
<pre class="example">#!/bin/sh
# rename files to lower/upper case...
#
# usage:
#    move-to-lower *
#    move-to-upper *
# or
#    move-to-lower -R .
#    move-to-upper -R .
#
</pre><pre class="example">

</pre><pre class="example">help()
{
        cat &lt;&lt; eof
Usage: $0 [-n] [-r] [-h] files...
</pre><pre class="example">

</pre><pre class="example">-n      do nothing, only see what would be done
-R      recursive (use find)
-h      this message
files   files to remap to lower case
</pre><pre class="example">

</pre><pre class="example">例:
       $0 -n *        (see if everything is ok, then...)
       $0 *
</pre><pre class="example">

       $0 -R .

</pre><pre class="example">eof
}
</pre><pre class="example">

</pre><pre class="example">apply_cmd='sh'
finder='echo "$@" | tr " " "\n"'
files_only=
</pre><pre class="example">

</pre><pre class="example">while :
do
    case "$1" in
        -n) apply_cmd='cat' ;;
        -R) finder='find "$@" -type f';;
        -h) help ; exit 1 ;;
        *) break ;;
    esac
    shift
done
</pre><pre class="example">

</pre><pre class="example">if [ -z "$1" ]; then
        echo Usage: $0 [-h] [-n] [-r] files...
        exit 1
fi
</pre><pre class="example">

</pre><pre class="example">LOWER='abcdefghijklmnopqrstuvwxyz'
UPPER='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
</pre><pre class="example">

</pre><pre class="example">case `basename $0` in
        *upper*) TO=$UPPER; FROM=$LOWER ;;
        *)       FROM=$UPPER; TO=$LOWER ;;
esac
</pre><pre class="example">

eval $finder | sed -n '

</pre><pre class="example"># remove all trailing slashes
s/\/*$//
</pre><pre class="example">

</pre><pre class="example"># add ./ if there is no path, only a filename
/\//!s/^/.\//
</pre><pre class="example">

</pre><pre class="example"># save path+filename
h
</pre><pre class="example">

</pre><pre class="example"># remove path
s/.*\///
</pre><pre class="example">

</pre><pre class="example"># do conversion only on filename
y/'$FROM'/'$TO'/
</pre><pre class="example">

</pre><pre class="example"># now line contains original path+file, while
# hold space contains the new filename
x
</pre><pre class="example">

</pre><pre class="example"># add converted file name to line, which now contains
# path/file-name\nconverted-file-name
G
</pre><pre class="example">

</pre><pre class="example"># check if converted file name is equal to original file name,
# if it is, do not print anything
/^.*\/\(.*\)\n\1/b
</pre><pre class="example">

</pre><pre class="example"># escape special characters for the shell
s/["$`\\]/\\&amp;/g
</pre><pre class="example">

</pre><pre class="example"># now, transform path/fromfile\n, into
# mv path/fromfile path/tofile and print it
s/^\(.*\/\)\(.*\)\n\(.*\)$/mv "\1\2" "\1\3"/p
</pre><pre class="example">

' | $apply_cmd
</pre></div>

<hr>
<a name="Print-bash-environment"></a>
<div class="header">
<p>
</p>
</div>
<a name="Print-bash-Environment"></a>
<h3 class="section">7.5 <code>bash</code>の環境変数をプリント</h3>

<p>このスクリプトは、Bourne-shellの<code> set </code>コマンドの出力からシェル関数の定義を取り除きます。
</p>
<div class="example">
<pre class="example">#!/bin/sh

</pre><pre class="example">set | sed -n '
:x
</pre><pre class="example">

</pre><pre class="example"># if no occurrence of ‘<samp>=()</samp>’ print and load next line
/=()/!{ p; b; }
/ () $/!{ p; b; }
</pre><pre class="example">

</pre><pre class="example"># これがFOO = "()"のようなvarである場合に備えて、
# functionsセクションの開始で行を保存する
h
</pre><pre class="example">

</pre><pre class="example"># 次の行に波括弧'{'がある場合、
# 関数の後には何も入っていないので終了します。
n
/^{/ q
</pre><pre class="example">

</pre><pre class="example"># print the old line
x; p
</pre><pre class="example">

</pre><pre class="example"># work on the new line now
x; bx
'
</pre></div>

<hr>
<a name="Reverse-chars-of-lines"></a>
<div class="header">
<p>
</p>
</div>
<a name="Reverse-Characters-of-Lines"></a>
<h3 class="section">7.6 行の文字を逆順にする</h3>

<p>このスクリプトは、行内の文字の位置を逆にするために使用できます。この手法は一度に2文字ずつ移動するため、より直感的な実装よりも高速です。
</p>
<p>ラベルの定義の前にある<code> tx </code>コマンドに注意してください。これは<code> t </code>コマンドによってテストされるフラグをリセットするためにしばしば必要とされます。
</p>
<p>想像力豊かな読者はこのスクリプトの用途を見つけるでしょう。例として、<code> banner </code>の出力を元に戻すことが挙げられます。<a name="DOCF10" href="#FOOT10"><sup>10</sup></a>
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

/../!b

</pre><pre class="example"># 行を反転する。ふたつの改行の間に行を埋め込み始める
s/^.*$/\
&amp;\
/
</pre><pre class="example">

</pre><pre class="example"># 最初の文字を最後に移動させる。正規表現は、マーカーの間に
# 0個または1個の文字が入るまでマッチします。
tx
:x
s/\(\n.\)\(.*\)\(.\n\)/\3\2\1/
tx
</pre><pre class="example">

</pre><pre class="example"># 改行マーカーを削除
s/\n//g
</pre></div>


<hr>
<a name="Text-search-across-multiple-lines"></a>
<div class="header">
<p>
</p>
</div>
<a name="Text-search-across-multiple-lines-1"></a>
<h3 class="section">7.7 複数行にわたるテキスト検索</h3>

<p>この節では、<code> N </code>および<code> D </code>コマンドを使用して、複数行にわたる連続した単語を検索します。「<a href="#Multiline-techniqu">複数行テクニック</a>」参照
</p>
<p>これらの例では、文書内で同じ単語が2回出現することを検出します。
</p>
<p>二重の単語を一行内で探すのは、GNU <code> grep </code>を使えば簡単で、それはGNU <code> sed </code>でも同じです。
</p>
<div class="example">
<pre class="example">$ cat two-cities-dup1.txt
It was the best of times,
it was the worst of times,
it was the&nbsp;the age of wisdom,
it was the age of foolishness,

$ grep -E '\b(\w+)\s+\1\b' two-cities-dup1.txt
it was the&nbsp;the age of wisdom,

$ grep -n -E '\b(\w+)\s+\1\b' two-cities-dup1.txt
3:it was the&nbsp;the age of wisdom,

$ sed -En '/\b(\w+)\s+\1\b/p' two-cities-dup1.txt
it was the&nbsp;the age of wisdom,

$ sed -En '/\b(\w+)\s+\1\b/{=;p}' two-cities-dup1.txt
3
it was the&nbsp;the age of wisdom,
</pre></div>

<ul>
<li> 正規表現 ‘<samp>\b\w+\s+</samp>’は、単語境界(‘<samp>\b</samp>’)を検索し、その後に1つ以上の単語文字(‘<samp>\w+</samp>’)の後に空白(‘<samp>\s+</samp>’)が続きます。「<a href="#regexp-extensions">正規表現</a>」参照

</li><li> 「<samp>（\ w +）</samp>」式の周囲に丸括弧'(...)'を追加すると、部分式が作成されます。正規表現パターン ‘<samp>(PATTERN)\s+\1</samp>’は、(丸括弧内の)部分式とそれに続く後方参照を、空白で区切って定義します。マッチした場合は、<var>PATTERN</var>が連続して2回繰り返されたことを意味します。「<a href="#Back_002dreferences-and-Subexpressions">後方参照と部分式</a>」参照。

</li><li> 両端に単語の境界表現(‘<samp>\b</samp>’)があると、部分的な単語にマッチしないことが保証されます(たとえば、‘<samp>the then</samp>’は目的とするマッチではありません)。

</li><li> <samp>-E</samp>オプションを使用すると、正規表現の文法が拡張され、丸括弧の前にバックスラッシュ'\'を追加する必要がなくなります。「<a href="#ERE-syntax">ERE文法</a>」参照。

</li></ul>

<p>二重の単語が2行にまたがる場合、<code>grep</code> と <code>sed</code> は行ごとに動作するので、上記の正規表現はそれらを見つけられません。
</p>
<p><code>D</code><code>N</code> および<code>D</code>コマンドを使用することで、<code>sed</code>は複数行に正規表現を適用できます(つまり、正規表現はパターンスペースに格納した複数行に作用します)。
</p>
<div class="example">
<pre class="example">$ cat two-cities-dup2.txt
It was the best of times, it was the
worst of times, it was the
the age of wisdom,
it was the age of foolishness,

$ sed -En '{N; /\b(\w+)\s+\1\b/{=;p} ; D}'  two-cities-dup2.txt
3
worst of times, it was the
the age of wisdom,
</pre></div>

<ul>
<li> <code>N</code>コマンドは、次の行をパターンスペースに追加します(したがって、すべてのサイクルで連続した2行が含まれるようにします)。

</li><li> 正規表現では、スペースと改行の両方に一致する単語区切り文字に‘<samp>\s+</samp>’を使用します。

</li><li> 正規表現が一致すると、パターンスペース全体が<code>p</code>でプリントされます。<samp> -n </samp>オプションのため、デフォルトでは行はプリントされません。

</li><li> <code> D </code>は最初の行をパターンスペースから削除(つまり最初の改行まで削除)し、次のサイクルに備えます。
</li></ul>

<p><code>tr -s</code> や <code>uniq</code> を使った別の解法については、<a href="https://gnu.org/s/coreutils/manual/html_node/Squeezing-and-deleting.html">https://gnu.org/s/coreutils/manual/html_node/Squeezing-and-deleting.html</a>のGNU <code>coreutils</code>マニュアルをご覧ください。
</p>
<hr>
<a name="Line-length-adjustment"></a>
<div class="header">
<p>
</p>
</div>
<a name="Line-length-adjustment-1"></a>
<h3 class="section">7.8 行の長さを揃える</h3>

<p>この節では、<code>N</code>および <code>D</code>コマンドを使用して複数行にわたる連続した単語を検索し、<code>b</code> コマンドを使用して分岐します。「<a href="#Multiline-techniqu">複数行テクニック</a>」、「<a href="#Branching-and-flow-control">分岐とフロー制御</a>」参照。
</p>
<p>この(多少工夫された)例は、以下の入力ファイルのテキストのフォーマッティングと行の折り返しを扱います。
</p>
<div class="example">
<pre class="example">$ cat two-cities-mix.txt
It was the best of times, it was
the worst of times, it
was the age of
wisdom,
it
was
the age
of foolishness,
</pre></div>

<p>次のプログラムは40文字で行を折り返します。
</p><div class="example">
<pre class="example">$ cat wrap40.sed
# outer loop
:x

# 改行と続く次の入力行をパターンスペースに追加
N

# パターンスペース内の全ての改行を削除
s/\n/ /g


# Inner loop
:y

# 最初の40文字の後ろに改行を挿入
s/(.{40,40})/\1\n/

# もしパターンスペースに改行があれば
# (すなわち、前の置換が改行を追加していれば)
/\n/ {
    # パターンスペースには改行があり -
    # 最初の改行までの内容をプリントします。
    P

   # 印刷した文字達と最初の改行を削除します
   s/.*\n//

   # ラベル'y'へ無条件ジャンプ - 内部ループの繰り返し
   by
 }

# パターンスペースに改行が無い - ラベル'x'へ無条件ジャンプ(外部ループ)
# そして次の入力行を読み込む
bx
</pre></div>



<p>以下は折り曲げられた出力です。
</p><div class="example">
<pre class="example">$ sed -E -f wrap40.sed two-cities-mix.txt
It was the best of times, it was the wor
st of times, it was the age of wisdom, i
t was the age of foolishness,
</pre></div>




<hr>
<a name="tac"></a>
<div class="header">
<p>
</p>
</div>
<a name="Reverse-Lines-of-Files"></a>
<h3 class="section">7.9 ファイルの行の順番を逆順にする</h3>

<p>これは、さまざまなUnixコマンドをエミュレートする、まったく役に立たない(それでも面白い)スクリプトのシリーズの始まりです。これは特に<code> tac </code>の動作に似ています。
</p>
<p>GNU <code> sed </code>以外の実装では、このスクリプトはすぐに内部バッファをオーバーフローさせるかもしれません。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

＃入力のすべての行を反転します。つまり、最初の行が最後になりました...

</pre><pre class="example"># 2行目以降、バッファ(前の行をすべて含む)は
# 現在の行に「追加」されるので、順序は逆になります。
1!G
</pre><pre class="example">

</pre><pre class="example"># 最終行に居るなら、作業終了したのです -- 全てをプリントします。
$ p
</pre><pre class="example">

</pre><pre class="example"># すべてを再びバッファに保存する
h
</pre></div>

<hr>
<a name="cat-_002dn"></a>
<div class="header">
<p>
</p>
</div>
<a name="Numbering-Lines"></a>
<h3 class="section">7.10 行番号を付ける</h3>

<p>このスクリプトは‘<samp>cat -n</samp>’を置き換えます。 実際、GNU <code>cat</code>とまったく同じフォーマットで出力します。
</p>
<p>もちろん、これはまったく役に立ちません。2つの理由があります。1つは誰かが既にC言語で書いためであり、2つ目は、次のBourneシェルスクリプトが同じ目的で使用でき、はるかに高速だからです。
</p>
<div class="example">
<pre class="example">#!/bin/sh
sed -e "=" $@ | sed -e '
  s/^/      /
  N
  s/^ *\(......\)\n/\1  /
'
</pre></div>

<p><code>sed</code>を使用して行番号を印刷し、次に<code>N</code>を使用して2行ずつグループ化します。もちろん、このスクリプトは以下に提示されているものほど多くは教えていません。
</p>
<p>インクリメントに使用されるアルゴリズムは両方のバッファーを使用するので、行はできるだけ早く印刷されてから廃棄されます。数字は分割されているので、変更された数字はバッファに入り、変更されていない数字はもう一方に入ります。 変更された桁は(<code>y</code>コマンドを使用して)単一のステップで変更されます。. 次の行の行番号が構成され、ホールドスペースに格納されて、次の反復で使用されます。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># 最初のラインでポンプを吸い込む
x
/^$/ s/^.*$/1/
</pre><pre class="example">

</pre><pre class="example"># パターンの前に正しい行番号を追加
G
h
</pre><pre class="example">

</pre><pre class="example"># Format it and print it
s/^/      /
s/^ *\(......\)\n/\1  /p
</pre><pre class="example">

</pre><pre class="example"># ホールドスペースから行番号を取得
# 次の行に数字を追加する場合0(ゼロ)を追加
g
s/\n.*$//
/^9*$/ s/^/0/
</pre><pre class="example">

</pre><pre class="example"># x によって、変更/未変更の数字を分ける
s/.9*$/x&amp;/
</pre><pre class="example">

</pre><pre class="example"># 変更した数字をホールドスペース内で保持
h
s/^.*x//
y/0123456789/1234567890/
x
</pre><pre class="example">

</pre><pre class="example"># 未変更の数字をパターンスペース内で保持
s/x.*$//
</pre><pre class="example">

</pre><pre class="example"># 新しい番号を作成し、Gが暗黙のうちに追加した改行を削除する
G
s/\n//
h
</pre></div>

<hr>
<a name="cat-_002db"></a>
<div class="header">
<p>
</p>
</div>
<a name="Numbering-Non_002dblank-Lines"></a>
<h3 class="section">7.11 空行以外の行に行番号を付ける</h3>

<p>'<samp> cat -b </samp>'をエミュレートすることは、 '<samp> cat -n </samp>'とほぼ同じです。どの行に番号を付け、どの行に番号を付けないかを選択するだけです。
</p>
<p>このスクリプトと前のスクリプトに共通する部分は、<code> sed </code>スクリプトを正しくコメントすることがどれほど重要かを敢えて示すためにコメント化されていません...
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">/^$/ {
  p
  b
}
</pre><pre class="example">

</pre><pre class="example"># Same as cat -n from now
x
/^$/ s/^.*$/1/
G
h
s/^/      /
s/^ *\(......\)\n/\1  /p
x
s/\n.*$//
/^9*$/ s/^/0/
s/.9*$/x&amp;/
h
s/^.*x//
y/0123456789/1234567890/
x
s/x.*$//
G
s/\n//
h
</pre></div>

<hr>
<a name="wc-_002dc"></a>
<div class="header">
<p>
</p>
</div>
<a name="Counting-Characters"></a>
<h3 class="section">7.12 文字数を数える</h3>

<p>このスクリプトは<code> sed </code>を使って算術演算を行う別の方法を示しています。この場合、私たちはおそらくもっと大きな数を追加しなければならないので、その実装を連続的なインクリメントで行うのはうまくいきそうにありません（そしておそらくこのスクリプトよりもさらに複雑になります）。
</p>
<p>この、別のアプローチは、数字を文字にマッピングすることです。これは、<code> sed </code>で実装されたそろばんのようなものです。'<samp> a </samp>'は1の位の数、 '<samp> b </samp>'は10の位の数などです。現在の行の文字数を1の位の数として追加してから、桁上がり(キャリー)を伝播します。 数十、数百などに。
</p>
<p>通常どおり、積算合計はホールドスペースに保持されます。
</p>
<p>最終行で、そろばん形式を10進数に戻します。多様性のために、これは80個の<code>s</code>コマンドではなくループで行われます。最初に1の位を変換し、数字から‘<samp>a</samp>’の並びを削除します。 それから、数十の位が‘<samp>a</samp>’の並びになるように文字をローテートさせ、文字がなくなるまで続けます。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Add n+1 a's to hold space (+1 is for the newline)
s/./a/g
H
x
s/\n/a/
</pre><pre class="example">

</pre><pre class="example"># Do the carry.  t's や b's は不要ですが...
# それらによってスピードアップが図れます
t a
: a;  s/aaaaaaaaaa/b/g; t b; b done
: b;  s/bbbbbbbbbb/c/g; t c; b done
: c;  s/cccccccccc/d/g; t d; b done
: d;  s/dddddddddd/e/g; t e; b done
: e;  s/eeeeeeeeee/f/g; t f; b done
: f;  s/ffffffffff/g/g; t g; b done
: g;  s/gggggggggg/h/g; t h; b done
: h;  s/hhhhhhhhhh//g
</pre><pre class="example">

</pre><pre class="example">: done
$!{
  h
  b
}
</pre><pre class="example">

# 最終行で数字に戻します。

</pre><pre class="example">: loop
/a/!s/[b-h]*/&amp;0/
s/aaaaaaaaa/9/
s/aaaaaaaa/8/
s/aaaaaaa/7/
s/aaaaaa/6/
s/aaaaa/5/
s/aaaa/4/
s/aaa/3/
s/aa/2/
s/a/1/
</pre><pre class="example">

</pre><pre class="example">: next
y/bcdefgh/abcdefg/
/[a-h]/ b loop
p
</pre></div>

<hr>
<a name="wc-_002dw"></a>
<div class="header">
<p>
</p>
</div>
<a name="Counting-Words"></a>
<h3 class="section">7.13 単語数を数える</h3>

<p>このスクリプトは、行の各単語が1つの ‘<samp>a</samp>’に変換されると、前のスクリプトとほぼ同じになります(前のスクリプトでは、各文字が ‘<samp>a</samp>’に変更されました)。
</p>
<p>本物の<code> wc </code>プログラムが '<samp> wc -c </samp>'のために最適化されたループを持っているのは興味深いですが、それらは文字よりもむしろ単語を数える方がはるかに遅いです。代わりに、このスクリプトのボトルネックは算術演算です。したがって、単語数を数えるほうが速くなります（小さい数を管理する必要はあります）。
</p>
<p>繰り返しますが、前のと共通部分は<code> sed </code>スクリプトにコメントすることの重要性を示すために敢えてコメントしていません
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># Convert words to a's
s/[ <kbd><span class="key">TAB</span></kbd>][ <kbd><span class="key">TAB</span></kbd>]*/ /g
s/^/ /
s/ [^ ][^ ]*/a /g
s/ //g
</pre><pre class="example">

</pre><pre class="example"># Append them to hold space
H
x
s/\n//
</pre><pre class="example">

</pre><pre class="example"># これ以降はwc -cと同じです。
/aaaaaaaaaa/!bx;   s/aaaaaaaaaa/b/g
/bbbbbbbbbb/!bx;   s/bbbbbbbbbb/c/g
/cccccccccc/!bx;   s/cccccccccc/d/g
/dddddddddd/!bx;   s/dddddddddd/e/g
/eeeeeeeeee/!bx;   s/eeeeeeeeee/f/g
/ffffffffff/!bx;   s/ffffffffff/g/g
/gggggggggg/!bx;   s/gggggggggg/h/g
s/hhhhhhhhhh//g
:x
$!{ h; b; }
:y
/a/!s/[b-h]*/&amp;0/
s/aaaaaaaaa/9/
s/aaaaaaaa/8/
s/aaaaaaa/7/
s/aaaaaa/6/
s/aaaaa/5/
s/aaaa/4/
s/aaa/3/
s/aa/2/
s/a/1/
y/bcdefgh/abcdefg/
/[a-h]/ by
p
</pre></div>

<hr>
<a name="wc-_002dl"></a>
<div class="header">
<p>
</p>
</div>
<a name="Counting-Lines"></a>
<h3 class="section">7.14 行数を数える</h3>

<p><code> sed </code>は私たちに無料で「<samp> wc -l </samp>」機能を提供してくれるので、今回はわざわざ変なことはしていません。見よ！
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf
$=
</pre></div>

<hr>
<a name="head"></a>
<div class="header">
<p>
</p>
</div>
<a name="Printing-the-First-Lines"></a>
<h3 class="section">7.15 最初の数行をプリントする</h3>

<p>このスクリプトはおそらく最も簡単で便利な<code> sed </code>スクリプトです。表示される行数は<code> q </code>コマンドの直前までです。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f
10q
</pre></div>

<hr>
<a name="tail"></a>
<div class="header">
<p>
</p>
</div>
<a name="Printing-the-Last-Lines"></a>
<h3 class="section">7.16 末尾の数行をプリントする</h3>

<p>最初の行ではなく最後の<var> n </var>行を印刷するのは、より複雑だけども可能ではあります。<var>n</var>は、スクリプト2行目の'!'(bang文字)の前に書いてあります(。
</p>
<p>このスクリプトは<code> tac </code>スクリプトと似ていますが、最終的な出力をホールドスペースに保持し、最後に出力するという点です。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">1!{; H; g; }
1,10 !s/[^\n]*\n//
$p
h
</pre></div>

<p>主に、スクリプトは10行のウィンドウを保持し、行を追加して最も古い行を削除することによってそれをスライドさせます（2行目の置換コマンドは<code> D </code>コマンドのように機能しますがループを再開しません）。
</p>
<p>「スライディングウィンドウ」技術は、効率的で複雑な<code> sed </code>スクリプトを書くための非常に強力な方法です。なぜなら、手動で実装した場合、<code> P </code>のようなコマンドは多くの作業を必要とするからです。
</p>
<p><code>N</code>、<code>P</code>、<code>D</code> コマンドに基づいたテクニックをこの章の残りの部分で十分に紹介するために、ここでは「スライディングウィンドウ」を使った<code>tail</code>を実装します。
</p>
<p>これは複雑に見えますが、実際の作業はさっきのスクリプトと同じです。ただし、適切な行数を入力した後は、行間の状態を維持するためにホールドスペースを使用せず、代わりに<code>N</code> と<code>D</code> を使用して一行でパターンスペースをスライドします。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example">1h
2,10 {; H; g; }
$q
1,9d
N
D
</pre></div>

<p>最初の10行の入力後、1行目、2行目、4行目が非アクティブになっていることに注意してください。その後、スクリプトはすべて、入力の最後の行で終了し、次の入力行をパターンスペースに追加して、最初の行を削除します。
</p>
<hr>
<a name="uniq"></a>
<div class="header">
<p>
</p>
</div>
<a name="Make-Duplicate-Lines-Unique"></a>
<h3 class="section">7.17 同一行を1つにまとめる</h3>

<p>これは<code> N </code>、<code> P </code>、および<code> D </code>コマンドを使用する技術の例の中で、おそらく習得が最も困難です。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f
h
</pre><pre class="example">

</pre><pre class="example">:b
# On the last line, print and exit
$b
N
/^\(.*\)\n\1$/ {
    # The two lines are identical.  効果を元に戻す - 
    # the n command.
    g
    bb
}
</pre><pre class="example">

</pre><pre class="example"># If the <code>N</code> command had added the last line, print and exit
$b
</pre><pre class="example">

</pre><pre class="example"># The lines are different; print the first and go
# back working on the second.
P
D
</pre></div>

<p>ご覧のとおり、<code> P </code>と<code> D </code>を使用して2行のウィンドウを管理しています。このテクニックは、高度な<code> sed </code>スクリプトでよく使われます。
</p>
<hr>
<a name="uniq-_002dd"></a>
<div class="header">
<p>
</p>
</div>
<a name="Print-Duplicated-Lines-of-Input"></a>
<h3 class="section">7.18 重複した行のみプリントする。</h3>

<p>このスクリプトは、 '<samp> uniq -d </samp>'のように、重複した行だけを出力します。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example">$b
N
/^\(.*\)\n\1$/ {
    # 重複行の最初の行を印刷する
    s/.*\n//
    p
</pre><pre class="example">

</pre><pre class="example">    # Loop until we get a different line
    :b
    $b
    N
    /^\(.*\)\n\1$/ {
        s/.*\n//
        bb
    }
}
</pre><pre class="example">

</pre><pre class="example"># 最後の行の後に重複を続けることはできません
$b
</pre><pre class="example">

</pre><pre class="example"># 別のものを見つけました。パターンスペース内にほっとく
# そしてトップに戻り、その重複をハンティングする。
D
</pre></div>

<hr>
<a name="uniq-_002du"></a>
<div class="header">
<p>
</p>
</div>
<a name="Remove-All-Duplicated-Lines"></a>
<h3 class="section">7.19 重複行を全て取り除く（重複してない行のみプリントする）</h3>

<p>このスクリプトは '<samp> uniq -u </samp>'のようにユニークな行だけを印刷します。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># 重複行を検索します---それまでは、見つけたものを印刷します。
$b
N
/^\(.*\)\n\1$/ !{
    P
    D
}
</pre><pre class="example">

</pre><pre class="example">:c
# Got two equal lines in pattern space.  
# ファイルの終わりで、単に終了します
$d
</pre><pre class="example">

</pre><pre class="example"># そうでなければ、私たちは<code> N </code>で行を読み続けます。
# find a different one
s/.*\n//
N
/^\(.*\)\n\1$/ {
    bc
}
</pre><pre class="example">

</pre><pre class="example"># 最後の重複行を削除し
# トップへ戻る
D
</pre></div>

<hr>
<a name="cat-_002ds"></a>
<div class="header">
<p>
</p>
</div>
<a name="Squeezing-Blank-Lines"></a>
<h3 class="section">7.20 連続する空白行を1行の空白行にする</h3>

<p>最後の例として、これは複雑さとスピードを増す3つのスクリプトです。これらは「<samp> cat -s </samp>」と同じ機能を実装しています。
</p>
<p>最初と最後に既に空行が1行以上会った場合、それぞれ空行1行だけは残さなければなりません。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># 空行だったら次の行を連結する
# Note there is a star in the regexp
:x
/^\n*$/ {
N
bx
}
</pre><pre class="example">

</pre><pre class="example"># 今、連続する'\n'を1つにする。無い時は何もしない
# s/^\(\n\)*/\1/ と同等
s/\n*/\
/
</pre></div>

<p>これはもう少し複雑で、最初に空の行をすべて削除します。最後に1行の空白行があったとしても、それは残ります。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -f

</pre><pre class="example"># 先行する全ての空行を削除
1,/^./{
/./!d
}
</pre><pre class="example">

</pre><pre class="example"># 空行であればそれを削除し、
# それに続く空行も同じです。
:x
/./!{
N
s/^\n$//
tx
}
</pre></div>

<p>これは先導する空行達と後続する空行達を削除します。それも最速です。ループは<code> n </code>と<code> b </code>で全部処理され、各行末で次のサイクルに移る通常の自動的な動作が全くありません。
</p>
<div class="example">
<pre class="example">#!/usr/bin/sed -nf

</pre><pre class="example"># 全ての(先導する)空白を削除
/./!d
</pre><pre class="example">

</pre><pre class="example"># ここに居る、すなわち空でない
:x
# それをプリント
p
# 次の入力行を得る
n
# 文字(列)があった?なら再びそれをプリントして, etc...
/./bx
</pre><pre class="example">

</pre><pre class="example"># 文字が無かった。つまり空行を得た
:z
# 次を読み込んで、ここが最終行の場合は、
# 後続の空行達は書き込みません
n
# 空かな？ならばそれを無視、そして次を取得...
# 全ての空行を削除
/./!bz
</pre><pre class="example">

</pre><pre class="example"># 全ての空行は削除/無視した。全く無くなった。しかし我々は空にしたい訳じゃない
# 我々は圧縮(squeeze)したいのだ。よって露骨に空行を挿入する。
i\
</pre><pre class="example">

bx
</pre></div>

<hr>
<a name="Limitations"></a>
<div class="header">
<p>
</p>
</div>
<a name="GNU-sed_0027s-Limitations-and-Non_002dlimitations"></a>
<h2 class="chapter">8 GNU <code>sed</code>の制限と、GNU <code>sed</code>で撤廃された制限</h2>

<a name="index-GNU-extensions_002c-unlimited-line-length"></a>
<a name="index-Portability_002c-line-length-limitations"></a>
<p>移植可能な<code> sed </code>スクリプトを書きたいという人は、(パターンスペースとホールドスペースのための)行の長さを4000バイト以下に制限する実装があることに注意してください。<small> POSIX </small>規格では、準拠した<code> sed </code>の実装で少なくとも8192バイトの行の長さをサポートすることを規定しています。GNU <code> sed </code>には行の長さに関する制限は組み込まれていません。 より多くの(仮想)メモリを<code>malloc()</code>できれば、好きなだけ行を注ぎ込んだり構築したりすることができます。
</p>
<p>ただし、再帰はサブパターンと不定の繰り返しを処理するために使用されます。これは、利用可能なスタックスペースが、特定のパターンで処理できるバッファのサイズを制限する可能性があることを意味します。
</p>

<hr>
<a name="Other-Resources"></a>
<div class="header">
<p>
</p>
</div>
<a name="Other-Resources-for-Learning-About-sed"></a>
<h2 class="chapter">9 <code>sed</code>を習得するためのこの文書以外の資料</h2>

<p>GNU <code>sed</code> の最新情報についてはこちら。<a href="https://www.gnu.org/software/sed/">https://www.gnu.org/software/sed/</a>
</p>
<p>一般的な質問や提案の送り先： <a href="mailto:sed-devel@gnu.org">sed-devel@gnu.org</a>(訳注：このMLに参加するには https://lists.gnu.org/mailman/listinfo/sed-devel のページ従って操作すると自分宛てに確認メールが届くのでそれに従って下さい)。過去の議論のメーリングリストアーカイブはこちら。<a href="https://lists.gnu.org/archive/html/sed-devel/">https://lists.gnu.org/archive/html/sed-devel/</a>.
</p>
<a name="index-Additional-reading-about-sed"></a>
<p>以下、<code> sed </code>（GNU <code> sed </code>とその他のバリエーションの両方）に関する資料ですこれらはGNU <code> sed </code>開発者によって保守されていないことに注意してください。
</p>
<ul>
<li>  sed <code>$HOME</code>: <a href="http://sed.sf.net">http://sed.sf.net</a>

</li><li>  sed FAQ: <a href="http://sed.sf.net/sedfaq.html">http://sed.sf.net/sedfaq.html</a>

</li><li> sed福袋: <a href="http://sed.sf.net/grabbag">http://sed.sf.net/grabbag</a>

</li><li> <code>sed-users</code> メーリングリストはSven Guckesが維持しています。 <a href="http://groups.yahoo.com/group/sed-users/">http://groups.yahoo.com/group/sed-users/</a> (注意これは GNU <code>sed</code> メーリングリストでは<em>ありません</em>)。

</li></ul>

<hr>
<a name="Reporting-Bugs"></a>
<div class="header">
<p>
</p>
</div>
<a name="Reporting-Bugs-1"></a>
<h2 class="chapter">10バグ報告</h2>

<a name="index-Bugs_002c-reporting"></a>
<p>バグ報告はこちらへ(もちろん英語で) <a href="mailto:bug-sed@gnu.org">bug-sed@gnu.org</a>. また、可能なかぎり報告本文に‘<samp>sed --version</samp>’の出力を含めて下さい。
</p>
<p>以下のようなバグレポートは送らないでください。
</p>
<div class="example">
<pre class="example"><i><i><span class="roman">while building frobme-1.3.4</span></i></i>
$ configure
error→ sed: file sedscr line 1: Unknown option to 's'
</pre></div>

<p>もしGNU <code> sed </code>があなたのお気に入りのパッケージを設定しないならば、特定の問題を識別して、独立したテストケースを作るために数分余分に時間をかけてください。Cコンパイラのような他のプログラムとは異なり、<code> sed </code>のためのそのようなテストケースを作ることは非常に簡単です。
</p>
<p>独立したテストケースには、テストを実行するために必要なすべてのデータと、問題を引き起こす<code> sed </code>の特定の呼び出しを含めます。独立したテストケースは短いほどいいです。テストケースの<code> sed </code>から「frobme-1.3.4を設定してみてください」というようなものを削除してはいけません。もちろん、それは基礎的なバグを探すのには十分な情報ですが、それは非常に役立つ技術情報というわけではありません。
</p>
<p>なお以下は俗に言う「既知のバグ」であって、再度再度報告して頂くようなバグではありません。
</p>
<dl compact="compact">
<dd><a name="N_005fcommand_005flast_005fline"></a></dd>
<dt>最終行での<code>N</code> コマンドの振る舞い</dt>
<dd><a name="index-Portability_002c-N-command-on-the-last-line"></a>
<a name="index-Non_002dbugs_002c-N-command-on-the-last-line"></a>

<p><code> sed </code>のほとんどのバージョンは、ファイルの最後の行で<code> N </code>コマンドが発行されると、何も表示せずに終了します。<code> -n </code>コマンドラインオプションが指定されていない限り、GNU <code> sed </code>は終了する前にパターンスペースを表示します。この選択は仕様によるものです。
</p>
<p>デフォルトの動作（GNU拡張、非POSIX準拠）：
</p><div class="example">
<pre class="example">$ seq 3 | sed N
1
2
3
</pre></div>
<p>POSIX準拠の動作を強制：
</p><div class="example">
<pre class="example">$ seq 3 | sed --posix N
1
2
</pre></div>

<p>たとえば、次の振る舞い
</p><div class="example">
<pre class="example">sed N foo bar
</pre></div>
<p>は、fooの行数が偶数か奇数かに依存します。<a name="DOCF12" href="#FOOT12"><sup>12</sup></a>. また、パターンマッチの後に続く数行を読むためのスクリプトを書くとき、伝統的な実装の<code> sed </code>はあなたに次のようなものを書くことを強いるでしょう。
</p><div class="example">
<pre class="example">/foo/{ $!N; $!N; $!N; $!N; $!N; $!N; $!N; $!N; $!N }
</pre></div>
<p>GNU sedでは代わりに次のように書ける
</p><div class="example">
<pre class="example">/foo/{ N;N;N;N;N;N;N;N;N; }
</pre></div>

<a name="index-POSIXLY_005fCORRECT-behavior_002c-N-command"></a>
<p>いずれにせよ、最も簡単な回避策は、従来の振る舞いに依存するスクリプトで<code> $ d; N </code>を使うか、または<code> POSIXLY_CORRECT </code>変数を空でない値に設定することです。
</p>
</dd>
<dt>正規表現文法破壊(バックスラッシュ問題)</dt>
<dd><a name="index-GNU-extensions_002c-to-basic-regular-expressions-5"></a>
<a name="index-Non_002dbugs_002c-regex-syntax-clashes"></a>
<p><code>sed</code> は <small>POSIX</small> 基本正規表現文法を使います。規格によると、いくつかのエスケープシーケンスの意味はこの文法では定義されていません。 <code> sed </code>の場合、<code>\|</code>、<code>\+</code>、 <code>\?</code>、<code>\`</code>、<code>\'</code>、<code>\&lt;</code>、 <code>\&gt;</code>、<code>\b</code>、<code>\B</code>、<code>\w</code>、 <code>\W</code> です。
</p>
<p><small> POSIX </small>基本正規表現を使用するすべてのGNUプログラムと同様に、<code> sed </code>はこれらのエスケープシーケンスを特殊文字として解釈します。<code>x\+</code> は、1つまたはそれ以上現れる‘<samp>x</samp>’にマッチします。. <code>abc\|def</code> は‘<samp>abc</samp>’または‘<samp>def</samp>’のいずれかにマッチします。
</p>
<p>これらの文法が問題を引き起こすのは他の<code>sed</code>の為に書かれたスクリプトを実行するときです。いくつかの<code>sed</code> プログラムは <code>\|</code> や <code>\+</code> は 文字<code>|</code> や <code>+</code> するものだと決めつけています。このようなスクリプトは、GNU <code> sed </code>のような現代的な<code> sed </code>の実装で使用する場合には、誤ったバックスラッシュを削除して修正する必要があります。
</p>
<p>一方、スクリプトによっては s|abc\|def||g を使用して、<code>abc</code>または<code>def</code>の<em>どちらかの</em>出現を削除します。これは<code> sed </code> 4.0.xまでは機能しましたが、新しいバージョンでは<code>abc|def</code>という文字列を削除するものとして解釈されます。POSIXによれば、これもまた未定義の振る舞いであり、この解釈は間違いなくより健全(robust)です。例えば、より古い<code>sed</code>では、スラッシュをエスケープする一般的なケースでは正規表現照合プログラムが <code>\/</code>を <code>/</code>として解析する必要がありました。 新しい振る舞いはこれを避けています、そしてこれは良いことです。正規表現マッチ機構は部分的にしか私たちの管理下にないからです。
</p>
<a name="index-GNU-extensions_002c-special-escapes-1"></a>
<p>さらに、このバージョンの<code> sed </code>では、スクリプトに印刷不可能な文字を挿入するための複数のエスケープ文字（そのうちのいくつかは複数文字）がサポートされています(<code>\a</code>, <code>\c</code>, <code>\d</code>, <code>\o</code>, <code>\r</code>, <code>\t</code>, <code>\v</code>, <code>\x</code>)。これらも他の<code> sed </code>用に書かれたスクリプトで同様の問題を引き起こす可能性があります。
</p>
</dd>
<dt><samp>-i</samp> が読み込み専用ファイルを壊す問題</dt>
<dd><a name="index-In_002dplace-editing"></a>
<a name="index-GNU-extensions_002c-in_002dplace-editing-1"></a>
<a name="index-Non_002dbugs_002c-in_002dplace-editing"></a>

<p>要するに、 '<samp> sed -i </samp>'を指定すると、読み取り専用ファイルの内容を削除できます。一般に、<samp> -i </samp>オプション(<a href="#Invoking-sed">起動</a>を参照)を使用すると、保護されているファイルを破壊できます。これはバグではなく、むしろUnixファイルシステムがどのように機能するかの結果です。
</p>
<p>ファイルに対する許可は、そのファイル内のデータに何が起こり得るかを示し、ディレクトリに対する許可は、そのディレクトリ内のファイルのリストに何が起こりうるかを示します。'<samp> sed -i </samp>'はすでにディスク上にあるファイルを書き込むために開くことはありません。そうではなく、一時的なファイルに対して操作し最終的に元の名前に変更されます。ファイルの名前を変更または削除すると、実際にはディレクトリの内容が変更されるため、操作はファイルの権限ではなくディレクトリの権限に依存します。 同じ理由で、<code> sed </code>は読み取り専用ディレクトリの書き込み可能なファイルに '-i'を使用させず、 '-i'がそのようなファイルに使用されるとハードリンクまたはシンボリックリンクを解除します。
</p>
</dd>
<dt><code>0a</code> が動作しない(エラーになる)問題</dt>
<dd><a name="index-0-address"></a>
<a name="index-GNU-extensions_002c-0-address-1"></a>
<a name="index-Non_002dbugs_002c-0-address"></a>

<p>行番号0の行は存在しません。0は、スクリプトの起動時に <code>0,/<var>RE</var>/</code>のようなアドレスをアクティブとして扱うためだけに使用される特殊なアドレスです。 <code>1,/abc/d</code>と書き、最初の行に ‘<samp>abc</samp>’という単語が含まれていると、アドレス範囲は少なくとも2行にわたる必要があるため（ファイルの終わりを除く）、その一致は無視されます。 しかし、おそらくあなたが望んでいたのは ‘<samp>abc</samp>’を含む最初の行まですべての行を削除することです。これは <code>0,/abc/d</code>で得られます。
</p>
</dd>
<dt><code>[a-z]</code> が大文字小文字を区別しない問題</dt>
<dd><a name="index-Non_002dbugs_002c-localization_002drelated"></a>

<p>あなたはロケールに関する問題に遭遇しています。POSIXは<code>[a-z]</code> に現在のロケールの照合順序を使用することを強制しています。C言語で言えば <code>strcmp(3)</code>の代わりに<code>strcoll(3)</code>を使用することを意味します。大/小文字を区別しない照合順を持つロケールもあれば、そうでないロケールもあります。
</p>
<p>別の問題は、<code>[a-z]</code> が照合記号を使おうとしていることです。これは、GNU sedを提供しているものをコンパイルするのではなく、GNU libcの正規表現マッチャーを使用して、GNUシステムを使用している場合にのみ発生します。たとえば、デンマーク語のロケールでは、正規表現 <code>^[a-z]$</code>は文字列 ‘<samp>aa</samp>’と一致します。これは、 ‘<samp>a</samp>’の後で、 ‘<samp>b</samp>’の前にある単一の照合記号だからです。 ‘<samp>ll</samp>’はスペイン語のロケールでも‘<samp>ij</samp>’のオランダ語のロケールでも同じように動作します。
</p>
<p>シェルスクリプトでバグを引き起こす可能性があるこれらの問題を回避するには、<code> LC_COLLATE </code>および<code> LC_CTYPE </code>環境変数を ‘<samp>C</samp>’に設定してください。
</p>
</dd>
<dt><code>s/.*//</code> がパターンスペースを全削除しない問題</dt>
<dd><a name="index-Non_002dbugs_002c-localization_002drelated-1"></a>
<a name="index-GNU-extensions_002c-emptying-pattern-space-1"></a>
<a name="index-Emptying-pattern-space-1"></a>

<p>これは入力ストリームが不正なマルチバイトつづりを含んでいると発生します。<small>POSIX</small>は、そのようなシーケンスは ‘<samp>.</samp>’と<em>一致しない</em>ことを強制しているので、 ‘<samp>s/.*//</samp>’はあなたが期待するようにパターンスペースを全削除しないでしょう。実際、ほとんどのマルチバイトロケール（UTF-8ロケールを含む）では、スクリプトの途中でsedのバッファを全削除することはできません。このため、GNU <code> sed </code>では、（zap用の）zコマンドが拡張機能として提供されています。
</p>
<p>シェルスクリプトでバグを引き起こす可能性があるこれらの問題を回避するには、<code> LC_COLLATE </code>および<code> LC_CTYPE </code>環境変数を ‘<samp>C</samp>’に設定してください。
</p></dd>
</dl>




<hr>
<a name="GNU-Free-Documentation-License"></a>
<div class="header">
<p>
</p>
</div>
<a name="GNU-Free-Documentation-License-1"></a>
<h2 class="appendix">Appendix A GNU Free Documentation License</h2>

<div align="center">Version 1.3, 3 November 2008

</div>

<div class="display">
<pre class="display">Copyright © 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="https://fsf.org/">https://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol start="0">
<li>  PREAMBLE



<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

</p>
<p>This License is a kind of “copyleft”, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

</p>
</li><li>  APPLICABILITY AND DEFINITIONS



<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The “Document”, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as “you”.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

</p>
<p>A “Modified Version” of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

</p>
<p>A “Secondary Section” is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document’s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

</p>
<p>The “Invariant Sections” are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

</p>
<p>The “Cover Texts” are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

</p>
<p>A “Transparent” copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not “Transparent” is called “Opaque”.

</p>
<p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input
format, SGML or XML using a publicly available
DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples
of transparent image formats include PNG, XCF and
JPG.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, SGML or
XML for which the DTD and/or processing tools are
not generally available, and the machine-generated HTML,
PostScript or PDF produced by some word processors for
output purposes only.

</p>
<p>The “Title Page” means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, “Title Page” means
the text near the most prominent appearance of the work’s title,
preceding the beginning of the body of the text.

</p>
<p>The “publisher” means any person or entity that distributes copies
of the Document to the public.

</p>
<p>A section “Entitled XYZ” means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as “Acknowledgements”,
“Dedications”, “Endorsements”, or “History”.)  To “Preserve the Title”
of such a section when you modify the Document means that it remains a
section “Entitled XYZ” according to this definition.

</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

</p>
</li><li>  VERBATIM COPYING



<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

</p>
</li><li>  COPYING IN QUANTITY



<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document’s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

</p>
</li><li>  MODIFICATIONS



<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

</p>
<ol type="A" start="1">
<li>  Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.



</li><li>  List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.



</li><li>  State on the Title page the name of the publisher of the
Modified Version, as the publisher.



</li><li>  Preserve all the copyright notices of the Document.



</li><li>  Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.



</li><li>  Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.



</li><li>  Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document’s license notice.



</li><li>  Include an unaltered copy of this License.



</li><li>  Preserve the section Entitled “History”, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled “History” in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.



</li><li>  Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the “History” section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.



</li><li>  For any section Entitled “Acknowledgements” or “Dedications”, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.



</li><li>  Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.



</li><li>  Delete any section Entitled “Endorsements”.  Such a section
may not be included in the Modified Version.



</li><li>  Do not retitle any existing section to be Entitled “Endorsements” or
to conflict in title with any Invariant Section.



</li><li>  Preserve any Warranty Disclaimers.

</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version’s license notice.
These titles must be distinct from any other section titles.

</p>
<p>You may add a section Entitled “Endorsements”, provided it contains
nothing but endorsements of your Modified Version by various
parties—for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

</p>
</li><li>  COMBINING DOCUMENTS



<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

</p>
<p>In the combination, you must combine any sections Entitled “History”
in the various original documents, forming one section Entitled
“History”; likewise combine any sections Entitled “Acknowledgements”,
and any sections Entitled “Dedications”.  You must delete all
sections Entitled “Endorsements.”

</p>
</li><li>  COLLECTIONS OF DOCUMENTS



<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

</p>
</li><li>  AGGREGATION WITH INDEPENDENT WORKS



<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an “aggregate” if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation’s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document’s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.

</p>
</li><li>  TRANSLATION



<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

</p>
<p>If a section in the Document is Entitled “Acknowledgements”,
“Dedications”, or “History”, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

</p>
</li><li>  TERMINATION



<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

</p>
</li><li>  FUTURE REVISIONS OF THIS LICENSE



<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="https://www.gnu.org/copyleft/">https://www.gnu.org/copyleft/</a>.

</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License “or any later version” applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy’s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

</p>
</li><li>  RELICENSING



<p>“Massive Multiauthor Collaboration Site” (or “MMC Site”) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
“Massive Multiauthor Collaboration” (or “MMC”) contained in the
site means any set of copyrightable works thus published on the MMC
site.

</p>
<p>“CC-BY-SA” means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

</p>
<p>“Incorporate” means to publish or republish a Document, in whole or
in part, as part of another Document.

</p>
<p>An MMC is “eligible for relicensing” if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

</p>
</li></ol>

<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h3 class="heading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

</p>
<div class="smallexample">
<pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the “with…Texts.” line with this:

</p>
<div class="smallexample">
<pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

</p>


<hr>
<a name="Concept-Index"></a>
<div class="header">
<p>
</p>
</div>
<a name="Concept-Index-1"></a>
<h2 class="unnumbered">概念索引</h2>

<p>これは<code>sed</code>コマンドとコマンドラインオプションの例外を除く、この文書で述べた全ての話題の索引です。
</p>
<table><tr><th valign="top">Jump to: &nbsp;  </th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>-</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_symbol-2"><b>0</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_symbol-3"><b>;</b></a> &nbsp; <br><a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-J"><b>J</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-X"><b>X</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-Z"><b>Z</b></a> &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">索引見出し</th><td>&nbsp;</td><th align="left"> 掲載節</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-1">-</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de_002c-example">-e とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de_002c-example-1">-e とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dexpression_002c-example">–expression とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df_002c-example">-f とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df_002c-example-1">-f とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfile_002c-example">–file とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002di_002c-example">-i とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn_002c-example">-n とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ds_002c-example">-s とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-2">0</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-0-address"><code>0</code> (ゼロ)アドレス</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_symbol-3">;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003b_002c-command-separator">;, コマンド区切り</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-a_002c-and-semicolons"><code>a</code>, and semicolons(';')</a></td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Additional-reading-about-sed">Additional reading about <code>sed</code></a>(sedについての追加の読み物):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Resources&lt;a0&gt;address range, example&lt;/a0&gt;">この文書以外の資料</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addr1_002c_002bN"><var>addr1</var>,+N</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addr1_002c_007eN"><var>addr1</var>,~N</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-address-range_002c-example">address range, example</a>(アドレス範囲とその例):</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-as-a-regular-expression">Address, as a regular expression</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-last-line">Address, last line</a>(アドレス、最終行):</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Address_002c-numeric">Address, numeric</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-excluding">addresses, excluding</a>(範囲「外」アドレス):</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Addresses_002c-in-sed-scripts">Addresses, in <code>sed</code> scripts</a>(sedスクリプトのアドレス):</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-negating">addresses, negating</a>(アドレス、その否定形):</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-numeric">addresses, numeric</a>(数値指定アドレス):</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-range">addresses, range</a>(範囲指定アドレス):</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-regular-expression">addresses, regular expression</a>(正規表現アドレス):</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addresses_002c-syntax">addresses, syntax</a>(アドレス、その文法):</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alphabetic-characters">alphabetic characters</a>(英字):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alphanumeric-characters">alphanumeric characters</a>(英数字):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-hold-space-to-pattern-space">Append hold space to pattern space</a>(パターンスペースにホールドスペースを追加):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-next-input-line-to-pattern-space">Append next input line to pattern space</a>(パターンスペースに次の入力行を追加する):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Append-pattern-space-to-hold-space">Append pattern space to hold space</a>(パターンスペースをホールドスペースに追加):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Appending-text-after-a-line">Appending text after a line</a>(行の後ろにテキストを追加する):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-b_002c-joining-lines-with">b, joining lines with</a>(線をつなぐ):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-b_002c-versus-t">b, versus t</a>(b V.S. t):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-back_002dreference">back-reference</a>(後方参照):</td><td>&nbsp;</td><td valign="top"><a href="#Back_002dreferences-and-Subexpressions"> 後方参照と部分式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Backreferences_002c-in-regular-expressions">Backreferences, in regular expressions</a>(正規表現中の後方参照):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-characters">blank characters</a>(空白文字):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bracket-expression">bracket expression</a>(ブラケット '['...']'表現):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-if-s_002f_002f_002f-failed">Branch to a label, if <code>s///</code> failed</a>(s/// コマンドが失敗したら指定のラベルに飛ぶ):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-if-s_002f_002f_002f-succeeded">Branch to a label, if <code>s///</code> succeeded</a>('s///'が成功したら指定のラベルへ分岐する。:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Branch-to-a-label_002c-unconditionally">Branch to a label, unconditionally</a>(無条件にラベルに飛ぶ):</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-branching-and-n_002c-N">branching and n, N</a>(分岐と n, N):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-branching_002c-infinite-loop">branching, infinite loop</a>(分岐と無限ループ):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-branching_002c-joining-lines">branching, joining lines</a>(分岐と行連結):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Buffer-spaces_002c-pattern-and-hold">Buffer spaces, pattern and hold</a>(パターンスペースとホールドスペース):</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">実行サイクル</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bugs_002c-reporting">Bugs, reporting</a>(報告されているバグ):</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-c_002c-and-semicolons"><code>c</code>, and semicolons</a>(cコマンドとセミコロン';'):</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-case-insensitive_002c-regular-expression">case insensitive, regular expression</a>(正規表現での大文字小文字の取扱い):</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Case_002dinsensitive-matching">Case-insensitive matching</a>(大文字小文字区別しない正規表現マッチング):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Caveat-_002d_002d_002d-_0023n-on-first-line">Caveat — #n on first line</a>(最初の行のコメント'#n'による「差し止め」):</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-character-class">character class</a>(文字クラス):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-character-classes">character classes</a>(文字クラス):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-classes-of-characters">classes of characters</a>(文字クラス):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Command-groups">Command groups</a>(グループ化'{'...'}'):</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Comments_002c-in-scripts">Comments, in scripts</a>(スクリプト内のコマンド):</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-branch">Conditional branch</a>(条件分岐):</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Conditional-branch-1">Conditional branch</a>(条件分岐):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-control-characters">control characters</a>(制御文字):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Copy-hold-space-into-pattern-space">Copy hold space into pattern space</a>(ホールドスペースをパターンスペースにコピーする):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Copy-pattern-space-into-hold-space">Copy pattern space into hold space</a>(パターンスペースをホールドスペースにコピーする):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cycle_002c-restarting">cycle, restarting</a>(次のサイクルの開始):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-d_002c-example"><code>d</code>とその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Delete-first-line-from-pattern-space">Delete first line from pattern space</a>(パターンスペース内の最初の行を削除する):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-digit-characters">digit characters</a>(数字):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Disabling-autoprint_002c-from-command-line">Disabling autoprint, from command line</a>(コマンドラインからの指定でサイクル間の自動プリントを無効にする):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-regular-expression">empty regular expression</a>(空の正規表現'//'):</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Emptying-pattern-space">Emptying pattern space</a>(パターンスペースの内容を空にする):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Emptying-pattern-space-1">Emptying pattern space</a>(パターンスペースの内容を空にする):</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Evaluate-Bourne_002dshell-commands">Evaluate Bourne-shell commands</a>(eval bashコマンド):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Evaluate-Bourne_002dshell-commands_002c-after-substitution">Evaluate Bourne-shell commands, after substitution</a>(置換後の eval bash コマンド):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example_002c-address-range">example, address range</a>(アドレス範囲例):</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example_002c-regular-expression">example, regular expression</a>(正規表現例):</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Exchange-hold-space-with-pattern-space">Exchange hold space with pattern space</a>(ホールドスペースの内容とパターンスペースの内容を交換):</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Excluding-lines">Excluding lines</a>(指定行「以外」):</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exit-status">exit status</a>(終了ステータス):</td><td>&nbsp;</td><td valign="top"><a href="#Exit-status"> 終了ステータス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exit-status_002c-example">exit statusとその例</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exit-status"> 終了ステータス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extended-regular-expressions_002c-choosing">Extended regular expressions, choosing</a>(拡張正規表現とそれによる選択):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Extended-regular-expressions_002c-syntax">Extended regular expressions, syntax</a>(拡張正規表現とその文法):</td><td>&nbsp;</td><td valign="top"><a href="#ERE-syntax">ERE文法</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-File-name_002c-printing">File name, printing</a>(現在の入力ファイル名をプリント):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Files-to-be-processed-as-input">Files to be processed as input</a>(入力として処理されるファイル):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Flow-of-control-in-scripts">Flow of control in scripts</a>(スクリプト内のフロー制御):</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Global-substitution">Global substitution</a>(包括的な置換):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstderr-file">GNU拡張:<samp>/dev/stderr</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstderr-file-1">GNU拡張:<samp>/dev/stderr</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdin-file">GNU拡張: <samp>/dev/stdin</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdin-file-1">GNU拡張: <samp>/dev/stdin</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file">GNU 拡張: <samp>/dev/stdout</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file-1">GNU 拡張: <samp>/dev/stdout</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-_002fdev_002fstdout-file-2">GNU 拡張: <samp>/dev/stdout</samp> ファイル指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0-address">GNU 拡張: <code>0</code>(ゼロ)アドレス</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0-address-1">GNU 拡張: <code>0</code>(ゼロ)アドレス</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-0_002caddr2-addressing">GNU 拡張: 0,<var>addr2</var> 範囲アドレス指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-addr1_002c_002bN-addressing">GNU 拡張: <var>addr1</var>,+<var>N</var> 範囲アドレス指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-addr1_002c_007eN-addressing">GNU 拡張: <var>addr1</var>,~<var>N</var> アドレス指定</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-branch-if-s_002f_002f_002f-failed">GNU 拡張: branch if <code>s///</code> failed</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-case-modifiers-in-s-commands">GNU 拡張: case modifiers in <code>s</code> commands</a>(sコマンドでの大文字小文字変換):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-checking-for-their-presence">GNU 拡張: checking for their presence</a>(sedがGNU拡張使えるかどうかチェック):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-debug">GNU 拡張: debug</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-disabling">GNU 拡張: disabling</a>(GNU拡張を無効にする):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-emptying-pattern-space">GNU 拡張: emptying pattern space</a>(パターンスペースを空にする):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-emptying-pattern-space-1">GNU 拡張: emptying pattern space</a>(パターンスペースを空にする):</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands">GNU 拡張: evaluating Bourne-shell commands</a>(eval bashコマンド):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-evaluating-Bourne_002dshell-commands-1">GNU 拡張: evaluating Bourne-shell commands</a>(eval bashコマンド):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-extended-regular-expressions">GNU 拡張: extended regular expressions</a>(拡張正規表現):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-g-and-number-modifier">GNU 拡張: <code>g</code> and <var>number</var> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-I-modifier">GNU extensions, <code>I</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-I-modifier-1">GNU extensions, <code>I</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-in_002dplace-editing">GNU拡張, in-place editing</a>(入力ファイル書き換え):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-in_002dplace-editing-1">GNU拡張, in-place editing</a>(入力ファイル書き換え):</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-M-modifier">GNU拡張, <code>M</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-M-modifier-1">GNU拡張, <code>M</code> modifier</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-modifiers-and-the-empty-regular-expression">GNU拡張, modifiers and the empty regular expression</a>(空の正規表現とフラグ):</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-n_007em-addresses">GNU拡張, ‘<samp><var>n</var>~<var>m</var></samp>’ アドレス</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-quitting-silently">GNU拡張, quitting silently</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-R-command">GNU拡張, <code>R</code> コマンド</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-reading-a-file-a-line-at-a-time">GNU拡張, reading a file a line at a time</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-returning-an-exit-code">GNU拡張, returning an exit code</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-returning-an-exit-code-1">GNU拡張, returning an exit code</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-setting-line-length">GNU拡張, setting line length</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-escapes">GNU拡張, special escapes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Escapes">エスケープ</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-escapes-1">GNU拡張, special escapes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-special-two_002daddress-forms">GNU拡張, special two-address forms</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-subprocesses">GNU拡張, subprocesses</a>:(正規表現部分式)</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-subprocesses-1">GNU拡張, subprocesses</a>:(正規表現部分式)</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions">GNU拡張, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#BRE-syntax">BRE文法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-1">GNU拡張, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#BRE-syntax">BRE文法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-2">GNU拡張, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#BRE-syntax">BRE文法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-3">GNU拡張, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#BRE-syntax">BRE文法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-4">GNU拡張, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#BRE-syntax">BRE文法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-to-basic-regular-expressions-5">GNU拡張, to basic regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands">GNU拡張, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-1">GNU拡張, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-2">GNU拡張, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-two-addresses-supported-by-most-commands-3">GNU拡張, two addresses supported by most commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-unlimited-line-length">GNU拡張, unlimited line length</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Limitations">制限</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GNU-extensions_002c-writing-first-line-to-a-file">GNU拡張, writing first line to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Goto_002c-in-scripts">Goto, in scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-graphic-characters">graphic characters</a>(グラフィックキャラクタとは):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Greedy-regular-expression-matching">Greedy regular expression matching</a>(正規表現の貪欲マッチング):</td><td>&nbsp;</td><td valign="top"><a href="#BRE-syntax">BRE文法</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Grouping-commands">Grouping commands</a>(sedコマンドのグループ化):</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hexadecimal-digits">hexadecimal digits</a>(16進数):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-appending-from-pattern-space">Hold space, appending from pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-appending-to-pattern-space">Hold space, appending to pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-copy-into-pattern-space">Hold space, copy into pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-copying-pattern-space-into">Hold space, copying pattern space into</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-definition">Hold space, definition</a>(ホールドスペースとは):</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">実行サイクル</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Hold-space_002c-exchange-with-pattern-space">Hold space, exchange with pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-i_002c-and-semicolons"><code>i</code>, and semicolons(';')</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing">In-place editing</a>(入力ファイル書き換え):</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing_002c-activating">In-place editing, activating</a>(その内部動作):</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-In_002dplace-editing_002c-Perl_002dstyle-backup-file-names">In-place editing, Perl-style backup file names</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-infinite-loop_002c-branching">infinite loop, branching</a>(無限ループ、分岐):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Inserting-text-before-a-line">Inserting text before a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-J">J</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-joining-lines-with-branching">joining lines with branching</a>(行連結と分岐):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-joining-quoted_002dprintable-lines">joining quoted-printable lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-labels">labels</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Labels_002c-in-scripts">Labels, in scripts</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Last-line_002c-selecting">Last line, selecting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-length_002c-setting">Line length, setting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-length_002c-setting-1">Line length, setting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-number_002c-printing">Line number, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line-selection">Line selection</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-by-number">Line, selecting by number</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-by-regular-expression-match">Line, selecting by regular expression match</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Line_002c-selecting-last">Line, selecting last</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-List-pattern-space">List pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lower_002dcase-letters">lower-case letters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Mixing-g-and-number-modifiers-in-the-s-command">Mixing <code>g</code> and <var>number</var> modifiers in the <code>s</code> command</a>(sコマンドのgやnumberフラグの混在):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-files">multiple files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-sed-commands">multiple <code>sed</code> commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-n_002c-and-branching">n, and branching</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-N_002c-and-branching">N, and branching</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-named-character-classes">named character classes</a>(名前付き文字クラス):</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-newline_002c-command-separator">newline, command separator</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Next-input-line_002c-append-to-pattern-space">Next input line, append to pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Next-input-line_002c-replace-pattern-space-with">Next input line, replace pattern space with</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-0-address">Non-bugs(それはバグじゃない), <code>0</code> address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-in_002dplace-editing">Non-bugs(それはバグじゃない), in-place editing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-localization_002drelated">Non-bugs(それはバグじゃない), localization-related</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-localization_002drelated-1">Non-bugs(それはバグじゃない), localization-related</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-N-command-on-the-last-line">Non-bugs(それはバグじゃない), <code>N</code> command on the last line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Non_002dbugs_002c-regex-syntax-clashes">Non-bugs(それはバグじゃない), regex syntax clashes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numeric-addresses">numeric addresses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numeric-characters">numeric characters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-omitting-labels">omitting labels</a>(ラベルの省略):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output">output</a>(出力):</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output_002c-suppressing">output, suppressing</a>(出力の抑制):</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-p_002c-example">p, example</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-paragraphs_002c-processing">paragraphs, processing</a>(段落処理):</td><td>&nbsp;</td><td valign="top"><a href="#Multiline-techniqu">複数行テクニック</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parameters_002c-script">parameters, script</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Parenthesized-substrings">Parenthesized substrings</a>(括弧で囲まれた部分文字列):</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Pattern-space_002c-definition">Pattern space, definition</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">実行サイクル</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-comments">Portability, comments</a>(コメントの移植性):</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-line-length-limitations">Portability, line length limitations</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Limitations">制限</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Portability_002c-N-command-on-the-last-line">Portability, <code>N</code> command on the last line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-bracket-expressions"><code>POSIXLY_CORRECT</code> behavior, bracket expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-enabling"><code>POSIXLY_CORRECT</code> behavior, enabling</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-escapes"><code>POSIXLY_CORRECT</code> behavior, escapes</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Escapes">エスケープ</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-POSIXLY_005fCORRECT-behavior_002c-N-command"><code>POSIXLY_CORRECT</code> behavior, <code>N</code> command</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Reporting-Bugs">バグ報告</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Print-first-line-from-pattern-space">Print first line from pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-printable-characters">printable characters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-file-name">Printing file name</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-line-number">Printing line number</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Printing-text-unambiguously">Printing text unambiguously</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-processing-paragraphs">processing paragraphs</a>(段落処理):</td><td>&nbsp;</td><td valign="top"><a href="#Multiline-techniqu">複数行テクニック</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-punctuation-characters">punctuation characters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q_002c-example">Q, example</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exit-status"> 終了ステータス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-q_002c-example"><code>q</code>, example</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Quitting">Quitting</a>(sedの終了):</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Quitting-1">Quitting</a>(sedの終了):</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quoted_002dprintable-lines_002c-joining">quoted-printable lines, joining</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-range-addresses">range addresses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-range-expression">range expression</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Range-of-lines">Range of lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Range-with-start-address-of-zero">Range with start address of zero</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-next-input-line">Read next input line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-text-from-a-file">Read text from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Read-text-from-a-file-1">Read text from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regex-addresses-and-input-lines">regex addresses and input lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regex-addresses-and-pattern-space">regex addresses and pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-expression-addresses">regular expression addresses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-expression_002c-example">regular expression, example</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replace-hold-space-with-copy-of-pattern-space">Replace hold space with copy of pattern space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replace-pattern-space-with-copy-of-hold-space">Replace pattern space with copy of hold space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-all-text-matching-regexp-in-a-line">Replacing all text matching regexp in a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-only-nth-match-of-regexp-in-a-line">Replacing only <var>n</var>th match of regexp in a line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Replacing-selected-lines-with-other-text">Replacing selected lines with other text</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Requiring-GNU-sed">Requiring GNU <code>sed</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-restarting-a-cycle">restarting a cycle</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Sandbox-mode">Sandbox mode</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-script-parameter">script parameter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script-structure">Script structure</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-from-a-file">Script, from a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-from-command-line">Script, from command line</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-commands-syntax"><code>sed</code> commands syntax</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-commands_002c-multiple"><code>sed</code> commands, multiple</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sed-script-structure"><code>sed</code> script structure</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-lines-to-process">Selecting lines to process</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numeric-Addresses">数値指定アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Selecting-non_002dmatching-lines">Selecting non-matching lines</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Addresses-overview"> アドレス概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-semicolons_002c-command-separator">semicolons, command separator</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Several-lines_002c-selecting">Several lines, selecting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slash-character_002c-in-regular-expressions">Slash character, in regular expressions</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regexp-Addresses">正規表現アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-space-characters">space characters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Spaces_002c-pattern-and-hold">Spaces, pattern and hold</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Execution-Cycle">実行サイクル</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Special-addressing-forms">Special addressing forms</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-input">standard input</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Standard-input_002c-processing-as-input">Standard input, processing as input</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-output">standard output</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stdin">stdin</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stdout">stdout</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stream-editor">Stream editor</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">はじめに</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-subexpression">subexpression</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Back_002dreferences-and-Subexpressions"> 後方参照と部分式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subprocesses">Subprocesses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Subprocesses-1">Subprocesses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Substitution-of-text_002c-options">Substitution of text, options</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-suppressing-output">suppressing output</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview"> 概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax_002c-addresses">syntax, addresses</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax_002c-sed-commands">syntax, <code>sed</code> commands</a>:</td><td>&nbsp;</td><td valign="top"><a href="#sed-script-overview">sedスクリプト概要</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-t_002c-joining-lines-with">t, joining lines with</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-t_002c-versus-b">t, versus b</a>(t V.S. b):</td><td>&nbsp;</td><td valign="top"><a href="#Branching-and-flow-control">分岐とフロー制御</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-appending">Text, appending</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-deleting">Text, deleting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-insertion">Text, insertion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-printing">Text, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-printing-after-substitution">Text, printing after substitution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text_002c-writing-to-a-file-after-substitution">Text, writing to a file after substitution</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transliteration">Transliteration</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unbuffered-I_002fO_002c-choosing">Unbuffered I/O, choosing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-upper_002dcase-letters">upper-case letters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Usage-summary_002c-printing">Usage summary, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Version_002c-printing">Version, printing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-whitespace-characters">whitespace characters</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Working-on-separate-files">Working on separate files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Write-first-line-to-a-file">Write first line to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Write-to-a-file">Write to a file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-xdigit-class">xdigit class</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-Z">Z</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Zero_002c-as-range-start-address">Zero, as range start address</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Range-Addresses"> 範囲アドレス</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp;  </th><td><a class="summary-letter" href="#Concept-Index_cp_symbol-1"><b>-</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_symbol-2"><b>0</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_symbol-3"><b>;</b></a> &nbsp; <br><a class="summary-letter" href="#Concept-Index_cp_letter-A"><b>A</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-B"><b>B</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-E"><b>E</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-F"><b>F</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-G"><b>G</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-H"><b>H</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-I"><b>I</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-J"><b>J</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-N"><b>N</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-P"><b>P</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-Q"><b>Q</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-U"><b>U</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-W"><b>W</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-X"><b>X</b></a> &nbsp; <a class="summary-letter" href="#Concept-Index_cp_letter-Z"><b>Z</b></a> &nbsp; 
</td></tr></table>

<hr>
<a name="Command-and-Option-Index"></a>
<div class="header">
<p>
</p>
</div>
<a name="Command-and-Option-Index-1"></a>
<h2 class="unnumbered">sedコマンドとそのオプションの索引</h2>

<p>全ての<code>sed</code> コマンドとコマンドラインオプションのアルファベット順リストです。
</p>
<table><tr><th valign="top">Jump to: &nbsp;  </th><td><a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-1"><b>#</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-2"><b>-</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-3"><b>:</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-4"><b>=</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-5"><b>{</b></a> &nbsp; <br><a class="summary-letter" href="#Command-and-Option-Index_fn_letter-A"><b>A</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-B"><b>B</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-C"><b>C</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-D"><b>D</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-E"><b>E</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-F"><b>F</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-G"><b>G</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-H"><b>H</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-I"><b>I</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-L"><b>L</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-N"><b>N</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-P"><b>P</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Q"><b>Q</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-R"><b>R</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-S"><b>S</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-T"><b>T</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-U"><b>U</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-V"><b>V</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-W"><b>W</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-X"><b>X</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Y"><b>Y</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Z"><b>Z</b></a> &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">索引見出し</th><td>&nbsp;</td><th align="left"> 掲載節</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-1">#</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023-_0028comments_0029"><code># (コメント)</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-2">-</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dbinary"><code>--binary</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002ddebug"><code>--debug</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dexpression"><code>--expression</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfile"><code>--file</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dfollow_002dsymlinks"><code>--follow-symlinks</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dhelp"><code>--help</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002din_002dplace"><code>--in-place</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dline_002dlength"><code>--line-length</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dnull_002ddata"><code>--null-data</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dposix"><code>--posix</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dquiet"><code>--quiet</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dregexp_002dextended"><code>--regexp-extended</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dsandbox"><code>--sandbox</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dseparate"><code>--separate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dsilent"><code>--silent</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dunbuffered"><code>--unbuffered</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dversion"><code>--version</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002d_002dzero_002dterminated"><code>--zero-terminated</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002db"><code>-b</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002de"><code>-e</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dE"><code>-E</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002df"><code>-f</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002di"><code>-i</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dl"><code>-l</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn"><code>-n</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dn_002c-forcing-from-within-a-script"><code>-n, スクリプト内で強制する</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dr"><code>-r</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ds"><code>-s</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002du"><code>-u</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002dz"><code>-z</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Options"> コマンドラインオプション</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-3">:</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003a-_0028label_0029-command"><code>: (label) ラベルコマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-4">=</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003d-_0028print-line-number_0029-command"><code>= 行番号プリントコマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_symbol-5">{</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_007b_007d-command-grouping"><code>{} コマンドグループ化</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-a-_0028append-text-lines_0029-command"><code>a (append text lines;テキスト行追加)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alnum-character-class"><code>alnum <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alpha-character-class"><code>alpha <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-b-_0028branch_0029-command"><code>b (branch;分岐)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blank-character-class"><code>blank <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-c-_0028change-to-text-lines_0029-command"><code>c (change to text lines;テキスト行変更)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cntrl-character-class"><code>cntrl <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-D-_0028delete-first-line_0029-command"><code>D (delete first line;最初の行を削除)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-d-_0028delete_0029-command"><code>d (delete)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-digit-character-class"><code>digit <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-e-_0028evaluate_0029-command"><code>e (evaluate;eval)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-F-_0028File-name_0029-command"><code>F (File name)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-G-_0028appending-Get_0029-command"><code>G (appending Get)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-g-_0028get_0029-command"><code>g (get)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-graph-character-class"><code>graph <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-H-_0028append-Hold_0029-command"><code>H (append Hold)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-h-_0028hold_0029-command"><code>h (hold)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-i-_0028insert-text-lines_0029-command"><code>i (insert text lines)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-l-_0028list-unambiguously_0029-command"><code>l (list unambiguously;非表示文字も目に見えるようにリストする)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lower-character-class"><code>lower <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-N-_0028append-Next-line_0029-command"><code>N (append Next line)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-n-_0028next_002dline_0029-command"><code>n (next-line)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-P-_0028print-first-line_0029-command"><code>P (print first line)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-p-_0028print_0029-command"><code>p (print)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-print-character-class"><code>print <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-punct-character-class"><code>punct <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-q-_0028quit_0029-command"><code>q (quit;終了)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Common-Commands">一般コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Q-_0028silent-Quit_0029-command"><code>Q (silent Quit)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-r-_0028read-file_0029-command"><code>r (read file)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-R-_0028read-line_0029-command"><code>R (read line)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-s-command_002c-option-flags"><code>s コマンド、オプションフラグ</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-_0022s_0022-Command">The "s" Command</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-space-character-class"><code>space <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-T-_0028test-and-branch-if-failed_0029-command"><code>T (test が失敗したら分岐する)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-t-_0028test-and-branch-if-successful_0029-command"><code>t (test が成功したら分岐する)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programming-Commands">プログラミングコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-upper-character-class"><code>upper <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-v-_0028version_0029-command"><code>v (version)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-w-_0028write-file_0029-command"><code>w (write file)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-W-_0028write-first-line_0029-command"><code>W (write first line)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-x-_0028eXchange_0029-command"><code>x (eXchange)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-xdigit-character-class"><code>xdigit <span class="roman">文字クラス</span></code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character-Classes-and-Bracket-Expressions"> 文字クラスと角括弧式</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Y">Y</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-y-_0028transliterate_0029-command"><code>y (変換)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-Commands">他のコマンド</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Command-and-Option-Index_fn_letter-Z">Z</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-z-_0028Zap_0029-command"><code>z (Zap)コマンド</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extended-Commands">拡張コマンド達</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp;  </th><td><a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-1"><b>#</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-2"><b>-</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-3"><b>:</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-4"><b>=</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_symbol-5"><b>{</b></a> &nbsp; <br><a class="summary-letter" href="#Command-and-Option-Index_fn_letter-A"><b>A</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-B"><b>B</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-C"><b>C</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-D"><b>D</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-E"><b>E</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-F"><b>F</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-G"><b>G</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-H"><b>H</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-I"><b>I</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-L"><b>L</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-N"><b>N</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-P"><b>P</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Q"><b>Q</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-R"><b>R</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-S"><b>S</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-T"><b>T</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-U"><b>U</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-V"><b>V</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-W"><b>W</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-X"><b>X</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Y"><b>Y</b></a> &nbsp; <a class="summary-letter" href="#Command-and-Option-Index_fn_letter-Z"><b>Z</b></a> &nbsp; 
</td></tr></table>

<a name="SEC_Contents"></a>
<h2 class="contents-heading">目次</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1 はじめに</a></li>
  <li><a name="toc-Running-sed" href="#Invoking-sed">2 sedの実行</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-1" href="#Overview">2.1 概要</a></li>
    <li><a name="toc-Command_002dLine-Options-1" href="#Command_002dLine-Options">2.2 コマンドラインオプション</a></li>
    <li><a name="toc-Exit-status-1" href="#Exit-status">2.3 終了ステータス</a></li>
  </ul></li>
  <li><a name="toc-sed-scripts-1" href="#sed-scripts">3 <code>sed</code>スクリプト</a>
  <ul class="no-bullet">
    <li><a name="toc-sed-script-overview-1" href="#sed-script-overview">3.1 <code>sed</code>スクリプト概要</a></li>
    <li><a name="toc-sed-commands-summary" href="#sed-commands-list">3.2 <code>sed</code>コマンド要約</a></li>
    <li><a name="toc-The-s-Command" href="#The-_0022s_0022-Command">3.3 <code>s</code> コマンド</a></li>
    <li><a name="toc-Often_002dUsed-Commands" href="#Common-Commands">3.4 よく使われるコマンド群</a></li>
    <li><a name="toc-Less-Frequently_002dUsed-Commands" href="#Other-Commands">3.5 あまり使われないコマンド群</a></li>
    <li><a name="toc-Commands-for-sed-gurus" href="#Programming-Commands">3.6 <code>sed</code>導師のためのコマンド群</a></li>
    <li><a name="toc-Commands-Specific-to-GNU-sed" href="#Extended-Commands">3.7 GNU <code>sed</code> 固有のコマンド</a></li>
    <li><a name="toc-Multiple-commands-syntax-1" href="#Multiple-commands-syntax">3.8 複数コマンド文法</a>
    <ul class="no-bullet">
      <li><a name="toc-Commands-Requiring-a-newline" href="#Commands-Requiring-a-newline">3.8.1 sedコマンドに改行が必要な時</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Addresses_003a-selecting-lines" href="#sed-addresses">4 アドレス：行を選択する。</a>
  <ul class="no-bullet">
    <li><a name="toc-Addresses-overview-1" href="#Addresses-overview">4.1 アドレス概要</a></li>
    <li><a name="toc-Selecting-lines-by-numbers" href="#Numeric-Addresses">4.2 数による行の選択</a></li>
    <li><a name="toc-selecting-lines-by-text-matching" href="#Regexp-Addresses">4.3 テキストマッチによる対象行選択</a></li>
    <li><a name="toc-Range-Addresses-1" href="#Range-Addresses">4.4 範囲アドレス</a></li>
  </ul></li>
  <li><a name="toc-Regular-Expressions_003a-selecting-text" href="#sed-regular-expressions">5 正規表現: テキストの選択</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-of-regular-expression-in-sed" href="#Regular-Expressions-Overview">5.1 <code>sed</code>の正規表現の概要</a></li>
    <li><a name="toc-Basic-_0028BRE_0029-and-extended-_0028ERE_0029-regular-expression" href="#BRE-vs-ERE">5.2 基本正規表現(basic regular expression;BRE)と拡張正規表現(extended regular expression;ERE)</a></li>
    <li><a name="toc-Overview-of-basic-regular-expression-syntax" href="#BRE-syntax">5.3 基本正規表現文法概要</a></li>
    <li><a name="toc-Overview-of-extended-regular-expression-syntax" href="#ERE-syntax">5.4 拡張正規表現文法概要</a></li>
    <li><a name="toc-Character-Classes-and-Bracket-Expressions-1" href="#Character-Classes-and-Bracket-Expressions">5.5 文字クラスと角括弧式</a></li>
    <li><a name="toc-regular-expression-extensions" href="#regexp-extensions">5.6 正規表現拡張</a></li>
    <li><a name="toc-Back_002dreferences-and-Subexpressions-1" href="#Back_002dreferences-and-Subexpressions">5.7 後方参照と部分式</a></li>
    <li><a name="toc-Escape-Sequences-_002d-specifying-special-characters" href="#Escapes">5.8 エスケープシーケンス - 特殊文字の指定</a>
    <ul class="no-bullet">
      <li><a name="toc-Escaping-Precedence" href="#Escaping-Precedence">5.8.1 エスケープ文字の打ち消し</a></li>
    </ul></li>
    <li><a name="toc-Multibyte-characters-and-Locale-Considerations" href="#Locale-Considerations">5.9 マルチバイト文字とロケールに関する考慮事項</a>
    <ul class="no-bullet">
      <li><a name="toc-Invalid-multibyte-characters" href="#Invalid-multibyte-characters">5.9.1 不正なマルチバイト文字</a></li>
      <li><a name="toc-Upper_002fLower-case-conversion" href="#Upper_002fLower-case-conversion">5.9.2 (英語の)大文字小文字変換</a></li>
      <li><a name="toc-Multibyte-regexp-character-classes" href="#Multibyte-regexp-character-classes">5.9.3 マルチバイト正規表現文字クラス</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Advanced-sed_003a-cycles-and-buffers" href="#advanced-sed">6 <code>sed</code>の高度な話題: サイクルとバッファ</a>
  <ul class="no-bullet">
    <li><a name="toc-How-sed-Works" href="#Execution-Cycle">6.1 <code>sed</code>はどのように動いているか</a></li>
    <li><a name="toc-Hold-and-Pattern-Buffers-1" href="#Hold-and-Pattern-Buffers">6.2 ホールド用とパターン用のバッファ</a></li>
    <li><a name="toc-Multiline-techniques-_002d-using-D_002cG_002cH_002cN_002cP-to-process-multiple-lines" href="#Multiline-techniqu">6.3 複数行テクニック - D,G,H,N,P コマンドで複数行処理</a></li>
    <li><a name="toc-Branching-and-Flow-Control" href="#Branching-and-flow-control">6.4 分岐と制御構文</a>
    <ul class="no-bullet">
      <li><a name="toc-Branching-and-Cycles" href="#Branching-and-Cycles">6.4.1 分岐とサイクル</a></li>
      <li><a name="toc-Branching-example_003a-joining-lines" href="#Branching-example_003a-joining-lines">6.4.2 分岐例: 行連結</a></li>
    </ul></li>
  </ul></li>
  <li><a name="toc-Some-Sample-Scripts" href="#例">7 スクリプト例をいくつか</a>
  <ul class="no-bullet">
    <li><a name="toc-Joining-lines-1" href="#Joining-lines">7.1行連結</a></li>
    <li><a name="toc-Centering-Lines" href="#Centering-lines">7.2 センタリング</a></li>
    <li><a name="toc-Increment-a-Number" href="#Increment-a-number">7.3 数のインクリメント</a></li>
    <li><a name="toc-Rename-Files-to-Lower-Case" href="#Rename-files-to-lower-case">7.4 ファイル名を小文字にする</a></li>
    <li><a name="toc-Print-bash-Environment" href="#Print-bash-environment">7.5 <code>bash</code>の環境変数をプリント</a></li>
    <li><a name="toc-Reverse-Characters-of-Lines" href="#Reverse-chars-of-lines">7.6 行の文字を逆順にする</a></li>
    <li><a name="toc-Text-search-across-multiple-lines-1" href="#Text-search-across-multiple-lines">7.7 複数行にわたるテキスト検索</a></li>
    <li><a name="toc-Line-length-adjustment-1" href="#Line-length-adjustment">7.8 行の長さを揃える</a></li>
    <li><a name="toc-Reverse-Lines-of-Files" href="#tac">7.9 ファイルの行の順番を逆順にする</a></li>
    <li><a name="toc-Numbering-Lines" href="#cat-_002dn">7.10 行番号を付ける</a></li>
    <li><a name="toc-Numbering-Non_002dblank-Lines" href="#cat-_002db">7.11 空行以外の行に行番号を付ける</a></li>
    <li><a name="toc-Counting-Characters" href="#wc-_002dc">7.12 文字数を数える</a></li>
    <li><a name="toc-Counting-Words" href="#wc-_002dw">7.13 単語数を数える</a></li>
    <li><a name="toc-Counting-Lines" href="#wc-_002dl">7.14 行数を数える</a></li>
    <li><a name="toc-Printing-the-First-Lines" href="#head">7.15 最初の数行をプリントする</a></li>
    <li><a name="toc-Printing-the-Last-Lines" href="#tail">7.16 末尾の数行をプリントする</a></li>
    <li><a name="toc-Make-Duplicate-Lines-Unique" href="#uniq">7.17 同一行を1つにまとめる</a></li>
    <li><a name="toc-Print-Duplicated-Lines-of-Input" href="#uniq-_002dd">7.18 重複した行のみプリントする。</a></li>
    <li><a name="toc-Remove-All-Duplicated-Lines" href="#uniq-_002du">7.19 重複行を全て取り除く（重複してない行のみプリントする）</a></li>
    <li><a name="toc-Squeezing-Blank-Lines" href="#cat-_002ds">7.20 連続する空白行を1行の空白行にする</a></li>
  </ul></li>
  <li><a name="toc-GNU-sed_0027s-Limitations-and-Non_002dlimitations" href="#Limitations">8 GNU <code>sed</code>の制限と、GNU <code>sed</code>で撤廃された制限</a></li>
  <li><a name="toc-Other-Resources-for-Learning-About-sed" href="#Other-Resources&lt;a0&gt;address range, example&lt;/a0&gt;">9 <code>sed</code>を習得するためのこの文書以外の資料</a></li>
  <li><a name="toc-Reporting-Bugs-1" href="#Reporting-Bugs">10バグ報告</a></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">概念索引</a></li>
  <li><a name="toc-Command-and-Option-Index-1" href="#Command-and-Option-Index">sedコマンドとそのオプションの索引</a></li>
</ul>
</div>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">脚注</h4>

<h3><a name="FOOT1" href="#DOCF1">(1)</a></h3>
<p>これは'<code>=</code>'、'<code>a</code>'、'<code>c</code>'、'<code>i</code>'、'<code>l</code>'、'<code>p</code>'のようなコマンドにも適用されます。. それでも、'<code>w</code>'、<a name="index-GNU-extensions_002c-_002fdev_002fstdout-file"></a>'<code>W</code>'コマンドに /dev/stdout を指定して標準出力に書き込む事ができます。</p>
<h3><a name="FOOT2" href="#DOCF2">(2)</a></h3>
<p>注意：GNU <code>sed</code>は実際に変更が行われたかどうかにかかわらずバックアップファイルを作成します。</p>
<h3><a name="FOOT3" href="#DOCF3">(3)</a></h3>
<p>'<samp>-i</samp>'オプションが指定されてない限り、これは'<code>p</code>'と同じです。</p>
<h3><a name="FOOT4" href="#DOCF4">(4)</a></h3>
<p>'<samp>-i</samp>'オプションが指定されてない限り、これは'<code>p</code>'と同じです。</p>
<h3><a name="FOOT5" href="#DOCF5">(5)</a></h3>
<p>もちろん、同じ事をするのにいろんな方法があります。例えば次のようなのです。
</p><div class="example">
<pre class="example">grep 'bash$' /etc/passwd
awk -F: '$7 == "/bin/bash"' /etc/passwd
</pre></div>
<h3><a name="FOOT6" href="#DOCF6">(6)</a></h3>
<p>ここで紹介しているエスケープは、<code>\n</code> を除きGNU拡張です。基本正規表現モードでは、環境変数 <code>POSIXLY_CORRECT</code> をセットするとブラケット('['...']')の中でそれを無効にします。</p>
<h3><a name="FOOT7" href="#DOCF7">(7)</a></h3>
<p>正規表現のマルチバイト文字処理についてはオペレーティングシステムとlibcの実装に依存するものがあります。ここで挙げた例はglibcを使うGNU/Linuxシステムでは期待どおりに動く事が分かっています。</p>
<h3><a name="FOOT8" href="#DOCF8">(8)</a></h3>
<p>実際には、<code>sed</code>が行末の改行無しの行をプリントするときでも、同じ出力ストリームに更にテキストが送られると、行末の改行なしの行に続いて改行をプリントしてから更なるテキストをプリントします。単に内容の通り出力するのではないわけで、<samp>sed -n p</samp>コマンドは<code>cat</code>コマンドと完全に同じ動作ではありません。</p>
<h3><a name="FOOT9" href="#DOCF9">(9)</a></h3>
<p><code>sed</code>導師のGreg Ubbenは<small>RPN</small>の<code>dc</code>を実装しました！それはsedと一緒に配布されました。</p>
<h3><a name="FOOT10" href="#DOCF10">(10)</a></h3>
<p>これにはバナー出力を埋め込むためのもう一つのスクリプトが必要です。例えば次のようなのです。
</p>
<div class="example">
<pre class="example">#!/bin/sh

banner -w $1 $2 $3 $4 |
  sed -e :a -e '/^.\{0,'$1'\}$/ { s/$/ /; ba; }' |
  ~/sedscripts/reverseline.sed
</pre></div>
<h3><a name="FOOT11" href="#DOCF11">(11)</a></h3>
<p>いくつかのsed実装では1スクリプト辺りのコマンド数は199までという制限があります。</p>
<h3><a name="FOOT12" href="#DOCF12">(12)</a></h3>
<p>これは、動作の変更を促した実際の「バグ」です。</p>
</div>
<hr>



</body>
</html>
